(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("react"),require("lodash"),require("react-dom"));else if(typeof define==="function"&&define.amd)define(["react","_","react-dom"],factory);else if(typeof exports==="object")exports["storm-react-diagrams"]=factory(require("react"),require("lodash"),require("react-dom"));else root["storm-react-diagrams"]=factory(root["React"],root["_"],root["ReactDOM"])})(window,function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__4__,__WEBPACK_EXTERNAL_MODULE__13__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.r=function(exports){Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=80)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);(function(process,global){__webpack_require__.d(__webpack_exports__,"Reaction",function(){return Reaction});__webpack_require__.d(__webpack_exports__,"untracked",function(){return untracked});__webpack_require__.d(__webpack_exports__,"IDerivationState",function(){return IDerivationState});__webpack_require__.d(__webpack_exports__,"createAtom",function(){return createAtom});__webpack_require__.d(__webpack_exports__,"spy",function(){return spy});__webpack_require__.d(__webpack_exports__,"comparer",function(){return comparer});__webpack_require__.d(__webpack_exports__,"isObservableObject",function(){return isObservableObject});__webpack_require__.d(__webpack_exports__,"isBoxedObservable",function(){return isObservableValue});__webpack_require__.d(__webpack_exports__,"isObservableArray",function(){return isObservableArray});__webpack_require__.d(__webpack_exports__,"ObservableMap",function(){return ObservableMap});__webpack_require__.d(__webpack_exports__,"isObservableMap",function(){return isObservableMap});__webpack_require__.d(__webpack_exports__,"transaction",function(){return transaction});__webpack_require__.d(__webpack_exports__,"observable",function(){return observable});__webpack_require__.d(__webpack_exports__,"computed",function(){return computed});__webpack_require__.d(__webpack_exports__,"isObservable",function(){return isObservable});__webpack_require__.d(__webpack_exports__,"isObservableProp",function(){return isObservableProp});__webpack_require__.d(__webpack_exports__,"isComputed",function(){return isComputed});__webpack_require__.d(__webpack_exports__,"isComputedProp",function(){return isComputedProp});__webpack_require__.d(__webpack_exports__,"extendObservable",function(){return extendObservable});__webpack_require__.d(__webpack_exports__,"extendShallowObservable",function(){return extendShallowObservable});__webpack_require__.d(__webpack_exports__,"observe",function(){return observe});__webpack_require__.d(__webpack_exports__,"intercept",function(){return intercept});__webpack_require__.d(__webpack_exports__,"autorun",function(){return autorun});__webpack_require__.d(__webpack_exports__,"reaction",function(){return reaction});__webpack_require__.d(__webpack_exports__,"when",function(){return when});__webpack_require__.d(__webpack_exports__,"action",function(){return action});__webpack_require__.d(__webpack_exports__,"isAction",function(){return isAction});__webpack_require__.d(__webpack_exports__,"runInAction",function(){return runInAction});__webpack_require__.d(__webpack_exports__,"keys",function(){return keys});__webpack_require__.d(__webpack_exports__,"values",function(){return values});__webpack_require__.d(__webpack_exports__,"set",function(){return set});__webpack_require__.d(__webpack_exports__,"remove",function(){return remove});__webpack_require__.d(__webpack_exports__,"has",function(){return has$1});__webpack_require__.d(__webpack_exports__,"get",function(){return get});__webpack_require__.d(__webpack_exports__,"decorate",function(){return decorate});__webpack_require__.d(__webpack_exports__,"configure",function(){return configure});__webpack_require__.d(__webpack_exports__,"onBecomeObserved",function(){return onBecomeObserved});__webpack_require__.d(__webpack_exports__,"onBecomeUnobserved",function(){return onBecomeUnobserved});__webpack_require__.d(__webpack_exports__,"flow",function(){return flow});__webpack_require__.d(__webpack_exports__,"toJS",function(){return toJS});__webpack_require__.d(__webpack_exports__,"trace",function(){return trace});__webpack_require__.d(__webpack_exports__,"getDependencyTree",function(){return getDependencyTree});__webpack_require__.d(__webpack_exports__,"getObserverTree",function(){return getObserverTree});__webpack_require__.d(__webpack_exports__,"_resetGlobalState",function(){return resetGlobalState});__webpack_require__.d(__webpack_exports__,"_getGlobalState",function(){return getGlobalState});__webpack_require__.d(__webpack_exports__,"getDebugName",function(){return getDebugName});__webpack_require__.d(__webpack_exports__,"getAtom",function(){return getAtom});__webpack_require__.d(__webpack_exports__,"_getAdministration",function(){return getAdministration});__webpack_require__.d(__webpack_exports__,"_allowStateChanges",function(){return allowStateChanges});__webpack_require__.d(__webpack_exports__,"isArrayLike",function(){return isArrayLike});__webpack_require__.d(__webpack_exports__,"_isComputingDerivation",function(){return isComputingDerivation});__webpack_require__.d(__webpack_exports__,"onReactionError",function(){return onReactionError});__webpack_require__.d(__webpack_exports__,"_interceptReads",function(){return interceptReads});var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}var enumerableDescriptorCache={};var nonEnumerableDescriptorCache={};function createPropertyInitializerDescriptor(prop,enumerable){var cache=enumerable?enumerableDescriptorCache:nonEnumerableDescriptorCache;return cache[prop]||(cache[prop]={configurable:true,enumerable:enumerable,get:function(){initializeInstance(this);return this[prop]},set:function(value){initializeInstance(this);this[prop]=value}})}function initializeInstance(target){if(target.__mobxDidRunLazyInitializers===true)return;var decorators=target.__mobxDecorators;if(decorators){addHiddenProp(target,"__mobxDidRunLazyInitializers",true);for(var key in decorators){var d=decorators[key];d.propertyCreator(target,d.prop,d.descriptor,d.decoratorTarget,d.decoratorArguments)}}}function createPropDecorator(propertyInitiallyEnumerable,propertyCreator){return function decoratorFactory(){var decoratorArguments;var decorator=function decorate(target,prop,descriptor,applyImmediately){if(applyImmediately===true){propertyCreator(target,prop,descriptor,target,decoratorArguments);return null}if(false){}if(!Object.prototype.hasOwnProperty.call(target,"__mobxDecorators")){var inheritedDecorators=target.__mobxDecorators;addHiddenProp(target,"__mobxDecorators",__assign({},inheritedDecorators))}target.__mobxDecorators[prop]={prop:prop,propertyCreator:propertyCreator,descriptor:descriptor,decoratorTarget:target,decoratorArguments:decoratorArguments};return createPropertyInitializerDescriptor(prop,propertyInitiallyEnumerable)};if(quacksLikeADecorator(arguments)){decoratorArguments=EMPTY_ARRAY;return decorator.apply(null,arguments)}else{decoratorArguments=Array.prototype.slice.call(arguments);return decorator}}}function quacksLikeADecorator(args){return(args.length===2||args.length===3)&&typeof args[1]==="string"||args.length===4&&args[3]===true}function isSpyEnabled(){return!!globalState.spyListeners.length}function spyReport(event){if(!globalState.spyListeners.length)return;var listeners=globalState.spyListeners;for(var i=0,l=listeners.length;i<l;i++)listeners[i](event)}function spyReportStart(event){var change=__assign({},event,{spyReportStart:true});spyReport(change)}var END_EVENT={spyReportEnd:true};function spyReportEnd(change){if(change)spyReport(__assign({},change,{spyReportEnd:true}));else spyReport(END_EVENT)}function spy(listener){globalState.spyListeners.push(listener);return once(function(){globalState.spyListeners=globalState.spyListeners.filter(function(l){return l!==listener})})}function createAction(actionName,fn){if(false){}var res=function(){return executeAction(actionName,fn,this,arguments)};res.isMobxAction=true;return res}function executeAction(actionName,fn,scope,args){var runInfo=startAction(actionName,fn,scope,args);try{return fn.apply(scope,args)}finally{endAction(runInfo)}}function startAction(actionName,fn,scope,args){var notifySpy=isSpyEnabled()&&!!actionName;var startTime=0;if(notifySpy){startTime=Date.now();var l=args&&args.length||0;var flattendArgs=new Array(l);if(l>0)for(var i=0;i<l;i++)flattendArgs[i]=args[i];spyReportStart({type:"action",name:actionName,object:scope,arguments:flattendArgs})}var prevDerivation=untrackedStart();startBatch();var prevAllowStateChanges=allowStateChangesStart(true);return{prevDerivation:prevDerivation,prevAllowStateChanges:prevAllowStateChanges,notifySpy:notifySpy,startTime:startTime}}function endAction(runInfo){allowStateChangesEnd(runInfo.prevAllowStateChanges);endBatch();untrackedEnd(runInfo.prevDerivation);if(runInfo.notifySpy)spyReportEnd({time:Date.now()-runInfo.startTime})}function allowStateChanges(allowStateChanges,func){var prev=allowStateChangesStart(allowStateChanges);var res;try{res=func()}finally{allowStateChangesEnd(prev)}return res}function allowStateChangesStart(allowStateChanges){var prev=globalState.allowStateChanges;globalState.allowStateChanges=allowStateChanges;return prev}function allowStateChangesEnd(prev){globalState.allowStateChanges=prev}function dontReassignFields(){fail$1("production"!=="production"&&"@action fields are not reassignable")}function namedActionDecorator(name){return function(target,prop,descriptor){if(descriptor){if(false){}if(descriptor.value){return{value:createAction(name,descriptor.value),enumerable:false,configurable:false,writable:true}}var initializer_1=descriptor.initializer;return{enumerable:false,configurable:false,writable:"production"!=="production",initializer:function(){return createAction(name,initializer_1.call(this))}}}return actionFieldDecorator(name).apply(this,arguments)}}function actionFieldDecorator(name){return function(target,prop,descriptor){Object.defineProperty(target,prop,{configurable:true,enumerable:false,get:function(){return undefined},set:function(value){addHiddenFinalProp(this,prop,action(name,value))}})}}function boundActionDecorator(target,propertyName,descriptor,applyToInstance){if(applyToInstance===true){defineBoundAction(target,propertyName,descriptor.value);return null}if(descriptor){return{configurable:true,enumerable:false,get:function(){defineBoundAction(this,propertyName,descriptor.value||descriptor.initializer.call(this));return this[propertyName]},set:dontReassignFields}}return{enumerable:false,configurable:true,set:function(v){defineBoundAction(this,propertyName,v)},get:function(){return undefined}}}var action=function action(arg1,arg2,arg3,arg4){if(arguments.length===1&&typeof arg1==="function")return createAction(arg1.name||"<unnamed action>",arg1);if(arguments.length===2&&typeof arg2==="function")return createAction(arg1,arg2);if(arguments.length===1&&typeof arg1==="string")return namedActionDecorator(arg1);if(arg4===true){arg1[arg2]=createAction(arg1.name||arg2,arg3.value)}else{return namedActionDecorator(arg2).apply(null,arguments)}};action.bound=boundActionDecorator;function runInAction(arg1,arg2){var actionName=typeof arg1==="string"?arg1:arg1.name||"<unnamed action>";var fn=typeof arg1==="function"?arg1:arg2;if(false){}return executeAction(actionName,fn,this,undefined)}function isAction(thing){return typeof thing==="function"&&thing.isMobxAction===true}function defineBoundAction(target,propertyName,fn){addHiddenProp(target,propertyName,createAction(propertyName,fn.bind(target)))}var toString=Object.prototype.toString;function deepEqual(a,b){return eq(a,b)}function eq(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return false;if(a!==a)return b!==b;var type=typeof a;if(type!=="function"&&type!=="object"&&typeof b!="object")return false;return deepEq(a,b,aStack,bStack)}function deepEq(a,b,aStack,bStack){a=unwrap(a);b=unwrap(b);var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b;case"[object Symbol]":return typeof Symbol!=="undefined"&&Symbol.valueOf.call(a)===Symbol.valueOf.call(b)}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(typeof aCtor==="function"&&aCtor instanceof aCtor&&typeof bCtor==="function"&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys$$1=Object.keys(a),key;length=keys$$1.length;if(Object.keys(b).length!==length)return false;while(length--){key=keys$$1[length];if(!(has$$1(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true}function unwrap(a){if(isObservableArray(a))return a.peek();if(isES6Map(a)||isObservableMap(a))return iteratorToArray(a.entries());return a}function has$$1(a,key){return Object.prototype.hasOwnProperty.call(a,key)}function identityComparer(a,b){return a===b}function structuralComparer(a,b){return deepEqual(a,b)}function defaultComparer(a,b){return areBothNaN(a,b)||identityComparer(a,b)}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer};function autorun(view,opts){if(opts===void 0){opts=EMPTY_OBJECT}if(false){}var name=opts&&opts.name||view.name||"Autorun@"+getNextId();var runSync=!opts.scheduler&&!opts.delay;var reaction;if(runSync){reaction=new Reaction(name,function(){this.track(reactionRunner)},opts.onError)}else{var scheduler_1=createSchedulerFromOptions(opts);var isScheduled_1=false;reaction=new Reaction(name,function(){if(!isScheduled_1){isScheduled_1=true;scheduler_1(function(){isScheduled_1=false;if(!reaction.isDisposed)reaction.track(reactionRunner)})}},opts.onError)}function reactionRunner(){view(reaction)}reaction.schedule();return reaction.getDisposer()}var run=function(f){return f()};function createSchedulerFromOptions(opts){return opts.scheduler?opts.scheduler:opts.delay?function(f){return setTimeout(f,opts.delay)}:run}function reaction(expression,effect,opts){if(opts===void 0){opts=EMPTY_OBJECT}if(typeof opts==="boolean"){opts={fireImmediately:opts};deprecated("Using fireImmediately as argument is deprecated. Use '{ fireImmediately: true }' instead")}if(false){}var name=opts.name||"Reaction@"+getNextId();var effectAction=action(name,opts.onError?wrapErrorHandler(opts.onError,effect):effect);var runSync=!opts.scheduler&&!opts.delay;var scheduler=createSchedulerFromOptions(opts);var firstTime=true;var isScheduled=false;var value;var equals=opts.compareStructural?comparer.structural:opts.equals||comparer.default;var r=new Reaction(name,function(){if(firstTime||runSync){reactionRunner()}else if(!isScheduled){isScheduled=true;scheduler(reactionRunner)}},opts.onError);function reactionRunner(){isScheduled=false;if(r.isDisposed)return;var changed=false;r.track(function(){var nextValue=expression(r);changed=firstTime||!equals(value,nextValue);value=nextValue});if(firstTime&&opts.fireImmediately)effectAction(value,r);if(!firstTime&&changed===true)effectAction(value,r);if(firstTime)firstTime=false}r.schedule();return r.getDisposer()}function wrapErrorHandler(errorHandler,baseFn){return function(){try{return baseFn.apply(this,arguments)}catch(e){errorHandler.call(this,e)}}}var ComputedValue=function(){function ComputedValue(options){var _this=this;this.dependenciesState=IDerivationState.NOT_TRACKING;this.observing=[];this.newObserving=null;this.isBeingObserved=false;this.isPendingUnobservation=false;this.observers=[];this.observersIndexes={};this.diffValue=0;this.runId=0;this.lastAccessedBy=0;this.lowestObserverState=IDerivationState.UP_TO_DATE;this.unboundDepsCount=0;this.__mapid="#"+getNextId();this.value=new CaughtException(null);this.isComputing=false;this.isRunningSetter=false;this.isTracing=TraceMode.NONE;if("production"==="production"&&!options.get)return fail$1("missing option for computed: get");this.derivation=options.get;this.name=options.name||"ComputedValue@"+getNextId();if(options.set)this.setter=createAction(this.name+"-setter",options.set);this.equals=options.equals||(options.compareStructural||options.struct?comparer.structural:comparer.default);this.scope=options.context;this.requiresReaction=!!options.requiresReaction;if(options.keepAlive===true){autorun(function(){return _this.get()})}}ComputedValue.prototype.onBecomeStale=function(){propagateMaybeChanged(this)};ComputedValue.prototype.onBecomeUnobserved=function(){};ComputedValue.prototype.onBecomeObserved=function(){};ComputedValue.prototype.get=function(){if(this.isComputing)fail$1("Cycle detected in computation "+this.name+": "+this.derivation);if(globalState.inBatch===0){if(shouldCompute(this)){this.warnAboutUntrackedRead();startBatch();this.value=this.computeValue(false);endBatch()}}else{reportObserved(this);if(shouldCompute(this))if(this.trackAndCompute())propagateChangeConfirmed(this)}var result=this.value;if(isCaughtException(result))throw result.cause;return result};ComputedValue.prototype.peek=function(){var res=this.computeValue(false);if(isCaughtException(res))throw res.cause;return res};ComputedValue.prototype.set=function(value){if(this.setter){invariant(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?");this.isRunningSetter=true;try{this.setter.call(this.scope,value)}finally{this.isRunningSetter=false}}else invariant(false,"production"!=="production"&&"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")};ComputedValue.prototype.trackAndCompute=function(){if(isSpyEnabled()){spyReport({object:this.scope,type:"compute",name:this.name})}var oldValue=this.value;var wasSuspended=this.dependenciesState===IDerivationState.NOT_TRACKING;var newValue=this.value=this.computeValue(true);return wasSuspended||isCaughtException(oldValue)||isCaughtException(newValue)||!this.equals(oldValue,newValue)};ComputedValue.prototype.computeValue=function(track){this.isComputing=true;globalState.computationDepth++;var res;if(track){res=trackDerivedFunction(this,this.derivation,this.scope)}else{if(globalState.disableErrorBoundaries===true){res=this.derivation.call(this.scope)}else{try{res=this.derivation.call(this.scope)}catch(e){res=new CaughtException(e)}}}globalState.computationDepth--;this.isComputing=false;return res};ComputedValue.prototype.suspend=function(){clearObserving(this);this.value=undefined};ComputedValue.prototype.observe=function(listener,fireImmediately){var _this=this;var firstTime=true;var prevValue=undefined;return autorun(function(){var newValue=_this.get();if(!firstTime||fireImmediately){var prevU=untrackedStart();listener({type:"update",object:_this,newValue:newValue,oldValue:prevValue});untrackedEnd(prevU)}firstTime=false;prevValue=newValue})};ComputedValue.prototype.warnAboutUntrackedRead=function(){if(true)return;if(this.requiresReaction===true){fail$1("[mobx] Computed value "+this.name+" is read outside a reactive context")}if(this.isTracing!==TraceMode.NONE){console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context. Doing a full recompute")}if(globalState.computedRequiresReaction){console.warn("[mobx] Computed value "+this.name+" is being read outside a reactive context. Doing a full recompute")}};ComputedValue.prototype.toJSON=function(){return this.get()};ComputedValue.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"};ComputedValue.prototype.valueOf=function(){return toPrimitive(this.get())};return ComputedValue}();ComputedValue.prototype[primitiveSymbol()]=ComputedValue.prototype.valueOf;var isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue);function hasInterceptors(interceptable){return interceptable.interceptors!==undefined&&interceptable.interceptors.length>0}function registerInterceptor(interceptable,handler){var interceptors=interceptable.interceptors||(interceptable.interceptors=[]);interceptors.push(handler);return once(function(){var idx=interceptors.indexOf(handler);if(idx!==-1)interceptors.splice(idx,1)})}function interceptChange(interceptable,change){var prevU=untrackedStart();try{var interceptors=interceptable.interceptors;if(interceptors)for(var i=0,l=interceptors.length;i<l;i++){change=interceptors[i](change);invariant(!change||change.type,"Intercept handlers should return nothing or a change object");if(!change)break}return change}finally{untrackedEnd(prevU)}}function hasListeners(listenable){return listenable.changeListeners!==undefined&&listenable.changeListeners.length>0}function registerListener(listenable,handler){var listeners=listenable.changeListeners||(listenable.changeListeners=[]);listeners.push(handler);return once(function(){var idx=listeners.indexOf(handler);if(idx!==-1)listeners.splice(idx,1)})}function notifyListeners(listenable,change){var prevU=untrackedStart();var listeners=listenable.changeListeners;if(!listeners)return;listeners=listeners.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i](change)}untrackedEnd(prevU)}var UNCHANGED={};declareAtom();var ObservableValue=function(_super){__extends(ObservableValue,_super);function ObservableValue(value,enhancer,name,notifySpy){if(name===void 0){name="ObservableValue@"+getNextId()}if(notifySpy===void 0){notifySpy=true}var _this=_super.call(this,name)||this;_this.enhancer=enhancer;_this.hasUnreportedChange=false;_this.value=enhancer(value,undefined,name);if(notifySpy&&isSpyEnabled()){spyReport({type:"create",name:_this.name,newValue:""+_this.value})}return _this}ObservableValue.prototype.dehanceValue=function(value){if(this.dehancer!==undefined)return this.dehancer(value);return value};ObservableValue.prototype.set=function(newValue){var oldValue=this.value;newValue=this.prepareNewValue(newValue);if(newValue!==UNCHANGED){var notifySpy=isSpyEnabled();if(notifySpy){spyReportStart({type:"update",name:this.name,newValue:newValue,oldValue:oldValue})}this.setNewValue(newValue);if(notifySpy)spyReportEnd()}};ObservableValue.prototype.prepareNewValue=function(newValue){checkIfStateModificationsAreAllowed(this);if(hasInterceptors(this)){var change=interceptChange(this,{object:this,type:"update",newValue:newValue});if(!change)return UNCHANGED;newValue=change.newValue}newValue=this.enhancer(newValue,this.value,this.name);return this.value!==newValue?newValue:UNCHANGED};ObservableValue.prototype.setNewValue=function(newValue){var oldValue=this.value;this.value=newValue;this.reportChanged();if(hasListeners(this)){notifyListeners(this,{type:"update",object:this,newValue:newValue,oldValue:oldValue})}};ObservableValue.prototype.get=function(){this.reportObserved();return this.dehanceValue(this.value)};ObservableValue.prototype.intercept=function(handler){return registerInterceptor(this,handler)};ObservableValue.prototype.observe=function(listener,fireImmediately){if(fireImmediately)listener({object:this,type:"update",newValue:this.value,oldValue:undefined});return registerListener(this,listener)};ObservableValue.prototype.toJSON=function(){return this.get()};ObservableValue.prototype.toString=function(){return this.name+"["+this.value+"]"};ObservableValue.prototype.valueOf=function(){return toPrimitive(this.get())};return ObservableValue}(Atom);ObservableValue.prototype[primitiveSymbol()]=ObservableValue.prototype.valueOf;var isObservableValue=createInstanceofPredicate("ObservableValue",ObservableValue);var ObservableObjectAdministration=function(){function ObservableObjectAdministration(target,name,defaultEnhancer){this.target=target;this.name=name;this.defaultEnhancer=defaultEnhancer;this.values={}}ObservableObjectAdministration.prototype.read=function(owner,key){if(this.target!==owner){this.illegalAccess(owner,key);return}return this.values[key].get()};ObservableObjectAdministration.prototype.write=function(owner,key,newValue){var instance=this.target;if(instance!==owner){this.illegalAccess(owner,key);return}var observable=this.values[key];if(observable instanceof ComputedValue){observable.set(newValue);return}if(hasInterceptors(this)){var change=interceptChange(this,{type:"update",object:instance,name:key,newValue:newValue});if(!change)return;newValue=change.newValue}newValue=observable.prepareNewValue(newValue);if(newValue!==UNCHANGED){var notify=hasListeners(this);var notifySpy=isSpyEnabled();var change=notify||notifySpy?{type:"update",object:instance,oldValue:observable.value,name:key,newValue:newValue}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.name,key:key}));observable.setNewValue(newValue);if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd()}};ObservableObjectAdministration.prototype.remove=function(key){if(!this.values[key])return;var target=this.target;if(hasInterceptors(this)){var change=interceptChange(this,{object:target,name:key,type:"remove"});if(!change)return}try{startBatch();var notify=hasListeners(this);var notifySpy=isSpyEnabled();var oldValue=this.values[key].get();if(this.keys)this.keys.remove(key);delete this.values[key];delete this.target[key];var change=notify||notifySpy?{type:"remove",object:target,oldValue:oldValue,name:key}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.name,key:key}));if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd()}finally{endBatch()}};ObservableObjectAdministration.prototype.illegalAccess=function(owner,propName){return fail$1("Property '"+propName+"' of '"+owner+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")};ObservableObjectAdministration.prototype.observe=function(callback,fireImmediately){"production"!=="production"&&invariant(fireImmediately!==true,"`observe` doesn't support the fire immediately property for observable objects.");return registerListener(this,callback)};ObservableObjectAdministration.prototype.intercept=function(handler){return registerInterceptor(this,handler)};ObservableObjectAdministration.prototype.getKeys=function(){var _this=this;if(this.keys===undefined){this.keys=new ObservableArray(Object.keys(this.values).filter(function(key){return _this.values[key]instanceof ObservableValue}),referenceEnhancer,"keys("+this.name+")",true)}return this.keys.slice()};return ObservableObjectAdministration}();function asObservableObject(target,name,defaultEnhancer){if(name===void 0){name=""}if(defaultEnhancer===void 0){defaultEnhancer=deepEnhancer}var adm=target.$mobx;if(adm)return adm;"production"!=="production"&&invariant(Object.isExtensible(target),"Cannot make the designated object observable; it is not extensible");if(!isPlainObject(target))name=(target.constructor.name||"ObservableObject")+"@"+getNextId();if(!name)name="ObservableObject@"+getNextId();adm=new ObservableObjectAdministration(target,name,defaultEnhancer);addHiddenFinalProp(target,"$mobx",adm);return adm}function defineObservableProperty(target,propName,newValue,enhancer){var adm=asObservableObject(target);assertPropertyConfigurable(target,propName);if(hasInterceptors(adm)){var change=interceptChange(adm,{object:target,name:propName,type:"add",newValue:newValue});if(!change)return;newValue=change.newValue}var observable=adm.values[propName]=new ObservableValue(newValue,enhancer,adm.name+"."+propName,false);newValue=observable.value;Object.defineProperty(target,propName,generateObservablePropConfig(propName));if(adm.keys)adm.keys.push(propName);notifyPropertyAddition(adm,target,propName,newValue)}function defineComputedProperty(target,propName,options){var adm=asObservableObject(target);options.name=adm.name+"."+propName;options.context=target;adm.values[propName]=new ComputedValue(options);Object.defineProperty(target,propName,generateComputedPropConfig(propName))}var observablePropertyConfigs={};var computedPropertyConfigs={};function generateObservablePropConfig(propName){return observablePropertyConfigs[propName]||(observablePropertyConfigs[propName]={configurable:true,enumerable:true,get:function(){return this.$mobx.read(this,propName)},set:function(v){this.$mobx.write(this,propName,v)}})}function getAdministrationForComputedPropOwner(owner){var adm=owner.$mobx;if(!adm){initializeInstance(owner);return owner.$mobx}return adm}function generateComputedPropConfig(propName){return computedPropertyConfigs[propName]||(computedPropertyConfigs[propName]={configurable:true,enumerable:false,get:function(){return getAdministrationForComputedPropOwner(this).read(this,propName)},set:function(v){getAdministrationForComputedPropOwner(this).write(this,propName,v)}})}function notifyPropertyAddition(adm,object,key,newValue){var notify=hasListeners(adm);var notifySpy=isSpyEnabled();var change=notify||notifySpy?{type:"add",object:object,name:key,newValue:newValue}:null;if(notifySpy)spyReportStart(__assign({},change,{name:adm.name,key:key}));if(notify)notifyListeners(adm,change);if(notifySpy)spyReportEnd()}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function isObservableObject(thing){if(isObject(thing)){initializeInstance(thing);return isObservableObjectAdministration(thing.$mobx)}return false}function createDecoratorForEnhancer(enhancer){var decorator=createPropDecorator(true,function(target,propertyName,descriptor,_decoratorTarget,decoratorArgs){var initialValue=descriptor?descriptor.initializer?descriptor.initializer.call(target):descriptor.value:undefined;defineObservableProperty(target,propertyName,initialValue,enhancer)});var res=typeof process!=="undefined"&&process.env&&"production"!=="production"?function observableDecorator(){if(arguments.length<2)return fail$1("Incorrect decorator invocation. @observable decorator doesn't expect any arguments");return decorator.apply(null,arguments)}:decorator;res.enhancer=enhancer;return res}function _isObservable(value,property){if(value===null||value===undefined)return false;if(property!==undefined){if(false){}if(isObservableObject(value)){var o=value.$mobx;return o.values&&!!o.values[property]}return false}return isObservableObject(value)||!!value.$mobx||isAtom(value)||isReaction(value)||isComputedValue(value)}function isObservable(value){if(arguments.length!==1)fail$1("production"!=="production"&&"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property");return _isObservable(value)}function isObservableProp(value,propName){if(typeof propName!=="string")return fail$1("production"!=="production"&&"expected a property name as second argument");return _isObservable(value,propName)}function _isComputed(value,property){if(value===null||value===undefined)return false;if(property!==undefined){if(isObservableObject(value)===false)return false;if(!value.$mobx.values[property])return false;var atom=getAtom(value,property);return isComputedValue(atom)}return isComputedValue(value)}function isComputed(value){if(arguments.length>1)return fail$1("production"!=="production"&&"isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property");return _isComputed(value)}function isComputedProp(value,propName){if(typeof propName!=="string")return fail$1("production"!=="production"&&"isComputed expected a property name as second argument");return _isComputed(value,propName)}var computedDecorator=createPropDecorator(false,function(instance,propertyName,descriptor,decoratorTarget,decoratorArgs){var get=descriptor.get,set=descriptor.set;var options=decoratorArgs[0]||{};defineComputedProperty(instance,propertyName,__assign({},options,{get:get,set:set}))});var computedStructDecorator=computedDecorator({equals:comparer.structural});var computed=function computed(arg1,arg2,arg3){if(typeof arg2==="string"){return computedDecorator.apply(null,arguments)}if(arg1!==null&&typeof arg1==="object"&&arguments.length===1){return computedDecorator.apply(null,arguments)}if(false){}var opts=typeof arg2==="object"?arg2:{};opts.get=arg1;opts.set=typeof arg2==="function"?arg2:opts.set;opts.name=opts.name||arg1.name||"";return new ComputedValue(opts)};computed.struct=computedStructDecorator;function extendShallowObservable(target,properties,decorators){deprecated("'extendShallowObservable' is deprecated, use 'extendObservable(target, props, { deep: false })' instead");return extendObservable(target,properties,decorators,shallowCreateObservableOptions)}function extendObservable(target,properties,decorators,options){if(false){var key}options=asCreateObservableOptions(options);var defaultDecorator=options.defaultDecorator||(options.deep===false?refDecorator:deepDecorator);asObservableObject(target,options.name,defaultDecorator.enhancer);startBatch();try{for(var key in properties){var descriptor=Object.getOwnPropertyDescriptor(properties,key);if(false){}var decorator=decorators&&key in decorators?decorators[key]:descriptor.get?computedDecorator:defaultDecorator;if(false){}var resultDescriptor=decorator(target,key,descriptor,true);if(resultDescriptor)Object.defineProperty(target,key,resultDescriptor)}}finally{endBatch()}return target}var defaultCreateObservableOptions={deep:true,name:undefined,defaultDecorator:undefined};var shallowCreateObservableOptions={deep:false,name:undefined,defaultDecorator:undefined};Object.freeze(defaultCreateObservableOptions);Object.freeze(shallowCreateObservableOptions);function assertValidOption(key){if(!/^(deep|name|defaultDecorator)$/.test(key))fail$1("invalid option for (extend)observable: "+key)}function asCreateObservableOptions(thing){if(thing===null||thing===undefined)return defaultCreateObservableOptions;if(typeof thing==="string")return{name:thing,deep:true};if(false){}return thing}function getEnhancerFromOptions(options){return options.defaultDecorator?options.defaultDecorator.enhancer:options.deep===false?referenceEnhancer:deepEnhancer}var deepDecorator=createDecoratorForEnhancer(deepEnhancer);var shallowDecorator=createDecoratorForEnhancer(shallowEnhancer);var refDecorator=createDecoratorForEnhancer(referenceEnhancer);var refStructDecorator=createDecoratorForEnhancer(refStructEnhancer);function createObservable(v,arg2,arg3){if(typeof arguments[1]==="string"){return deepDecorator.apply(null,arguments)}if(isObservable(v))return v;var res=isPlainObject(v)?observable.object(v,arg2,arg3):Array.isArray(v)?observable.array(v,arg2):isES6Map(v)?observable.map(v,arg2):v;if(res!==v)return res;fail$1("production"!=="production"&&"The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'")}var observableFactories={box:function(value,options){if(arguments.length>2)incorrectlyUsedAsDecorator("box");var o=asCreateObservableOptions(options);return new ObservableValue(value,getEnhancerFromOptions(o),o.name)},shallowBox:function(value,name){if(arguments.length>2)incorrectlyUsedAsDecorator("shallowBox");deprecated("observable.shallowBox","observable.box(value, { deep: false })");return observable.box(value,{name:name,deep:false})},array:function(initialValues,options){if(arguments.length>2)incorrectlyUsedAsDecorator("array");var o=asCreateObservableOptions(options);return new ObservableArray(initialValues,getEnhancerFromOptions(o),o.name)},shallowArray:function(initialValues,name){if(arguments.length>2)incorrectlyUsedAsDecorator("shallowArray");deprecated("observable.shallowArray","observable.array(values, { deep: false })");return observable.array(initialValues,{name:name,deep:false})},map:function(initialValues,options){if(arguments.length>2)incorrectlyUsedAsDecorator("map");var o=asCreateObservableOptions(options);return new ObservableMap(initialValues,getEnhancerFromOptions(o),o.name)},shallowMap:function(initialValues,name){if(arguments.length>2)incorrectlyUsedAsDecorator("shallowMap");deprecated("observable.shallowMap","observable.map(values, { deep: false })");return observable.map(initialValues,{name:name,deep:false})},object:function(props,decorators,options){if(typeof arguments[1]==="string")incorrectlyUsedAsDecorator("object");var o=asCreateObservableOptions(options);return extendObservable({},props,decorators,o)},shallowObject:function(props,name){if(typeof arguments[1]==="string")incorrectlyUsedAsDecorator("shallowObject");deprecated("observable.shallowObject","observable.object(values, {}, { deep: false })");return observable.object(props,{},{name:name,deep:false})},ref:refDecorator,shallow:shallowDecorator,deep:deepDecorator,struct:refStructDecorator};var observable=createObservable;Object.keys(observableFactories).forEach(function(name){return observable[name]=observableFactories[name]});function incorrectlyUsedAsDecorator(methodName){fail$1("Expected one or two arguments to observable."+methodName+". Did you accidentally try to use observable."+methodName+" as decorator?")}function deepEnhancer(v,_,name){if(isObservable(v))return v;if(Array.isArray(v))return observable.array(v,{name:name});if(isPlainObject(v))return observable.object(v,undefined,{name:name});if(isES6Map(v))return observable.map(v,{name:name});return v}function shallowEnhancer(v,_,name){if(v===undefined||v===null)return v;if(isObservableObject(v)||isObservableArray(v)||isObservableMap(v))return v;if(Array.isArray(v))return observable.array(v,{name:name,deep:false});if(isPlainObject(v))return observable.object(v,undefined,{name:name,deep:false});if(isES6Map(v))return observable.map(v,{name:name,deep:false});return fail$1("production"!=="production"&&"The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function referenceEnhancer(newValue){return newValue}function refStructEnhancer(v,oldValue,name){if(false){}if(deepEqual(v,oldValue))return oldValue;return v}function iteratorSymbol(){return typeof Symbol==="function"&&Symbol.iterator||"@@iterator"}function declareIterator(prototType,iteratorFactory){addHiddenFinalProp(prototType,iteratorSymbol(),iteratorFactory)}function makeIterable(iterator){iterator[iteratorSymbol()]=self;return iterator}function self(){return this}function transaction(action,thisArg){if(thisArg===void 0){thisArg=undefined}startBatch();try{return action.apply(thisArg)}finally{endBatch()}}var ObservableMapMarker={};var ObservableMap=function(){function ObservableMap(initialData,enhancer,name){if(enhancer===void 0){enhancer=deepEnhancer}if(name===void 0){name="ObservableMap@"+getNextId()}this.enhancer=enhancer;this.name=name;this.$mobx=ObservableMapMarker;this._keys=new ObservableArray(undefined,referenceEnhancer,this.name+".keys()",true);if(typeof Map!=="function"){throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js")}this._data=new Map;this._hasMap=new Map;this.merge(initialData)}ObservableMap.prototype._has=function(key){return this._data.has(key)};ObservableMap.prototype.has=function(key){if(this._hasMap.has(key))return this._hasMap.get(key).get();return this._updateHasMapEntry(key,false).get()};ObservableMap.prototype.set=function(key,value){var hasKey=this._has(key);if(hasInterceptors(this)){var change=interceptChange(this,{type:hasKey?"update":"add",object:this,newValue:value,name:key});if(!change)return this;value=change.newValue}if(hasKey){this._updateValue(key,value)}else{this._addValue(key,value)}return this};ObservableMap.prototype.delete=function(key){var _this=this;if(hasInterceptors(this)){var change=interceptChange(this,{type:"delete",object:this,name:key});if(!change)return false}if(this._has(key)){var notifySpy=isSpyEnabled();var notify=hasListeners(this);var change=notify||notifySpy?{type:"delete",object:this,oldValue:this._data.get(key).value,name:key}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.name,key:key}));transaction(function(){_this._keys.remove(key);_this._updateHasMapEntry(key,false);var observable=_this._data.get(key);observable.setNewValue(undefined);_this._data.delete(key)});if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd();return true}return false};ObservableMap.prototype._updateHasMapEntry=function(key,value){var entry=this._hasMap.get(key);if(entry){entry.setNewValue(value)}else{entry=new ObservableValue(value,referenceEnhancer,this.name+"."+key+"?",false);this._hasMap.set(key,entry)}return entry};ObservableMap.prototype._updateValue=function(key,newValue){var observable=this._data.get(key);newValue=observable.prepareNewValue(newValue);if(newValue!==UNCHANGED){var notifySpy=isSpyEnabled();var notify=hasListeners(this);var change=notify||notifySpy?{type:"update",object:this,oldValue:observable.value,name:key,newValue:newValue}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.name,key:key}));observable.setNewValue(newValue);if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd()}};ObservableMap.prototype._addValue=function(key,newValue){var _this=this;transaction(function(){var observable=new ObservableValue(newValue,_this.enhancer,_this.name+"."+key,false);_this._data.set(key,observable);newValue=observable.value;_this._updateHasMapEntry(key,true);_this._keys.push(key)});var notifySpy=isSpyEnabled();var notify=hasListeners(this);var change=notify||notifySpy?{type:"add",object:this,name:key,newValue:newValue}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.name,key:key}));if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd()};ObservableMap.prototype.get=function(key){if(this.has(key))return this.dehanceValue(this._data.get(key).get());return this.dehanceValue(undefined)};ObservableMap.prototype.dehanceValue=function(value){if(this.dehancer!==undefined){return this.dehancer(value)}return value};ObservableMap.prototype.keys=function(){return this._keys[iteratorSymbol()]()};ObservableMap.prototype.values=function(){var self=this;var nextIndex=0;return makeIterable({next:function(){return nextIndex<self._keys.length?{value:self.get(self._keys[nextIndex++]),done:false}:{value:undefined,done:true}}})};ObservableMap.prototype.entries=function(){var self=this;var nextIndex=0;return makeIterable({next:function(){if(nextIndex<self._keys.length){var key=self._keys[nextIndex++];return{value:[key,self.get(key)],done:false}}return{done:true}}})};ObservableMap.prototype.forEach=function(callback,thisArg){var _this=this;this._keys.forEach(function(key){return callback.call(thisArg,_this.get(key),key,_this)})};ObservableMap.prototype.merge=function(other){var _this=this;if(isObservableMap(other)){other=other.toJS()}transaction(function(){if(isPlainObject(other))Object.keys(other).forEach(function(key){return _this.set(key,other[key])});else if(Array.isArray(other))other.forEach(function(_a){var _b=__read(_a,2),key=_b[0],value=_b[1];return _this.set(key,value)});else if(isES6Map(other))other.forEach(function(value,key){return _this.set(key,value)});else if(other!==null&&other!==undefined)fail$1("Cannot initialize map from "+other)});return this};ObservableMap.prototype.clear=function(){var _this=this;transaction(function(){untracked(function(){_this._keys.slice().forEach(function(key){return _this.delete(key)})})})};ObservableMap.prototype.replace=function(values){var _this=this;transaction(function(){var newKeys=getMapLikeKeys(values);var oldKeys=_this._keys;var missingKeys=oldKeys.filter(function(k){return newKeys.indexOf(k)===-1});missingKeys.forEach(function(k){return _this.delete(k)});_this.merge(values)});return this};Object.defineProperty(ObservableMap.prototype,"size",{get:function(){return this._keys.length},enumerable:true,configurable:true});ObservableMap.prototype.toPOJO=function(){var _this=this;var res={};this._keys.forEach(function(key){return res[""+key]=_this.get(key)});return res};ObservableMap.prototype.toJS=function(){var _this=this;var res=new Map;this._keys.forEach(function(key){return res.set(key,_this.get(key))});return res};ObservableMap.prototype.toJSON=function(){return this.toPOJO()};ObservableMap.prototype.toString=function(){var _this=this;return this.name+"[{ "+this._keys.map(function(key){return key+": "+(""+_this.get(key))}).join(", ")+" }]"};ObservableMap.prototype.observe=function(listener,fireImmediately){"production"!=="production"&&invariant(fireImmediately!==true,"`observe` doesn't support fireImmediately=true in combination with maps.");return registerListener(this,listener)};ObservableMap.prototype.intercept=function(handler){return registerInterceptor(this,handler)};return ObservableMap}();declareIterator(ObservableMap.prototype,function(){return this.entries()});addHiddenFinalProp(ObservableMap.prototype,typeof Symbol!=="undefined"?Symbol.toStringTag:"@@toStringTag","Map");var isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function getAtom(thing,property){if(typeof thing==="object"&&thing!==null){if(isObservableArray(thing)){if(property!==undefined)fail$1("production"!=="production"&&"It is not possible to get index atoms from arrays");return thing.$mobx.atom}if(isObservableMap(thing)){var anyThing=thing;if(property===undefined)return getAtom(anyThing._keys);var observable=anyThing._data.get(property)||anyThing._hasMap.get(property);if(!observable)fail$1("production"!=="production"&&"the entry '"+property+"' does not exist in the observable map '"+getDebugName(thing)+"'");return observable}initializeInstance(thing);if(property&&!thing.$mobx)thing[property];if(isObservableObject(thing)){if(!property)return fail$1("production"!=="production"&&"please specify a property");var observable=thing.$mobx.values[property];if(!observable)fail$1("production"!=="production"&&"no observable property '"+property+"' found on the observable object '"+getDebugName(thing)+"'");return observable}if(isAtom(thing)||isComputedValue(thing)||isReaction(thing)){return thing}}else if(typeof thing==="function"){if(isReaction(thing.$mobx)){return thing.$mobx}}return fail$1("production"!=="production"&&"Cannot obtain atom from "+thing)}function getAdministration(thing,property){if(!thing)fail$1("Expecting some object");if(property!==undefined)return getAdministration(getAtom(thing,property));if(isAtom(thing)||isComputedValue(thing)||isReaction(thing))return thing;if(isObservableMap(thing))return thing;initializeInstance(thing);if(thing.$mobx)return thing.$mobx;fail$1("production"!=="production"&&"Cannot obtain administration from "+thing)}function getDebugName(thing,property){var named;if(property!==undefined)named=getAtom(thing,property);else if(isObservableObject(thing)||isObservableMap(thing))named=getAdministration(thing);else named=getAtom(thing);return named.name}function onBecomeObserved(thing,arg2,arg3){return interceptHook("onBecomeObserved",thing,arg2,arg3)}function onBecomeUnobserved(thing,arg2,arg3){return interceptHook("onBecomeUnobserved",thing,arg2,arg3)}function interceptHook(hook,thing,arg2,arg3){var atom=typeof arg2==="string"?getAtom(thing,arg2):getAtom(thing);var cb=typeof arg2==="string"?arg3:arg2;var orig=atom[hook];if(typeof orig!=="function")return fail$1("production"!=="production"&&"Not an atom that can be (un)observed");atom[hook]=function(){orig.call(this);cb.call(this)};return function(){atom[hook]=orig}}var Atom;var isAtom;function declareAtom(){if(Atom)return;Atom=function(){function AtomImpl(name){if(name===void 0){name="Atom@"+getNextId()}this.name=name;this.isPendingUnobservation=false;this.isBeingObserved=false;this.observers=[];this.observersIndexes={};this.diffValue=0;this.lastAccessedBy=0;this.lowestObserverState=IDerivationState.NOT_TRACKING}AtomImpl.prototype.onBecomeUnobserved=function(){};AtomImpl.prototype.onBecomeObserved=function(){};AtomImpl.prototype.reportObserved=function(){return reportObserved(this)};AtomImpl.prototype.reportChanged=function(){startBatch();propagateChanged(this);endBatch()};AtomImpl.prototype.toString=function(){return this.name};return AtomImpl}();isAtom=createInstanceofPredicate("Atom",Atom)}function createAtom(name,onBecomeObservedHandler,onBecomeUnobservedHandler){if(onBecomeObservedHandler===void 0){onBecomeObservedHandler=noop}if(onBecomeUnobservedHandler===void 0){onBecomeUnobservedHandler=noop}var atom=new Atom(name);onBecomeObserved(atom,onBecomeObservedHandler);onBecomeUnobserved(atom,onBecomeUnobservedHandler);return atom}var MAX_SPLICE_SIZE=1e4;var safariPrototypeSetterInheritanceBug=function(){var v=false;var p={};Object.defineProperty(p,"0",{set:function(){v=true}});Object.create(p)["0"]=1;return v===false}();var OBSERVABLE_ARRAY_BUFFER_SIZE=0;var StubArray=function(){function StubArray(){}return StubArray}();function inherit(ctor,proto){if(typeof Object["setPrototypeOf"]!=="undefined"){Object["setPrototypeOf"](ctor.prototype,proto)}else if(typeof ctor.prototype.__proto__!=="undefined"){ctor.prototype.__proto__=proto}else{ctor["prototype"]=proto}}inherit(StubArray,Array.prototype);if(Object.isFrozen(Array)){["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(key){Object.defineProperty(StubArray.prototype,key,{configurable:true,writable:true,value:Array.prototype[key]})})}var ObservableArrayAdministration=function(){function ObservableArrayAdministration(name,enhancer,array,owned){this.array=array;this.owned=owned;this.values=[];this.lastKnownLength=0;this.atom=new Atom(name||"ObservableArray@"+getNextId());this.enhancer=function(newV,oldV){return enhancer(newV,oldV,name+"[..]")}}ObservableArrayAdministration.prototype.dehanceValue=function(value){if(this.dehancer!==undefined)return this.dehancer(value);return value};ObservableArrayAdministration.prototype.dehanceValues=function(values){if(this.dehancer!==undefined&&this.values.length>0)return values.map(this.dehancer);return values};ObservableArrayAdministration.prototype.intercept=function(handler){return registerInterceptor(this,handler)};ObservableArrayAdministration.prototype.observe=function(listener,fireImmediately){if(fireImmediately===void 0){fireImmediately=false}if(fireImmediately){listener({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0})}return registerListener(this,listener)};ObservableArrayAdministration.prototype.getArrayLength=function(){this.atom.reportObserved();return this.values.length};ObservableArrayAdministration.prototype.setArrayLength=function(newLength){if(typeof newLength!=="number"||newLength<0)throw new Error("[mobx.array] Out of range: "+newLength);var currentLength=this.values.length;if(newLength===currentLength)return;else if(newLength>currentLength){var newItems=new Array(newLength-currentLength);for(var i=0;i<newLength-currentLength;i++)newItems[i]=undefined;this.spliceWithArray(currentLength,0,newItems)}else this.spliceWithArray(newLength,currentLength-newLength)};ObservableArrayAdministration.prototype.updateArrayLength=function(oldLength,delta){if(oldLength!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=delta;if(delta>0&&oldLength+delta+1>OBSERVABLE_ARRAY_BUFFER_SIZE)reserveArrayBuffer(oldLength+delta+1)};ObservableArrayAdministration.prototype.spliceWithArray=function(index,deleteCount,newItems){var _this=this;checkIfStateModificationsAreAllowed(this.atom);var length=this.values.length;if(index===undefined)index=0;else if(index>length)index=length;else if(index<0)index=Math.max(0,length+index);if(arguments.length===1)deleteCount=length-index;else if(deleteCount===undefined||deleteCount===null)deleteCount=0;else deleteCount=Math.max(0,Math.min(deleteCount,length-index));if(newItems===undefined)newItems=EMPTY_ARRAY;if(hasInterceptors(this)){var change=interceptChange(this,{object:this.array,type:"splice",index:index,removedCount:deleteCount,added:newItems});if(!change)return EMPTY_ARRAY;deleteCount=change.removedCount;newItems=change.added}newItems=newItems.length===0?newItems:newItems.map(function(v){return _this.enhancer(v,undefined)});var lengthDelta=newItems.length-deleteCount;this.updateArrayLength(length,lengthDelta);var res=this.spliceItemsIntoValues(index,deleteCount,newItems);if(deleteCount!==0||newItems.length!==0)this.notifyArraySplice(index,newItems,res);return this.dehanceValues(res)};ObservableArrayAdministration.prototype.spliceItemsIntoValues=function(index,deleteCount,newItems){if(newItems.length<MAX_SPLICE_SIZE){return(_a=this.values).splice.apply(_a,__spread([index,deleteCount],newItems))}else{var res=this.values.slice(index,index+deleteCount);this.values=this.values.slice(0,index).concat(newItems,this.values.slice(index+deleteCount));return res}var _a};ObservableArrayAdministration.prototype.notifyArrayChildUpdate=function(index,newValue,oldValue){var notifySpy=!this.owned&&isSpyEnabled();var notify=hasListeners(this);var change=notify||notifySpy?{object:this.array,type:"update",index:index,newValue:newValue,oldValue:oldValue}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.atom.name}));this.atom.reportChanged();if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd()};ObservableArrayAdministration.prototype.notifyArraySplice=function(index,added,removed){var notifySpy=!this.owned&&isSpyEnabled();var notify=hasListeners(this);var change=notify||notifySpy?{object:this.array,type:"splice",index:index,removed:removed,added:added,removedCount:removed.length,addedCount:added.length}:null;if(notifySpy)spyReportStart(__assign({},change,{name:this.atom.name}));this.atom.reportChanged();if(notify)notifyListeners(this,change);if(notifySpy)spyReportEnd()};return ObservableArrayAdministration}();var ObservableArray=function(_super){__extends(ObservableArray,_super);function ObservableArray(initialValues,enhancer,name,owned){if(name===void 0){name="ObservableArray@"+getNextId()}if(owned===void 0){owned=false}var _this=_super.call(this)||this;var adm=new ObservableArrayAdministration(name,enhancer,_this,owned);addHiddenFinalProp(_this,"$mobx",adm);if(initialValues&&initialValues.length){_this.spliceWithArray(0,0,initialValues)}if(safariPrototypeSetterInheritanceBug){Object.defineProperty(adm.array,"0",ENTRY_0)}return _this}ObservableArray.prototype.intercept=function(handler){return this.$mobx.intercept(handler)};ObservableArray.prototype.observe=function(listener,fireImmediately){if(fireImmediately===void 0){fireImmediately=false}return this.$mobx.observe(listener,fireImmediately)};ObservableArray.prototype.clear=function(){return this.splice(0)};ObservableArray.prototype.concat=function(){var arrays=[];for(var _i=0;_i<arguments.length;_i++){arrays[_i]=arguments[_i]}this.$mobx.atom.reportObserved();return Array.prototype.concat.apply(this.peek(),arrays.map(function(a){return isObservableArray(a)?a.peek():a}))};ObservableArray.prototype.replace=function(newItems){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,newItems)};ObservableArray.prototype.toJS=function(){return this.slice()};ObservableArray.prototype.toJSON=function(){return this.toJS()};ObservableArray.prototype.peek=function(){this.$mobx.atom.reportObserved();return this.$mobx.dehanceValues(this.$mobx.values)};ObservableArray.prototype.find=function(predicate,thisArg,fromIndex){if(fromIndex===void 0){fromIndex=0}if(arguments.length===3)deprecated("The array.find fromIndex argument to find will not be supported anymore in the next major");var idx=this.findIndex.apply(this,arguments);return idx===-1?undefined:this.get(idx)};ObservableArray.prototype.findIndex=function(predicate,thisArg,fromIndex){if(fromIndex===void 0){fromIndex=0}if(arguments.length===3)deprecated("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");var items=this.peek(),l=items.length;for(var i=fromIndex;i<l;i++)if(predicate.call(thisArg,items[i],i,this))return i;return-1};ObservableArray.prototype.splice=function(index,deleteCount){var newItems=[];for(var _i=2;_i<arguments.length;_i++){newItems[_i-2]=arguments[_i]}switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(index);case 2:return this.$mobx.spliceWithArray(index,deleteCount)}return this.$mobx.spliceWithArray(index,deleteCount,newItems)};ObservableArray.prototype.spliceWithArray=function(index,deleteCount,newItems){return this.$mobx.spliceWithArray(index,deleteCount,newItems)};ObservableArray.prototype.push=function(){var items=[];for(var _i=0;_i<arguments.length;_i++){items[_i]=arguments[_i]}var adm=this.$mobx;adm.spliceWithArray(adm.values.length,0,items);return adm.values.length};ObservableArray.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]};ObservableArray.prototype.shift=function(){return this.splice(0,1)[0]};ObservableArray.prototype.unshift=function(){var items=[];for(var _i=0;_i<arguments.length;_i++){items[_i]=arguments[_i]}var adm=this.$mobx;adm.spliceWithArray(0,0,items);return adm.values.length};ObservableArray.prototype.reverse=function(){var clone=this.slice();return clone.reverse.apply(clone,arguments)};ObservableArray.prototype.sort=function(compareFn){var clone=this.slice();return clone.sort.apply(clone,arguments)};ObservableArray.prototype.remove=function(value){var idx=this.$mobx.dehanceValues(this.$mobx.values).indexOf(value);if(idx>-1){this.splice(idx,1);return true}return false};ObservableArray.prototype.move=function(fromIndex,toIndex){deprecated("observableArray.move is deprecated, use .slice() & .replace() instead");function checkIndex(index){if(index<0){throw new Error("[mobx.array] Index out of bounds: "+index+" is negative")}var length=this.$mobx.values.length;if(index>=length){throw new Error("[mobx.array] Index out of bounds: "+index+" is not smaller than "+length)}}checkIndex.call(this,fromIndex);checkIndex.call(this,toIndex);if(fromIndex===toIndex){return}var oldItems=this.$mobx.values;var newItems;if(fromIndex<toIndex){newItems=__spread(oldItems.slice(0,fromIndex),oldItems.slice(fromIndex+1,toIndex+1),[oldItems[fromIndex]],oldItems.slice(toIndex+1))}else{newItems=__spread(oldItems.slice(0,toIndex),[oldItems[fromIndex]],oldItems.slice(toIndex,fromIndex),oldItems.slice(fromIndex+1))}this.replace(newItems)};ObservableArray.prototype.get=function(index){var impl=this.$mobx;if(impl){if(index<impl.values.length){impl.atom.reportObserved();return impl.dehanceValue(impl.values[index])}console.warn("[mobx.array] Attempt to read an array index ("+index+") that is out of bounds ("+impl.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}return undefined};ObservableArray.prototype.set=function(index,newValue){var adm=this.$mobx;var values=adm.values;if(index<values.length){checkIfStateModificationsAreAllowed(adm.atom);var oldValue=values[index];if(hasInterceptors(adm)){var change=interceptChange(adm,{type:"update",object:this,index:index,newValue:newValue});if(!change)return;newValue=change.newValue}newValue=adm.enhancer(newValue,oldValue);var changed=newValue!==oldValue;if(changed){values[index]=newValue;adm.notifyArrayChildUpdate(index,newValue,oldValue)}}else if(index===values.length){adm.spliceWithArray(index,0,[newValue])}else{throw new Error("[mobx.array] Index out of bounds, "+index+" is larger than "+values.length)}};return ObservableArray}(StubArray);declareIterator(ObservableArray.prototype,function(){this.$mobx.atom.reportObserved();var self=this;var nextIndex=0;return makeIterable({next:function(){return nextIndex<self.length?{value:self[nextIndex++],done:false}:{done:true,value:undefined}}})});Object.defineProperty(ObservableArray.prototype,"length",{enumerable:false,configurable:true,get:function(){return this.$mobx.getArrayLength()},set:function(newLength){this.$mobx.setArrayLength(newLength)}});["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(funcName){var baseFunc=Array.prototype[funcName];invariant(typeof baseFunc==="function","Base function not defined on Array prototype: '"+funcName+"'");addHiddenProp(ObservableArray.prototype,funcName,function(){return baseFunc.apply(this.peek(),arguments)})});makeNonEnumerable(ObservableArray.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var ENTRY_0=createArrayEntryDescriptor(0);function createArrayEntryDescriptor(index){return{enumerable:false,configurable:false,get:function(){return this.get(index)},set:function(value){this.set(index,value)}}}function createArrayBufferItem(index){Object.defineProperty(ObservableArray.prototype,""+index,createArrayEntryDescriptor(index))}function reserveArrayBuffer(max){for(var index=OBSERVABLE_ARRAY_BUFFER_SIZE;index<max;index++)createArrayBufferItem(index);OBSERVABLE_ARRAY_BUFFER_SIZE=max}reserveArrayBuffer(1e3);var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(thing){return isObject(thing)&&isObservableArrayAdministration(thing.$mobx)}var OBFUSCATED_ERROR="An invariant failed, however the error is obfuscated because this is an production build.";var EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);function getGlobal(){return typeof window!=="undefined"?window:global}function getNextId(){return++globalState.mobxGuid}function fail$1(message){invariant(false,message);throw"X"}function invariant(check,message){if(!check)throw new Error("[mobx] "+(message||OBFUSCATED_ERROR))}var deprecatedMessages=[];function deprecated(msg,thing){if(true)return false;if(thing){return deprecated("'"+msg+"', use '"+thing+"' instead.")}if(deprecatedMessages.indexOf(msg)!==-1)return false;deprecatedMessages.push(msg);console.error("[mobx] Deprecated: "+msg);return true}function once(func){var invoked=false;return function(){if(invoked)return;invoked=true;return func.apply(this,arguments)}}var noop=function(){};function unique(list){var res=[];list.forEach(function(item){if(res.indexOf(item)===-1)res.push(item)});return res}function isObject(value){return value!==null&&typeof value==="object"}function isPlainObject(value){if(value===null||typeof value!=="object")return false;var proto=Object.getPrototypeOf(value);return proto===Object.prototype||proto===null}function makeNonEnumerable(object,propNames){for(var i=0;i<propNames.length;i++){addHiddenProp(object,propNames[i],object[propNames[i]])}}function addHiddenProp(object,propName,value){Object.defineProperty(object,propName,{enumerable:false,writable:true,configurable:true,value:value})}function addHiddenFinalProp(object,propName,value){Object.defineProperty(object,propName,{enumerable:false,writable:false,configurable:true,value:value})}function isPropertyConfigurable(object,prop){var descriptor=Object.getOwnPropertyDescriptor(object,prop);return!descriptor||descriptor.configurable!==false&&descriptor.writable!==false}function assertPropertyConfigurable(object,prop){if(false){}}function createInstanceofPredicate(name,clazz){var propName="isMobX"+name;clazz.prototype[propName]=true;return function(x){return isObject(x)&&x[propName]===true}}function areBothNaN(a,b){return typeof a==="number"&&typeof b==="number"&&isNaN(a)&&isNaN(b)}function isArrayLike(x){return Array.isArray(x)||isObservableArray(x)}function isES6Map(thing){if(getGlobal().Map!==undefined&&thing instanceof getGlobal().Map)return true;return false}function getMapLikeKeys(map){if(isPlainObject(map))return Object.keys(map);if(Array.isArray(map))return map.map(function(_a){var _b=__read(_a,1),key=_b[0];return key});if(isES6Map(map)||isObservableMap(map))return iteratorToArray(map.keys());return fail$1("Cannot get keys from '"+map+"'")}function iteratorToArray(it){var res=[];while(true){var r=it.next();if(r.done)break;res.push(r.value)}return res}function primitiveSymbol(){return typeof Symbol==="function"&&Symbol.toPrimitive||"@@toPrimitive"}function toPrimitive(value){return value===null?null:typeof value==="object"?""+value:value}var persistentKeys=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId"];var MobXGlobals=function(){function MobXGlobals(){this.version=5;this.trackingDerivation=null;this.computationDepth=0;this.runId=0;this.mobxGuid=0;this.inBatch=0;this.pendingUnobservations=[];this.pendingReactions=[];this.isRunningReactions=false;this.allowStateChanges=true;this.enforceActions=false;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.computedRequiresReaction=false;this.disableErrorBoundaries=false}return MobXGlobals}();var globalState=new MobXGlobals;var runInIsolationCalled=false;{var global_1=getGlobal();if(!global_1.__mobxInstanceCount){global_1.__mobxInstanceCount=1}else{global_1.__mobxInstanceCount++;setTimeout(function(){if(!runInIsolationCalled){fail$1("production"!=="production"&&"There are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details.")}},1)}}function isolateGlobalState(){runInIsolationCalled=true;getGlobal().__mobxInstanceCount--}function getGlobalState(){return globalState}function resetGlobalState(){var defaultGlobals=new MobXGlobals;for(var key in defaultGlobals)if(persistentKeys.indexOf(key)===-1)globalState[key]=defaultGlobals[key];globalState.allowStateChanges=!globalState.enforceActions}function getDependencyTree(thing,property){return nodeToDependencyTree(getAtom(thing,property))}function nodeToDependencyTree(node){var result={name:node.name};if(node.observing&&node.observing.length>0)result.dependencies=unique(node.observing).map(nodeToDependencyTree);return result}function getObserverTree(thing,property){return nodeToObserverTree(getAtom(thing,property))}function nodeToObserverTree(node){var result={name:node.name};if(hasObservers(node))result.observers=getObservers(node).map(nodeToObserverTree);return result}function hasObservers(observable){return observable.observers&&observable.observers.length>0}function getObservers(observable){return observable.observers}function addObserver(observable,node){var l=observable.observers.length;if(l){observable.observersIndexes[node.__mapid]=l}observable.observers[l]=node;if(observable.lowestObserverState>node.dependenciesState)observable.lowestObserverState=node.dependenciesState}function removeObserver(observable,node){if(observable.observers.length===1){observable.observers.length=0;queueForUnobservation(observable)}else{var list=observable.observers;var map=observable.observersIndexes;var filler=list.pop();if(filler!==node){var index=map[node.__mapid]||0;if(index){map[filler.__mapid]=index}else{delete map[filler.__mapid]}list[index]=filler}delete map[node.__mapid]}}function queueForUnobservation(observable){if(observable.isPendingUnobservation===false){observable.isPendingUnobservation=true;globalState.pendingUnobservations.push(observable)}}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();var list=globalState.pendingUnobservations;for(var i=0;i<list.length;i++){var observable=list[i];observable.isPendingUnobservation=false;if(observable.observers.length===0){if(observable.isBeingObserved){observable.isBeingObserved=false;observable.onBecomeUnobserved()}if(observable instanceof ComputedValue){observable.suspend()}}}globalState.pendingUnobservations=[]}}function reportObserved(observable){var derivation=globalState.trackingDerivation;if(derivation!==null){if(derivation.runId!==observable.lastAccessedBy){observable.lastAccessedBy=derivation.runId;derivation.newObserving[derivation.unboundDepsCount++]=observable;if(!observable.isBeingObserved){observable.isBeingObserved=true;observable.onBecomeObserved()}}return true}else if(observable.observers.length===0&&globalState.inBatch>0){queueForUnobservation(observable)}return false}function propagateChanged(observable){if(observable.lowestObserverState===IDerivationState.STALE)return;observable.lowestObserverState=IDerivationState.STALE;var observers=observable.observers;var i=observers.length;while(i--){var d=observers[i];if(d.dependenciesState===IDerivationState.UP_TO_DATE){if(d.isTracing!==TraceMode.NONE){logTraceInfo(d,observable)}d.onBecomeStale()}d.dependenciesState=IDerivationState.STALE}}function propagateChangeConfirmed(observable){if(observable.lowestObserverState===IDerivationState.STALE)return;observable.lowestObserverState=IDerivationState.STALE;var observers=observable.observers;var i=observers.length;while(i--){var d=observers[i];if(d.dependenciesState===IDerivationState.POSSIBLY_STALE)d.dependenciesState=IDerivationState.STALE;else if(d.dependenciesState===IDerivationState.UP_TO_DATE)observable.lowestObserverState=IDerivationState.UP_TO_DATE}}function propagateMaybeChanged(observable){if(observable.lowestObserverState!==IDerivationState.UP_TO_DATE)return;observable.lowestObserverState=IDerivationState.POSSIBLY_STALE;var observers=observable.observers;var i=observers.length;while(i--){var d=observers[i];if(d.dependenciesState===IDerivationState.UP_TO_DATE){d.dependenciesState=IDerivationState.POSSIBLY_STALE;if(d.isTracing!==TraceMode.NONE){logTraceInfo(d,observable)}d.onBecomeStale()}}}function logTraceInfo(derivation,observable){console.log("[mobx.trace] '"+derivation.name+"' is invalidated due to a change in: '"+observable.name+"'");if(derivation.isTracing===TraceMode.BREAK){var lines=[];printDepTree(getDependencyTree(derivation),lines,1);new Function("debugger;\n/*\nTracing '"+derivation.name+"'\n\nYou are entering this break point because derivation '"+derivation.name+"' is being traced and '"+observable.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(derivation instanceof ComputedValue?derivation.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+lines.join("\n")+"\n*/\n    ")()}}function printDepTree(tree,lines,depth){if(lines.length>=1e3){lines.push("(and many more)");return}lines.push(""+new Array(depth).join("\t")+tree.name);if(tree.dependencies)tree.dependencies.forEach(function(child){return printDepTree(child,lines,depth+1)})}var IDerivationState;(function(IDerivationState){IDerivationState[IDerivationState["NOT_TRACKING"]=-1]="NOT_TRACKING";IDerivationState[IDerivationState["UP_TO_DATE"]=0]="UP_TO_DATE";IDerivationState[IDerivationState["POSSIBLY_STALE"]=1]="POSSIBLY_STALE";IDerivationState[IDerivationState["STALE"]=2]="STALE"})(IDerivationState||(IDerivationState={}));var TraceMode;(function(TraceMode){TraceMode[TraceMode["NONE"]=0]="NONE";TraceMode[TraceMode["LOG"]=1]="LOG";TraceMode[TraceMode["BREAK"]=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function(){function CaughtException(cause){this.cause=cause}return CaughtException}();function isCaughtException(e){return e instanceof CaughtException}function shouldCompute(derivation){switch(derivation.dependenciesState){case IDerivationState.UP_TO_DATE:return false;case IDerivationState.NOT_TRACKING:case IDerivationState.STALE:return true;case IDerivationState.POSSIBLY_STALE:{var prevUntracked=untrackedStart();var obs=derivation.observing,l=obs.length;for(var i=0;i<l;i++){var obj=obs[i];if(isComputedValue(obj)){if(globalState.disableErrorBoundaries){obj.get()}else{try{obj.get()}catch(e){untrackedEnd(prevUntracked);return true}}if(derivation.dependenciesState===IDerivationState.STALE){untrackedEnd(prevUntracked);return true}}}changeDependenciesStateTo0(derivation);untrackedEnd(prevUntracked);return false}}}function isComputingDerivation(){return globalState.trackingDerivation!==null}function checkIfStateModificationsAreAllowed(atom){var hasObservers$$1=atom.observers.length>0;if(globalState.computationDepth>0&&hasObservers$$1)fail$1("production"!=="production"&&"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: "+atom.name);if(!globalState.allowStateChanges&&hasObservers$$1)fail$1("production"!=="production"&&(globalState.enforceActions?"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ")+atom.name)}function trackDerivedFunction(derivation,f,context){changeDependenciesStateTo0(derivation);derivation.newObserving=new Array(derivation.observing.length+100);derivation.unboundDepsCount=0;derivation.runId=++globalState.runId;var prevTracking=globalState.trackingDerivation;globalState.trackingDerivation=derivation;var result;if(globalState.disableErrorBoundaries===true){result=f.call(context)}else{try{result=f.call(context)}catch(e){result=new CaughtException(e)}}globalState.trackingDerivation=prevTracking;bindDependencies(derivation);return result}function bindDependencies(derivation){var prevObserving=derivation.observing;var observing=derivation.observing=derivation.newObserving;var lowestNewObservingDerivationState=IDerivationState.UP_TO_DATE;var i0=0,l=derivation.unboundDepsCount;for(var i=0;i<l;i++){var dep=observing[i];if(dep.diffValue===0){dep.diffValue=1;if(i0!==i)observing[i0]=dep;i0++}if(dep.dependenciesState>lowestNewObservingDerivationState){lowestNewObservingDerivationState=dep.dependenciesState}}observing.length=i0;derivation.newObserving=null;l=prevObserving.length;while(l--){var dep=prevObserving[l];if(dep.diffValue===0){removeObserver(dep,derivation)}dep.diffValue=0}while(i0--){var dep=observing[i0];if(dep.diffValue===1){dep.diffValue=0;addObserver(dep,derivation)}}if(lowestNewObservingDerivationState!==IDerivationState.UP_TO_DATE){derivation.dependenciesState=lowestNewObservingDerivationState;derivation.onBecomeStale()}}function clearObserving(derivation){var obs=derivation.observing;derivation.observing=[];var i=obs.length;while(i--)removeObserver(obs[i],derivation);derivation.dependenciesState=IDerivationState.NOT_TRACKING}function untracked(action){var prev=untrackedStart();var res=action();untrackedEnd(prev);return res}function untrackedStart(){var prev=globalState.trackingDerivation;globalState.trackingDerivation=null;return prev}function untrackedEnd(prev){globalState.trackingDerivation=prev}function changeDependenciesStateTo0(derivation){if(derivation.dependenciesState===IDerivationState.UP_TO_DATE)return;derivation.dependenciesState=IDerivationState.UP_TO_DATE;var obs=derivation.observing;var i=obs.length;while(i--)obs[i].lowestObserverState=IDerivationState.UP_TO_DATE}function trace(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var enterBreakPoint=false;if(typeof args[args.length-1]==="boolean")enterBreakPoint=args.pop();var derivation=getAtomFromArgs(args);if(!derivation){return fail$1("production"!=="production"&&"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly")}if(derivation.isTracing===TraceMode.NONE){console.log("[mobx.trace] '"+derivation.name+"' tracing enabled")}derivation.isTracing=enterBreakPoint?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(args){switch(args.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(args[0]);case 2:return getAtom(args[0],args[1])}}var Reaction=function(){function Reaction(name,onInvalidate,errorHandler){if(name===void 0){name="Reaction@"+getNextId()}this.name=name;this.onInvalidate=onInvalidate;this.errorHandler=errorHandler;this.observing=[];this.newObserving=[];this.dependenciesState=IDerivationState.NOT_TRACKING;this.diffValue=0;this.runId=0;this.unboundDepsCount=0;this.__mapid="#"+getNextId();this.isDisposed=false;this._isScheduled=false;this._isTrackPending=false;this._isRunning=false;this.isTracing=TraceMode.NONE}Reaction.prototype.onBecomeStale=function(){this.schedule()};Reaction.prototype.schedule=function(){if(!this._isScheduled){this._isScheduled=true;globalState.pendingReactions.push(this);runReactions()}};Reaction.prototype.isScheduled=function(){return this._isScheduled};Reaction.prototype.runReaction=function(){if(!this.isDisposed){startBatch();this._isScheduled=false;if(shouldCompute(this)){this._isTrackPending=true;this.onInvalidate();if(this._isTrackPending&&isSpyEnabled()){spyReport({name:this.name,type:"scheduled-reaction"})}}endBatch()}};Reaction.prototype.track=function(fn){startBatch();var notify=isSpyEnabled();var startTime;if(notify){startTime=Date.now();spyReportStart({name:this.name,type:"reaction"})}this._isRunning=true;var result=trackDerivedFunction(this,fn,undefined);this._isRunning=false;this._isTrackPending=false;if(this.isDisposed){clearObserving(this)}if(isCaughtException(result))this.reportExceptionInDerivation(result.cause);if(notify){spyReportEnd({time:Date.now()-startTime})}endBatch()};Reaction.prototype.reportExceptionInDerivation=function(error){var _this=this;if(this.errorHandler){this.errorHandler(error,this);return}var message="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(message,error);if(isSpyEnabled()){spyReport({type:"error",name:this.name,message:message,error:""+error})}globalState.globalReactionErrorHandlers.forEach(function(f){return f(error,_this)})};Reaction.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=true;if(!this._isRunning){startBatch();clearObserving(this);endBatch()}}};Reaction.prototype.getDisposer=function(){var r=this.dispose.bind(this);r.$mobx=this;return r};Reaction.prototype.toString=function(){return"Reaction["+this.name+"]"};Reaction.prototype.trace=function(enterBreakPoint){if(enterBreakPoint===void 0){enterBreakPoint=false}trace(this,enterBreakPoint)};return Reaction}();function onReactionError(handler){globalState.globalReactionErrorHandlers.push(handler);return function(){var idx=globalState.globalReactionErrorHandlers.indexOf(handler);if(idx>=0)globalState.globalReactionErrorHandlers.splice(idx,1)}}var MAX_REACTION_ITERATIONS=100;var reactionScheduler=function(f){return f()};function runReactions(){if(globalState.inBatch>0||globalState.isRunningReactions)return;reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=true;var allReactions=globalState.pendingReactions;var iterations=0;while(allReactions.length>0){if(++iterations===MAX_REACTION_ITERATIONS){console.error("Reaction doesn't converge to a stable state after "+MAX_REACTION_ITERATIONS+" iterations."+(" Probably there is a cycle in the reactive function: "+allReactions[0]));allReactions.splice(0)}var remainingReactions=allReactions.splice(0);for(var i=0,l=remainingReactions.length;i<l;i++)remainingReactions[i].runReaction()}globalState.isRunningReactions=false}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(fn){var baseScheduler=reactionScheduler;reactionScheduler=function(f){return fn(function(){return baseScheduler(f)})}}function observe(thing,propOrCb,cbOrFire,fireImmediately){if(typeof cbOrFire==="function")return observeObservableProperty(thing,propOrCb,cbOrFire,fireImmediately);else return observeObservable(thing,propOrCb,cbOrFire)}function observeObservable(thing,listener,fireImmediately){return getAdministration(thing).observe(listener,fireImmediately)}function observeObservableProperty(thing,property,listener,fireImmediately){return getAdministration(thing,property).observe(listener,fireImmediately)}function intercept(thing,propOrHandler,handler){if(typeof handler==="function")return interceptProperty(thing,propOrHandler,handler);else return interceptInterceptable(thing,propOrHandler)}function interceptInterceptable(thing,handler){return getAdministration(thing).intercept(handler)}function interceptProperty(thing,property,handler){return getAdministration(thing,property).intercept(handler)}function when(predicate,arg1,arg2){if(arguments.length===1||arg1&&typeof arg1==="object")return whenPromise(predicate,arg1);return _when(predicate,arg1,arg2||{})}function _when(predicate,effect,opts){var timeoutHandle;if(typeof opts.timeout==="number"){timeoutHandle=setTimeout(function(){if(!disposer.$mobx.isDisposed){disposer();var error=new Error("WHEN_TIMEOUT");if(opts.onError)opts.onError(error);else throw error}},opts.timeout)}opts.name=opts.name||"When@"+getNextId();var effectAction=createAction(opts.name+"-effect",effect);var disposer=autorun(function(r){if(predicate()){r.dispose();if(timeoutHandle)clearTimeout(timeoutHandle);effectAction()}},opts);return disposer}function whenPromise(predicate,opts){if(false){}var cancel;var res=new Promise(function(resolve,reject){var disposer=_when(predicate,resolve,__assign({},opts,{onError:reject}));cancel=function(){disposer();reject("WHEN_CANCELLED")}});res.cancel=cancel;return res}function keys(obj){if(isObservableObject(obj)){return obj.$mobx.getKeys()}if(isObservableMap(obj)){return obj._keys.slice()}return fail$1("production"!=="production"&&"'keys()' can only be used on observable objects and maps")}function values(obj){if(isObservableObject(obj)){return keys(obj).map(function(key){return obj[key]})}if(isObservableMap(obj)){return keys(obj).map(function(key){return obj.get(key)})}if(isObservableArray(obj)){return obj.slice()}return fail$1("production"!=="production"&&"'values()' can only be used on observable objects, arrays and maps")}function set(obj,key,value){if(arguments.length===2){startBatch();var values_1=key;try{for(var key_1 in values_1)set(obj,key_1,values_1[key_1])}finally{endBatch()}return}if(isObservableObject(obj)){var adm=obj.$mobx;var existingObservable=adm.values[key];if(existingObservable){existingObservable.set(value)}else{defineObservableProperty(obj,key,value,adm.defaultEnhancer)}}else if(isObservableMap(obj)){obj.set(key,value)}else if(isObservableArray(obj)){if(typeof key!=="number")key=parseInt(key,10);invariant(key>=0,"Not a valid index: '"+key+"'");startBatch();if(key>=obj.length)obj.length=key+1;obj[key]=value;endBatch()}else{return fail$1("production"!=="production"&&"'set()' can only be used on observable objects, arrays and maps")}}function remove(obj,key){if(isObservableObject(obj)){obj.$mobx.remove(key)}else if(isObservableMap(obj)){obj.delete(key)}else if(isObservableArray(obj)){if(typeof key!=="number")key=parseInt(key,10);invariant(key>=0,"Not a valid index: '"+key+"'");obj.splice(key,1)}else{return fail$1("production"!=="production"&&"'remove()' can only be used on observable objects, arrays and maps")}}function has$1(obj,key){if(isObservableObject(obj)){var adm=getAdministration(obj);adm.getKeys();return adm.values[key]instanceof ObservableValue}else if(isObservableMap(obj)){return obj.has(key)}else if(isObservableArray(obj)){return key>=0&&key<obj.length}else{return fail$1("production"!=="production"&&"'has()' can only be used on observable objects, arrays and maps")}}function get(obj,key){if(!has$1(obj,key))return undefined;if(isObservableObject(obj)){return obj[key]}else if(isObservableMap(obj)){return obj.get(key)}else if(isObservableArray(obj)){return obj[key]}else{return fail$1("production"!=="production"&&"'get()' can only be used on observable objects, arrays and maps")}}function decorate(thing,decorators){"production"!=="production"&&invariant(isPlainObject(decorators),"Decorators should be a key value map");var target=typeof thing==="function"?thing.prototype:thing;for(var prop in decorators){var decorator=decorators[prop];"production"!=="production"&&invariant(typeof decorator==="function","Decorate: expected a decorator function for '"+prop+"'");var descriptor=Object.getOwnPropertyDescriptor(target,prop);var newDescriptor=decorator(target,prop,descriptor);if(newDescriptor)Object.defineProperty(target,prop,newDescriptor)}return thing}function configure(options){if(options.enforceActions!==undefined){globalState.enforceActions=!!options.enforceActions;globalState.allowStateChanges=!options.enforceActions}if(options.computedRequiresReaction!==undefined){globalState.computedRequiresReaction=!!options.computedRequiresReaction}if(options.isolateGlobalState===true){isolateGlobalState()}if(options.disableErrorBoundaries!==undefined){if(options.disableErrorBoundaries===true)console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on.");globalState.disableErrorBoundaries=!!options.disableErrorBoundaries}if(typeof options.arrayBuffer==="number"){reserveArrayBuffer(options.arrayBuffer)}if(options.reactionScheduler){setReactionScheduler(options.reactionScheduler)}}var generatorId=0;function flow(generator){if(arguments.length!==1)fail("production"&&"Flow expects one 1 argument and cannot be used as decorator");var name=generator.name||"<unnamed flow>";return function(){var ctx=this;var args=arguments;var runId=++generatorId;var gen=action(name+" - runid: "+runId+" - init",generator).apply(ctx,args);var rejector;var pendingPromise=undefined;var res=new Promise(function(resolve,reject){var stepId=0;rejector=reject;function onFulfilled(res){pendingPromise=undefined;var ret;try{ret=action(name+" - runid: "+runId+" - yield "+stepId++,gen.next).call(gen,res)}catch(e){return reject(e)}next(ret)}function onRejected(err){pendingPromise=undefined;var ret;try{ret=action(name+" - runid: "+runId+" - yield "+stepId++,gen.throw).call(gen,err)}catch(e){return reject(e)}next(ret)}function next(ret){if(ret&&typeof ret.then==="function"){ret.then(next,reject);return}if(ret.done)return resolve(ret.value);pendingPromise=Promise.resolve(ret.value);return pendingPromise.then(onFulfilled,onRejected)}onFulfilled(undefined)});res.cancel=action(name+" - runid: "+runId+" - cancel",function(){try{if(pendingPromise)cancelPromise(pendingPromise);var res_1=gen.return();var yieldedPromise=Promise.resolve(res_1.value);yieldedPromise.then(noop,noop);cancelPromise(yieldedPromise);rejector(new Error("FLOW_CANCELLED"))}catch(e){rejector(e)}});return res}}function cancelPromise(promise){if(typeof promise.cancel==="function")promise.cancel()}var defaultOptions={detectCycles:true,exportMapsAsObjects:true};function toJS(source,options,__alreadySeen){if(__alreadySeen===void 0){__alreadySeen=[]}if(typeof options==="boolean")options={detectCycles:options};if(!options)options=defaultOptions;var detectCycles=options.detectCycles===true;function cache(value){if(detectCycles)__alreadySeen.push([source,value]);return value}if(isObservable(source)){if(detectCycles&&__alreadySeen===null)__alreadySeen=[];if(detectCycles&&source!==null&&typeof source==="object"){for(var i=0,l=__alreadySeen.length;i<l;i++)if(__alreadySeen[i][0]===source)return __alreadySeen[i][1]}if(isObservableArray(source)){var res=cache([]);var toAdd=source.map(function(value){return toJS(value,options,__alreadySeen)});res.length=toAdd.length;for(var i=0,l=toAdd.length;i<l;i++)res[i]=toAdd[i];return res}if(isObservableObject(source)){var res=cache({});keys(source);for(var key in source){res[key]=toJS(source[key],options,__alreadySeen)}return res}if(isObservableMap(source)){if(options.exportMapsAsObjects===false){var res_1=cache(new Map);source.forEach(function(value,key){res_1.set(key,toJS(value,options,__alreadySeen))});return res_1}else{var res_2=cache({});source.forEach(function(value,key){res_2[key]=toJS(value,options,__alreadySeen)});return res_2}}if(isObservableValue(source))return toJS(source.get(),options,__alreadySeen)}return source}function interceptReads(thing,propOrHandler,handler){var target;if(isObservableMap(thing)||isObservableArray(thing)||isObservableValue(thing)){target=getAdministration(thing)}else if(isObservableObject(thing)){if(typeof propOrHandler!=="string")return fail$1("production"!=="production"&&"InterceptReads can only be used with a specific property, not with an object in general");target=getAdministration(thing,propOrHandler)}else{return fail$1("production"!=="production"&&"Expected observable map, object or array as first array")}if(target.dehancer!==undefined)return fail$1("production"!=="production"&&"An intercept reader was already established");target.dehancer=typeof propOrHandler==="function"?propOrHandler:handler;return function(){target.dehancer=undefined}}try{"production"}catch(e){var g=typeof window!=="undefined"?window:global;if(typeof process==="undefined")g.process={};g.process.env={}}(function(){function testCodeMinification(){}if(testCodeMinification.name!=="testCodeMinification"&&"production"!=="production"){console.warn("[mobx] you are running a minified build, but 'process.env.NODE_ENV' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}})();if(typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="object"){__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:spy,extras:{getDebugName:getDebugName}})}if(false){var warnedAboutDefaultExport_1}}).call(this,__webpack_require__(57),__webpack_require__(56))},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(module,exports){var DiagonalMovement={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};module.exports=DiagonalMovement},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"propTypes",function(){return propTypes});__webpack_require__.d(__webpack_exports__,"PropTypes",function(){return propTypes});__webpack_require__.d(__webpack_exports__,"onError",function(){return onError});__webpack_require__.d(__webpack_exports__,"observer",function(){return observer});__webpack_require__.d(__webpack_exports__,"Observer",function(){return Observer});__webpack_require__.d(__webpack_exports__,"renderReporter",function(){return renderReporter});__webpack_require__.d(__webpack_exports__,"componentByNodeRegistery",function(){return componentByNodeRegistery});__webpack_require__.d(__webpack_exports__,"trackComponents",function(){return trackComponents});__webpack_require__.d(__webpack_exports__,"useStaticRendering",function(){return useStaticRendering});__webpack_require__.d(__webpack_exports__,"Provider",function(){return Provider});__webpack_require__.d(__webpack_exports__,"inject",function(){return inject});var mobx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);var react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);var react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13);var react_dom__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);var unstable_batchedUpdates$1=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var asyncGenerator=function(){function AwaitValue(value){this.value=value}function AsyncGenerator(gen){var front,back;function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};if(back){back=back.next=request}else{front=back=request;resume(key,arg)}})}function resume(key,arg){try{var result=gen[key](arg);var value=result.value;if(value instanceof AwaitValue){Promise.resolve(value.value).then(function(arg){resume("next",arg)},function(arg){resume("throw",arg)})}else{settle(result.done?"return":"normal",result.value)}}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:true});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:false});break}front=front.next;if(front){resume(front.key,front.arg)}else{back=null}}this._invoke=send;if(typeof gen.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}}AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)};AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)};AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)};return{wrap:function(fn){return function(){return new AsyncGenerator(fn.apply(this,arguments))}},await:function(value){return new AwaitValue(value)}}}();var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self};var EventEmitter=function(){function EventEmitter(){classCallCheck(this,EventEmitter);this.listeners=[]}createClass(EventEmitter,[{key:"on",value:function on(cb){var _this=this;this.listeners.push(cb);return function(){var index=_this.listeners.indexOf(cb);if(index!==-1)_this.listeners.splice(index,1)}}},{key:"emit",value:function emit(data){this.listeners.forEach(function(fn){return fn(data)})}}]);return EventEmitter}();"use strict";var REACT_STATICS={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,mixins:true,propTypes:true,type:true};var KNOWN_STATICS={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var defineProperty$1=Object.defineProperty;var getOwnPropertyNames=Object.getOwnPropertyNames;var getOwnPropertySymbols=Object.getOwnPropertySymbols;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var getPrototypeOf=Object.getPrototypeOf;var objectPrototype=getPrototypeOf&&getPrototypeOf(Object);var hoistNonReactStatics=function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if(typeof sourceComponent!=="string"){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);if(inheritedComponent&&inheritedComponent!==objectPrototype){hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}}var keys=getOwnPropertyNames(sourceComponent);if(getOwnPropertySymbols){keys=keys.concat(getOwnPropertySymbols(sourceComponent))}for(var i=0;i<keys.length;++i){var key=keys[i];if(!REACT_STATICS[key]&&!KNOWN_STATICS[key]&&(!blacklist||!blacklist[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty$1(targetComponent,key,descriptor)}catch(e){}}}return targetComponent}return targetComponent};function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>6?_len-6:0),_key=6;_key<_len;_key++){rest[_key-6]=arguments[_key]}return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["untracked"])(function(){componentName=componentName||"<<anonymous>>";propFullName=propFullName||propName;if(props[propName]==null){if(isRequired){var actual=props[propName]===null?"null":"undefined";return new Error("The "+location+" `"+propFullName+"` is marked as required "+"in `"+componentName+"`, but its value is `"+actual+"`.")}return null}else{return validate.apply(undefined,[props,propName,componentName,location,propFullName].concat(rest))}})}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue==="undefined"?"undefined":_typeof(propValue);if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function createObservableTypeCheckerCreator(allowNativeType,mobxType){return createChainableTypeChecker(function(props,propName,componentName,location,propFullName){return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["untracked"])(function(){if(allowNativeType){if(getPropType(props[propName])===mobxType.toLowerCase())return null}var mobxChecker=void 0;switch(mobxType){case"Array":mobxChecker=mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableArray"];break;case"Object":mobxChecker=mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableObject"];break;case"Map":mobxChecker=mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableMap"];break;default:throw new Error("Unexpected mobxType: "+mobxType)}var propValue=props[propName];if(!mobxChecker(propValue)){var preciseType=getPreciseType(propValue);var nativeTypeExpectationMessage=allowNativeType?" or javascript `"+mobxType.toLowerCase()+"`":"";return new Error("Invalid prop `"+propFullName+"` of type `"+preciseType+"` supplied to"+" `"+componentName+"`, expected `mobx.Observable"+mobxType+"`"+nativeTypeExpectationMessage+".")}return null})})}function createObservableArrayOfTypeChecker(allowNativeType,typeChecker){return createChainableTypeChecker(function(props,propName,componentName,location,propFullName){for(var _len2=arguments.length,rest=Array(_len2>5?_len2-5:0),_key2=5;_key2<_len2;_key2++){rest[_key2-5]=arguments[_key2]}return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["untracked"])(function(){if(typeof typeChecker!=="function"){return new Error("Property `"+propFullName+"` of component `"+componentName+"` has "+"invalid PropType notation.")}var error=createObservableTypeCheckerCreator(allowNativeType,"Array")(props,propName,componentName);if(error instanceof Error)return error;var propValue=props[propName];for(var i=0;i<propValue.length;i++){error=typeChecker.apply(undefined,[propValue,i,componentName,location,propFullName+"["+i+"]"].concat(rest));if(error instanceof Error)return error}return null})})}var observableArray=createObservableTypeCheckerCreator(false,"Array");var observableArrayOf=createObservableArrayOfTypeChecker.bind(null,false);var observableMap=createObservableTypeCheckerCreator(false,"Map");var observableObject=createObservableTypeCheckerCreator(false,"Object");var arrayOrObservableArray=createObservableTypeCheckerCreator(true,"Array");var arrayOrObservableArrayOf=createObservableArrayOfTypeChecker.bind(null,true);var objectOrObservableObject=createObservableTypeCheckerCreator(true,"Object");var propTypes=Object.freeze({observableArray:observableArray,observableArrayOf:observableArrayOf,observableMap:observableMap,observableObject:observableObject,arrayOrObservableArray:arrayOrObservableArray,arrayOrObservableArrayOf:arrayOrObservableArrayOf,objectOrObservableObject:objectOrObservableObject});function isStateless(component){return!(component.prototype&&component.prototype.render)}var injectorContextTypes={mobxStores:objectOrObservableObject};Object.seal(injectorContextTypes);var proxiedInjectorProps={contextTypes:{get:function get$$1(){return injectorContextTypes},set:function set$$1(_){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:true,enumerable:false},isMobxInjector:{value:true,writable:true,configurable:true,enumerable:true}};function createStoreInjector(grabStoresFn,component,injectNames){var _class,_temp2;var displayName="inject-"+(component.displayName||component.name||component.constructor&&component.constructor.name||"Unknown");if(injectNames)displayName+="-with-"+injectNames;var Injector=(_temp2=_class=function(_Component){inherits(Injector,_Component);function Injector(){var _ref;var _temp,_this,_ret;classCallCheck(this,Injector);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=possibleConstructorReturn(this,(_ref=Injector.__proto__||Object.getPrototypeOf(Injector)).call.apply(_ref,[this].concat(args))),_this),_this.storeRef=function(instance){_this.wrappedInstance=instance},_temp),possibleConstructorReturn(_this,_ret)}createClass(Injector,[{key:"render",value:function render(){var newProps={};for(var key in this.props){if(this.props.hasOwnProperty(key)){newProps[key]=this.props[key]}}var additionalProps=grabStoresFn(this.context.mobxStores||{},newProps,this.context)||{};for(var _key2 in additionalProps){newProps[_key2]=additionalProps[_key2]}if(!isStateless(component)){newProps.ref=this.storeRef}return Object(react__WEBPACK_IMPORTED_MODULE_1__["createElement"])(component,newProps)}}]);return Injector}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),_class.displayName=displayName,_temp2);hoistNonReactStatics(Injector,component);Injector.wrappedComponent=component;Object.defineProperties(Injector,proxiedInjectorProps);return Injector}function grabStoresByName(storeNames){return function(baseStores,nextProps){storeNames.forEach(function(storeName){if(storeName in nextProps)return;if(!(storeName in baseStores))throw new Error("MobX injector: Store '"+storeName+"' is not available! Make sure it is provided by some Provider");nextProps[storeName]=baseStores[storeName]});return nextProps}}function inject(){var grabStoresFn=void 0;if(typeof arguments[0]==="function"){grabStoresFn=arguments[0];return function(componentClass){var injected=createStoreInjector(grabStoresFn,componentClass);injected.isMobxInjector=false;injected=observer(injected);injected.isMobxInjector=true;return injected}}else{var storeNames=[];for(var i=0;i<arguments.length;i++){storeNames[i]=arguments[i]}grabStoresFn=grabStoresByName(storeNames);return function(componentClass){return createStoreInjector(grabStoresFn,componentClass,storeNames.join("-"))}}}var isDevtoolsEnabled=false;var isUsingStaticRendering=false;var warnedAboutObserverInjectDeprecation=false;var componentByNodeRegistery=typeof WeakMap!=="undefined"?new WeakMap:undefined;var renderReporter=new EventEmitter;function findDOMNode$2(component){if(react_dom__WEBPACK_IMPORTED_MODULE_2__["findDOMNode"]){try{return Object(react_dom__WEBPACK_IMPORTED_MODULE_2__["findDOMNode"])(component)}catch(e){return null}}return null}function reportRendering(component){var node=findDOMNode$2(component);if(node&&componentByNodeRegistery)componentByNodeRegistery.set(node,component);renderReporter.emit({event:"render",renderTime:component.__$mobRenderEnd-component.__$mobRenderStart,totalTime:Date.now()-component.__$mobRenderStart,component:component,node:node})}function trackComponents(){if(typeof WeakMap==="undefined")throw new Error("[mobx-react] tracking components is not supported in this browser.");if(!isDevtoolsEnabled)isDevtoolsEnabled=true}function useStaticRendering(useStaticRendering){isUsingStaticRendering=useStaticRendering}var errorsReporter=new EventEmitter;function patch(target,funcName){var runMixinFirst=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var base=target[funcName];var mixinFunc=reactiveMixin[funcName];var f=!base?mixinFunc:runMixinFirst===true?function(){mixinFunc.apply(this,arguments);base.apply(this,arguments)}:function(){base.apply(this,arguments);mixinFunc.apply(this,arguments)};target[funcName]=f}function shallowEqual(objA,objB){if(is(objA,objB))return true;if((typeof objA==="undefined"?"undefined":_typeof(objA))!=="object"||objA===null||(typeof objB==="undefined"?"undefined":_typeof(objB))!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;for(var i=0;i<keysA.length;i++){if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]])){return false}}return true}function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}var reactiveMixin={componentWillMount:function componentWillMount(){var _this=this;if(isUsingStaticRendering===true)return;var initialName=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>";var rootNodeID=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalFiber&&this._reactInternalFiber._debugID;var skipRender=false;var isForcingUpdate=false;function makePropertyObservableReference(propName){var valueHolder=this[propName];var atom=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["createAtom"])("reactive "+propName);Object.defineProperty(this,propName,{configurable:true,enumerable:true,get:function get$$1(){atom.reportObserved();return valueHolder},set:function set$$1(v){if(!isForcingUpdate&&!shallowEqual(valueHolder,v)){valueHolder=v;skipRender=true;atom.reportChanged();skipRender=false}else{valueHolder=v}}})}makePropertyObservableReference.call(this,"props");makePropertyObservableReference.call(this,"state");var baseRender=this.render.bind(this);var reaction=null;var isRenderingPending=false;var initialRender=function initialRender(){reaction=new mobx__WEBPACK_IMPORTED_MODULE_0__["Reaction"](initialName+"#"+rootNodeID+".render()",function(){if(!isRenderingPending){isRenderingPending=true;if(typeof _this.componentWillReact==="function")_this.componentWillReact();if(_this.__$mobxIsUnmounted!==true){var hasError=true;try{isForcingUpdate=true;if(!skipRender)react__WEBPACK_IMPORTED_MODULE_1__["Component"].prototype.forceUpdate.call(_this);hasError=false}finally{isForcingUpdate=false;if(hasError)reaction.dispose()}}}});reaction.reactComponent=_this;reactiveRender.$mobx=reaction;_this.render=reactiveRender;return reactiveRender()};var reactiveRender=function reactiveRender(){isRenderingPending=false;var exception=undefined;var rendering=undefined;reaction.track(function(){if(isDevtoolsEnabled){_this.__$mobRenderStart=Date.now()}try{rendering=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["_allowStateChanges"])(false,baseRender)}catch(e){exception=e}if(isDevtoolsEnabled){_this.__$mobRenderEnd=Date.now()}});if(exception){errorsReporter.emit(exception);throw exception}return rendering};this.render=initialRender},componentWillUnmount:function componentWillUnmount(){if(isUsingStaticRendering===true)return;this.render.$mobx&&this.render.$mobx.dispose();this.__$mobxIsUnmounted=true;if(isDevtoolsEnabled){var node=findDOMNode$2(this);if(node&&componentByNodeRegistery){componentByNodeRegistery.delete(node)}renderReporter.emit({event:"destroy",component:this,node:node})}},componentDidMount:function componentDidMount(){if(isDevtoolsEnabled){reportRendering(this)}},componentDidUpdate:function componentDidUpdate(){if(isDevtoolsEnabled){reportRendering(this)}},shouldComponentUpdate:function shouldComponentUpdate(nextProps,nextState){if(isUsingStaticRendering){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==nextState){return true}return!shallowEqual(this.props,nextProps)}};function observer(arg1,arg2){if(typeof arg1==="string"){throw new Error("Store names should be provided as array")}if(Array.isArray(arg1)){if(!warnedAboutObserverInjectDeprecation){warnedAboutObserverInjectDeprecation=true;console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')}if(!arg2){return function(componentClass){return observer(arg1,componentClass)}}else{return inject.apply(null,arg1)(observer(arg2))}}var componentClass=arg1;if(componentClass.isMobxInjector===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(typeof componentClass==="function"&&(!componentClass.prototype||!componentClass.prototype.render)&&!componentClass.isReactClass&&!react__WEBPACK_IMPORTED_MODULE_1__["Component"].isPrototypeOf(componentClass)){var _class,_temp;return observer((_temp=_class=function(_Component){inherits(_class,_Component);function _class(){classCallCheck(this,_class);return possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}createClass(_class,[{key:"render",value:function render(){return componentClass.call(this,this.props,this.context)}}]);return _class}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),_class.displayName=componentClass.displayName||componentClass.name,_class.contextTypes=componentClass.contextTypes,_class.propTypes=componentClass.propTypes,_class.defaultProps=componentClass.defaultProps,_temp))}if(!componentClass){throw new Error("Please pass a valid component to 'observer'")}var target=componentClass.prototype||componentClass;mixinLifecycleEvents(target);componentClass.isMobXReactObserver=true;return componentClass}function mixinLifecycleEvents(target){patch(target,"componentWillMount",true);["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(funcName){patch(target,funcName)});if(!target.shouldComponentUpdate){target.shouldComponentUpdate=reactiveMixin.shouldComponentUpdate}}var Observer=observer(function(_ref){var children=_ref.children,observerInject=_ref.inject,render=_ref.render;var component=children||render;if(typeof component==="undefined"){return null}if(!observerInject){return component()}var InjectComponent=inject(observerInject)(component);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(InjectComponent,null)});Observer.displayName="Observer";var ObserverPropsCheck=function ObserverPropsCheck(props,key,componentName,location,propFullName){var extraKey=key==="children"?"render":"children";if(typeof props[key]==="function"&&typeof props[extraKey]==="function"){return new Error("Invalid prop,do not use children and render in the same time in`"+componentName)}if(typeof props[key]==="function"||typeof props[extraKey]==="function"){return}return new Error("Invalid prop `"+propFullName+"` of type `"+_typeof(props[key])+"` supplied to"+" `"+componentName+"`, expected `function`.")};Observer.propTypes={render:ObserverPropsCheck,children:ObserverPropsCheck};var _class;var _temp;var specialReactKeys={children:true,key:true,ref:true};var Provider=(_temp=_class=function(_Component){inherits(Provider,_Component);function Provider(){classCallCheck(this,Provider);return possibleConstructorReturn(this,(Provider.__proto__||Object.getPrototypeOf(Provider)).apply(this,arguments))}createClass(Provider,[{key:"render",value:function render(){return react__WEBPACK_IMPORTED_MODULE_1__["Children"].only(this.props.children)}},{key:"getChildContext",value:function getChildContext(){var stores={};var baseStores=this.context.mobxStores;if(baseStores)for(var key in baseStores){stores[key]=baseStores[key]}for(var _key in this.props){if(!specialReactKeys[_key]&&_key!=="suppressChangedStoreWarning")stores[_key]=this.props[_key]}return{mobxStores:stores}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(Object.keys(nextProps).length!==Object.keys(this.props).length)console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");if(!nextProps.suppressChangedStoreWarning)for(var key in nextProps){if(!specialReactKeys[key]&&this.props[key]!==nextProps[key])console.warn("MobX Provider: Provided store '"+key+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}}]);return Provider}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),_class.contextTypes={mobxStores:objectOrObservableObject},_class.childContextTypes={mobxStores:objectOrObservableObject.isRequired},_temp);if(!react__WEBPACK_IMPORTED_MODULE_1__["Component"])throw new Error("mobx-react requires React to be available");if(!mobx__WEBPACK_IMPORTED_MODULE_0__["spy"])throw new Error("mobx-react requires mobx to be available");if(typeof react_dom__WEBPACK_IMPORTED_MODULE_2__["unstable_batchedUpdates"]==="function")Object(mobx__WEBPACK_IMPORTED_MODULE_0__["configure"])({reactionScheduler:react_dom__WEBPACK_IMPORTED_MODULE_2__["unstable_batchedUpdates"]});else if(typeof unstable_batchedUpdates$1==="function")Object(mobx__WEBPACK_IMPORTED_MODULE_0__["configure"])({reactionScheduler:unstable_batchedUpdates$1});var onError=function onError(fn){return errorsReporter.on(fn)};if((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="undefined"?"undefined":_typeof(__MOBX_DEVTOOLS_GLOBAL_HOOK__))==="object"){var mobx$1={spy:mobx__WEBPACK_IMPORTED_MODULE_0__["spy"],extras:{getDebugName:mobx__WEBPACK_IMPORTED_MODULE_0__["getDebugName"]}};var mobxReact={renderReporter:renderReporter,componentByNodeRegistery:componentByNodeRegistery,trackComponents:trackComponents};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(mobxReact,mobx$1)}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)){classes.push(classNames.apply(null,arg))}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(typeof module!=="undefined"&&module.exports){module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var mobx_1=__webpack_require__(0);var Toolkit_1=__webpack_require__(9);var BaseModel=function(){function BaseModel(type,id){if(type===void 0){type="srd-base"}if(id===void 0){id=Toolkit_1.Toolkit.UID()}this._locked=false;this._selected=false;this._parent=null;this._type=type;this._id=id}Object.defineProperty(BaseModel.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value},enumerable:true,configurable:true});Object.defineProperty(BaseModel.prototype,"locked",{get:function(){if(this._parent){if(this._parent._locked){return true}}return this._locked},set:function(value){this._locked=value},enumerable:true,configurable:true});Object.defineProperty(BaseModel.prototype,"parent",{get:function(){return this._parent},set:function(p){this._parent=p},enumerable:true,configurable:true});Object.defineProperty(BaseModel.prototype,"selectedEntities",{get:function(){if(this.selected){return[this]}return[]},enumerable:true,configurable:true});BaseModel.prototype.fromJSON=function(ob,_engine){this._id=ob.id;this._locked=ob.locked;this._type=ob.type;this._selected=ob.selected};BaseModel.prototype.toJSON=function(){return{id:this._id,locked:this._locked,type:this._type,selected:this._selected,parent:this._parent?this._parent.id:null}};Object.defineProperty(BaseModel.prototype,"type",{get:function(){return this._type},enumerable:true,configurable:true});Object.defineProperty(BaseModel.prototype,"selected",{get:function(){return this._selected},set:function(selected){this._selected=selected},enumerable:true,configurable:true});__decorate([mobx_1.observable],BaseModel.prototype,"_id",void 0);__decorate([mobx_1.observable],BaseModel.prototype,"_type",void 0);__decorate([mobx_1.observable],BaseModel.prototype,"_locked",void 0);__decorate([mobx_1.observable],BaseModel.prototype,"_selected",void 0);__decorate([mobx_1.observable],BaseModel.prototype,"_parent",void 0);__decorate([mobx_1.computed],BaseModel.prototype,"id",null);__decorate([mobx_1.computed],BaseModel.prototype,"locked",null);__decorate([mobx_1.computed],BaseModel.prototype,"parent",null);__decorate([mobx_1.computed],BaseModel.prototype,"selectedEntities",null);__decorate([mobx_1.action],BaseModel.prototype,"fromJSON",null);__decorate([mobx_1.computed],BaseModel.prototype,"selected",null);return BaseModel}();exports.BaseModel=BaseModel},function(module,exports){function backtrace(node){var path=[[node.x,node.y]];while(node.parent){node=node.parent;path.push([node.x,node.y])}return path.reverse()}exports.backtrace=backtrace;function biBacktrace(nodeA,nodeB){var pathA=backtrace(nodeA),pathB=backtrace(nodeB);return pathA.concat(pathB.reverse())}exports.biBacktrace=biBacktrace;function pathLength(path){var i,sum=0,a,b,dx,dy;for(i=1;i<path.length;++i){a=path[i-1];b=path[i];dx=a[0]-b[0];dy=a[1]-b[1];sum+=Math.sqrt(dx*dx+dy*dy)}return sum}exports.pathLength=pathLength;function interpolate(x0,y0,x1,y1){var abs=Math.abs,line=[],sx,sy,dx,dy,err,e2;dx=abs(x1-x0);dy=abs(y1-y0);sx=x0<x1?1:-1;sy=y0<y1?1:-1;err=dx-dy;while(true){line.push([x0,y0]);if(x0===x1&&y0===y1){break}e2=2*err;if(e2>-dy){err=err-dy;x0=x0+sx}if(e2<dx){err=err+dx;y0=y0+sy}}return line}exports.interpolate=interpolate;function expandPath(path){var expanded=[],len=path.length,coord0,coord1,interpolated,interpolatedLen,i,j;if(len<2){return expanded}for(i=0;i<len-1;++i){coord0=path[i];coord1=path[i+1];interpolated=interpolate(coord0[0],coord0[1],coord1[0],coord1[1]);interpolatedLen=interpolated.length;for(j=0;j<interpolatedLen-1;++j){expanded.push(interpolated[j])}}expanded.push(path[len-1]);return expanded}exports.expandPath=expandPath;function smoothenPath(grid,path){var len=path.length,x0=path[0][0],y0=path[0][1],x1=path[len-1][0],y1=path[len-1][1],sx,sy,ex,ey,newPath,i,j,coord,line,testCoord,blocked;sx=x0;sy=y0;newPath=[[sx,sy]];for(i=2;i<len;++i){coord=path[i];ex=coord[0];ey=coord[1];line=interpolate(sx,sy,ex,ey);blocked=false;for(j=1;j<line.length;++j){testCoord=line[j];if(!grid.isWalkableAt(testCoord[0],testCoord[1])){blocked=true;break}}if(blocked){lastValidCoord=path[i-1];newPath.push(lastValidCoord);sx=lastValidCoord[0];sy=lastValidCoord[1]}}newPath.push([x1,y1]);return newPath}exports.smoothenPath=smoothenPath;function compressPath(path){if(path.length<3){return path}var compressed=[],sx=path[0][0],sy=path[0][1],px=path[1][0],py=path[1][1],dx=px-sx,dy=py-sy,lx,ly,ldx,ldy,sq,i;sq=Math.sqrt(dx*dx+dy*dy);dx/=sq;dy/=sq;compressed.push([sx,sy]);for(i=2;i<path.length;i++){lx=px;ly=py;ldx=dx;ldy=dy;px=path[i][0];py=path[i][1];dx=px-lx;dy=py-ly;sq=Math.sqrt(dx*dx+dy*dy);dx/=sq;dy/=sq;if(dx!==ldx||dy!==ldy){compressed.push([lx,ly])}}compressed.push([px,py]);return compressed}exports.compressPath=compressPath},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var AbstractFactory=function(){function AbstractFactory(type){this._type=type}Object.defineProperty(AbstractFactory.prototype,"type",{get:function(){return this._type},enumerable:true,configurable:true});return AbstractFactory}();exports.AbstractFactory=AbstractFactory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var closest_1=__webpack_require__(79);var PathFinding_1=__webpack_require__(18);var SVGPath=__webpack_require__(60);var Toolkit=function(){function Toolkit(){}Toolkit.UID=function(){if(Toolkit.TESTING){Toolkit.TESTING_UID++;return""+Toolkit.TESTING_UID}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0;var v=c==="x"?r:r&3|8;return v.toString(16)})};Toolkit.closest=function(element,selector){if(document.body.closest){return element.closest(selector)}return closest_1.default(element,selector)};Toolkit.generateLinePath=function(firstPoint,lastPoint){return"M"+firstPoint.x+","+firstPoint.y+" L "+lastPoint.x+","+lastPoint.y};Toolkit.generateCurvePath=function(firstPoint,lastPoint,curvy){if(curvy===void 0){curvy=0}var isHorizontal=Math.abs(firstPoint.x-lastPoint.x)>Math.abs(firstPoint.y-lastPoint.y);var curvyX=isHorizontal?curvy:0;var curvyY=isHorizontal?0:curvy;return"M"+firstPoint.x+","+firstPoint.y+" C "+(firstPoint.x+curvyX)+","+(firstPoint.y+curvyY)+"\n    "+(lastPoint.x-curvyX)+","+(lastPoint.y-curvyY)+" "+lastPoint.x+","+lastPoint.y};Toolkit.generateDynamicPath=function(pathCoords){var path=SVGPath();path=path.moveto(pathCoords[0][0]*PathFinding_1.ROUTING_SCALING_FACTOR,pathCoords[0][1]*PathFinding_1.ROUTING_SCALING_FACTOR);pathCoords.slice(1).forEach(function(coords){path=path.lineto(coords[0]*PathFinding_1.ROUTING_SCALING_FACTOR,coords[1]*PathFinding_1.ROUTING_SCALING_FACTOR)});return path.print()};Toolkit.TESTING=false;Toolkit.TESTING_UID=0;return Toolkit}();exports.Toolkit=Toolkit},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var BaseAction=function(){function BaseAction(mouseX,mouseY){this.start=Date.now();this.end=-1;this.mouseX=mouseX;this.mouseY=mouseY}return BaseAction}();exports.BaseAction=BaseAction},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var _=__webpack_require__(4);var mobx_1=__webpack_require__(0);var BaseModel_1=__webpack_require__(6);var NodeModel=function(_super){__extends(NodeModel,_super);function NodeModel(nodeType,id){if(nodeType===void 0){nodeType="srd-node"}var _this=_super.call(this,nodeType,id)||this;_this._x=0;_this._y=0;_this._ports=new Map;_this._width=-1;_this._height=-1;return _this}NodeModel.prototype.setPosition=function(x,y){var oldX=this._x;var oldY=this._y;this._ports.forEach(function(port){port.links.forEach(function(link){var point=link.getPointForPort(port);if(point){point.x=point.x+x-oldX;point.y=point.y+y-oldY}})});this._x=x;this._y=y};Object.defineProperty(NodeModel.prototype,"selectedEntities",{get:function(){var entities=[];if(this.selected){entities.push(this)}return entities.concat(_.flatten(Array.from(this._ports.values()).map(function(port){return port.selectedEntities})))},enumerable:true,configurable:true});NodeModel.prototype.fromJSON=function(ob,engine){var _this=this;_super.prototype.fromJSON.call(this,ob,engine);this._x=ob.x;this._y=ob.y;if(ob.ports){ob.ports.forEach(function(port){var portOb=engine.getPortFactory(port.type).getNewInstance();portOb.fromJSON(port,engine);_this.addPort(portOb)})}};NodeModel.prototype.toJSON=function(){return __assign({},_super.prototype.toJSON.call(this),{x:this._x,y:this._y,ports:Array.from(this._ports.values()).map(function(port){return port.toJSON()})})};NodeModel.prototype.delete=function(){this._ports.forEach(function(port){return port.delete()});if(this.parent){this.parent.removeNode(this)}};NodeModel.prototype.getPortFromID=function(id){return this._ports.get(id)};Object.defineProperty(NodeModel.prototype,"ports",{get:function(){return this._ports},enumerable:true,configurable:true});Object.defineProperty(NodeModel.prototype,"width",{get:function(){return this._width},set:function(width){this._width=width},enumerable:true,configurable:true});Object.defineProperty(NodeModel.prototype,"height",{get:function(){return this._height},set:function(height){this._height=height},enumerable:true,configurable:true});Object.defineProperty(NodeModel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x},enumerable:true,configurable:true});Object.defineProperty(NodeModel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y},enumerable:true,configurable:true});NodeModel.prototype.removePort=function(port){var p=this._ports.get(port.id);if(p){p.parent=null;this._ports.delete(p.id)}};NodeModel.prototype.addPort=function(port){port.parent=this;this._ports.set(port.id,port);return port};NodeModel.prototype.updateDimensions=function(_a){var width=_a.width,height=_a.height;this._width=width;this._height=height};__decorate([mobx_1.observable],NodeModel.prototype,"_x",void 0);__decorate([mobx_1.observable],NodeModel.prototype,"_y",void 0);__decorate([mobx_1.observable],NodeModel.prototype,"_ports",void 0);__decorate([mobx_1.action],NodeModel.prototype,"setPosition",null);__decorate([mobx_1.computed],NodeModel.prototype,"selectedEntities",null);__decorate([mobx_1.action],NodeModel.prototype,"delete",null);__decorate([mobx_1.computed],NodeModel.prototype,"ports",null);__decorate([mobx_1.computed],NodeModel.prototype,"width",null);__decorate([mobx_1.computed],NodeModel.prototype,"height",null);__decorate([mobx_1.computed],NodeModel.prototype,"x",null);__decorate([mobx_1.computed],NodeModel.prototype,"y",null);__decorate([mobx_1.action],NodeModel.prototype,"removePort",null);return NodeModel}(BaseModel_1.BaseModel);exports.NodeModel=NodeModel},function(module,exports){module.exports={manhattan:function(dx,dy){return dx+dy},euclidean:function(dx,dy){return Math.sqrt(dx*dx+dy*dy)},octile:function(dx,dy){var F=Math.SQRT2-1;return dx<dy?F*dx+dy:F*dy+dx},chebyshev:function(dx,dy){return Math.max(dx,dy)}}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__13__},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var mobx_1=__webpack_require__(0);var BaseModel_1=__webpack_require__(6);var PointModel=function(_super){__extends(PointModel,_super);function PointModel(type,x,y){if(type===void 0){type="srd-point"}var _this=_super.call(this,type)||this;_this._x=x;_this._y=y;return _this}PointModel.prototype.isConnectedToPort=function(){if(this.parent){return this.parent.getPortForPoint(this)!==null}return false};PointModel.prototype.fromJSON=function(ob,engine){_super.prototype.fromJSON.call(this,ob,engine);this._x=ob.x;this._y=ob.y};PointModel.prototype.toJSON=function(){return __assign({},_super.prototype.toJSON.call(this),{x:this._x,y:this._y})};PointModel.prototype.delete=function(){if(this.parent){this.parent.removePoint(this)}};PointModel.prototype.setPosition=function(x,y){this._x=x;this._y=y};Object.defineProperty(PointModel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x},enumerable:true,configurable:true});Object.defineProperty(PointModel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y},enumerable:true,configurable:true});__decorate([mobx_1.observable],PointModel.prototype,"_x",void 0);__decorate([mobx_1.observable],PointModel.prototype,"_y",void 0);__decorate([mobx_1.action],PointModel.prototype,"delete",null);__decorate([mobx_1.action],PointModel.prototype,"setPosition",null);__decorate([mobx_1.computed],PointModel.prototype,"x",null);__decorate([mobx_1.computed],PointModel.prototype,"y",null);return PointModel}(BaseModel_1.BaseModel);exports.PointModel=PointModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var _=__webpack_require__(4);var mobx_1=__webpack_require__(0);var mobx_utils_1=__webpack_require__(22);var BaseModel_1=__webpack_require__(6);var LinkModel=function(_super){__extends(LinkModel,_super);function LinkModel(pointFactory,linkType,id){if(linkType===void 0){linkType="srd-link"}var _this=_super.call(this,linkType,id)||this;_this.getPointForPort=mobx_utils_1.createTransformer(function(port){if(_this.sourcePort&&_this.sourcePort.id===port.id){return _this.firstPoint}if(_this.targetPort&&_this.targetPort.id===port.id){return _this.lastPoint}return null});_this.getPortForPoint=mobx_utils_1.createTransformer(function(point){if(_this.sourcePort&&_this.firstPoint.id===point.id){return _this.sourcePort}if(_this.targetPort&&_this.lastPoint.id===point.id){return _this.targetPort}return null});_this.isLastPoint=mobx_utils_1.createTransformer(function(point){return _this.getPointIndex(point)===_this._points.length-1});_this.getPointModel=mobx_utils_1.createTransformer(function(id){return _this._points.find(function(pt){return pt.id===id})});_this.getLabel=mobx_utils_1.createTransformer(function(id){return _this._labels.find(function(l){return l.id===id})});_this.getPointIndex=mobx_utils_1.createTransformer(function(point){return _this._points.findIndex(function(pt){return pt===point})});_this._sourcePort=null;_this._targetPort=null;_this._points=[];_this._labels=[];var firstPoint=pointFactory.getNewInstance({x:0,y:0});firstPoint.parent=_this;var lastPoint=pointFactory.getNewInstance({x:0,y:0});lastPoint.parent=_this;_this._points.push(firstPoint);_this._points.push(lastPoint);return _this}LinkModel.prototype.fromJSON=function(ob,engine){var _this=this;_super.prototype.fromJSON.call(this,ob,engine);if(ob.sourcePort){if(this.parent){var node=this.parent.getNode(ob.sourcePortParent);if(node){var port=node.getPortFromID(ob.sourcePort);if(port){this._sourcePort=port}}}}if(ob.targetPort){if(this.parent){var node=this.parent.getNode(ob.targetPortParent);if(node){var port=node.getPortFromID(ob.targetPort);if(port){this._targetPort=port}}}}var points=ob.points||[];points.forEach(function(point){var p=engine.getLinkFactory(_this.type).getPointFactory().getNewInstance();p.parent=_this;p.fromJSON(point,engine);_this.addPoint(p)});var labels=ob.labels||[];labels.forEach(function(label){var l=engine.getLabelFactory(label.type).getNewInstance();l.parent=_this;l.fromJSON(label,engine);_this.addLabel(l)})};LinkModel.prototype.toJSON=function(){return __assign({},_super.prototype.toJSON.call(this),{sourcePort:this._sourcePort?this._sourcePort.id:null,sourcePortParent:this._sourcePort?this._sourcePort.parent?this._sourcePort.parent.id:null:null,targetPort:this._targetPort?this._targetPort.id:null,targetPortParent:this._targetPort?this._targetPort.parent?this._targetPort.parent.id:null:null,points:this._points.map(function(point){return point.toJSON()}),labels:this._labels.map(function(label){return label.toJSON()})})};LinkModel.prototype.delete=function(){if(this._sourcePort){this._sourcePort.removeLink(this);this._sourcePort=null}if(this._targetPort){this._targetPort.removeLink(this);this._targetPort=null}this._points.clear();this._labels.clear();if(this.parent){this.parent.removeLink(this);this.parent=null}};LinkModel.prototype.connect=function(source,target){this.sourcePort=source;this.targetPort=target};Object.defineProperty(LinkModel.prototype,"firstPoint",{get:function(){return this._points[0]},enumerable:true,configurable:true});Object.defineProperty(LinkModel.prototype,"lastPoint",{get:function(){return this._points[this._points.length-1]},enumerable:true,configurable:true});Object.defineProperty(LinkModel.prototype,"selectedEntities",{get:function(){var entities=[];if(this.selected){entities.push(this)}return entities.concat(_.flatten(this._points.map(function(pt){return pt.selectedEntities})))},enumerable:true,configurable:true});Object.defineProperty(LinkModel.prototype,"labels",{get:function(){return this._labels},enumerable:true,configurable:true});Object.defineProperty(LinkModel.prototype,"sourcePort",{get:function(){return this._sourcePort},set:function(port){this._sourcePort=port;if(port){port.addLink(this)}},enumerable:true,configurable:true});Object.defineProperty(LinkModel.prototype,"targetPort",{get:function(){return this._targetPort},set:function(port){this._targetPort=port;if(port){port.addLink(this)}},enumerable:true,configurable:true});LinkModel.prototype.addLabel=function(label){label.parent=this;this._labels.push(label)};Object.defineProperty(LinkModel.prototype,"points",{get:function(){return this._points},enumerable:true,configurable:true});LinkModel.prototype.removePoint=function(point){this._points.splice(this.getPointIndex(point),1)};LinkModel.prototype.removeLabel=function(label){this._labels.splice(this.labels.findIndex(function(l){return l.id===label.id}),1)};LinkModel.prototype.removePointsBefore=function(point){this._points.splice(0,this.getPointIndex(point))};LinkModel.prototype.removePointsAfter=function(point){this._points.splice(this.getPointIndex(point)+1)};LinkModel.prototype.removeMiddlePoints=function(){if(this._points.length>2){this._points.splice(0,this._points.length-2)}};LinkModel.prototype.addPoint=function(point,index){if(index===void 0){index=1}if(index>0&&index<this._points.length){point.parent=this;this._points.splice(index,0,point);return point}throw new Error("Link's first and last points are not mutable (tried to modified point at index "+index+")")};__decorate([mobx_1.observable],LinkModel.prototype,"_sourcePort",void 0);__decorate([mobx_1.observable],LinkModel.prototype,"_targetPort",void 0);__decorate([mobx_1.observable],LinkModel.prototype,"_points",void 0);__decorate([mobx_1.observable],LinkModel.prototype,"_labels",void 0);__decorate([mobx_1.action],LinkModel.prototype,"delete",null);__decorate([mobx_1.action],LinkModel.prototype,"connect",null);__decorate([mobx_1.computed],LinkModel.prototype,"firstPoint",null);__decorate([mobx_1.computed],LinkModel.prototype,"lastPoint",null);__decorate([mobx_1.computed],LinkModel.prototype,"selectedEntities",null);__decorate([mobx_1.computed],LinkModel.prototype,"labels",null);__decorate([mobx_1.computed],LinkModel.prototype,"sourcePort",null);__decorate([mobx_1.computed],LinkModel.prototype,"targetPort",null);__decorate([mobx_1.action],LinkModel.prototype,"addLabel",null);__decorate([mobx_1.computed],LinkModel.prototype,"points",null);__decorate([mobx_1.action],LinkModel.prototype,"removePoint",null);__decorate([mobx_1.action],LinkModel.prototype,"removeLabel",null);__decorate([mobx_1.action],LinkModel.prototype,"removePointsBefore",null);__decorate([mobx_1.action],LinkModel.prototype,"removePointsAfter",null);__decorate([mobx_1.action],LinkModel.prototype,"removeMiddlePoints",null);__decorate([mobx_1.action],LinkModel.prototype,"addPoint",null);return LinkModel}(BaseModel_1.BaseModel);exports.LinkModel=LinkModel},function(module,exports,__webpack_require__){var Heap=__webpack_require__(17);var Util=__webpack_require__(7);var Heuristic=__webpack_require__(12);var DiagonalMovement=__webpack_require__(2);function JumpPointFinderBase(opt){opt=opt||{};this.heuristic=opt.heuristic||Heuristic.manhattan;this.trackJumpRecursion=opt.trackJumpRecursion||false}JumpPointFinderBase.prototype.findPath=function(startX,startY,endX,endY,grid){var openList=this.openList=new Heap(function(nodeA,nodeB){return nodeA.f-nodeB.f}),startNode=this.startNode=grid.getNodeAt(startX,startY),endNode=this.endNode=grid.getNodeAt(endX,endY),node;this.grid=grid;startNode.g=0;startNode.f=0;openList.push(startNode);startNode.opened=true;while(!openList.empty()){node=openList.pop();node.closed=true;if(node===endNode){return Util.expandPath(Util.backtrace(endNode))}this._identifySuccessors(node)}return[]};JumpPointFinderBase.prototype._identifySuccessors=function(node){var grid=this.grid,heuristic=this.heuristic,openList=this.openList,endX=this.endNode.x,endY=this.endNode.y,neighbors,neighbor,jumpPoint,i,l,x=node.x,y=node.y,jx,jy,dx,dy,d,ng,jumpNode,abs=Math.abs,max=Math.max;neighbors=this._findNeighbors(node);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];jumpPoint=this._jump(neighbor[0],neighbor[1],x,y);if(jumpPoint){jx=jumpPoint[0];jy=jumpPoint[1];jumpNode=grid.getNodeAt(jx,jy);if(jumpNode.closed){continue}d=Heuristic.octile(abs(jx-x),abs(jy-y));ng=node.g+d;if(!jumpNode.opened||ng<jumpNode.g){jumpNode.g=ng;jumpNode.h=jumpNode.h||heuristic(abs(jx-endX),abs(jy-endY));jumpNode.f=jumpNode.g+jumpNode.h;jumpNode.parent=node;if(!jumpNode.opened){openList.push(jumpNode);jumpNode.opened=true}else{openList.updateItem(jumpNode)}}}}};module.exports=JumpPointFinderBase},function(module,exports,__webpack_require__){module.exports=__webpack_require__(75)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var PF=__webpack_require__(77);exports.ROUTING_SCALING_FACTOR=5;var pathFinderInstance=new PF.JumpPointFinder({heuristic:PF.Heuristic.manhattan,diagonalMovement:PF.DiagonalMovement.Never});var PathFinding=function(){function PathFinding(engine){this.instance=pathFinderInstance;this.engine=engine}PathFinding.prototype.calculateDirectPath=function(from,to){if(this.engine.canvasMatrix.length===0){this.engine.calculateCanvasMatrix()}var grid=new PF.Grid(this.engine.canvasMatrix);return pathFinderInstance.findPath(this.engine.translateRoutingX(Math.floor(from.x/exports.ROUTING_SCALING_FACTOR)),this.engine.translateRoutingY(Math.floor(from.y/exports.ROUTING_SCALING_FACTOR)),this.engine.translateRoutingX(Math.floor(to.x/exports.ROUTING_SCALING_FACTOR)),this.engine.translateRoutingY(Math.floor(to.y/exports.ROUTING_SCALING_FACTOR)),grid)};PathFinding.prototype.calculateLinkStartEndCoords=function(matrix,path){var startIndex=path.findIndex(function(points){return matrix[points[1]][points[0]]===0});var endIndex=path.length-1-path.slice().reverse().findIndex(function(point){return matrix[point[1]][point[0]]===0});if(startIndex===-1||endIndex===-1){return}var pathToStart=path.slice(0,startIndex);var pathToEnd=path.slice(endIndex);return{start:{x:path[startIndex][0],y:path[startIndex][1]},end:{x:path[endIndex][0],y:path[endIndex][1]},pathToStart:pathToStart,pathToEnd:pathToEnd}};PathFinding.prototype.calculateDynamicPath=function(routingMatrix,start,end,pathToStart,pathToEnd){var _this=this;var grid=new PF.Grid(routingMatrix);var dynamicPath=pathFinderInstance.findPath(start.x,start.y,end.x,end.y,grid);var pathCoords=pathToStart.concat(dynamicPath,pathToEnd).map(function(coords){return[_this.engine.translateRoutingX(coords[0],true),_this.engine.translateRoutingY(coords[1],true)]});return PF.Util.compressPath(pathCoords)};return PathFinding}();exports.PathFinding=PathFinding},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var _=__webpack_require__(4);var mobx_1=__webpack_require__(0);var BaseModel_1=__webpack_require__(6);var PortModel=function(_super){__extends(PortModel,_super);function PortModel(name,type,maximumLinks){if(type===void 0){type="srd-port"}if(maximumLinks===void 0){maximumLinks=-1}var _this=_super.call(this,type,name)||this;_this._links=new Map;_this._x=-1;_this._y=-1;_this._width=-1;_this._height=-1;_this._maximumLinks=maximumLinks;return _this}Object.defineProperty(PortModel.prototype,"selectedEntities",{get:function(){var entities=[];if(this.selected){entities.push(this)}return entities.concat(_.flatten(Array.from(this._links.values()).map(function(l){return l.selectedEntities})))},enumerable:true,configurable:true});PortModel.prototype.fromJSON=function(ob,engine){_super.prototype.fromJSON.call(this,ob,engine);this._maximumLinks=ob.maximumLinks};PortModel.prototype.toJSON=function(){return __assign({},_super.prototype.toJSON.call(this),{links:Array.from(this._links.keys()),maximumLinks:this._maximumLinks})};PortModel.prototype.canCreateLink=function(){if(this._maximumLinks===-1){return true}return this._links.size<this._maximumLinks};PortModel.prototype.removeLink=function(link){return this._links.delete(link.id)};PortModel.prototype.delete=function(){this._links.forEach(function(link){return link.delete()});this._links.clear();if(this.parent){this.parent.removePort(this);this.parent=null}};PortModel.prototype.addLink=function(link){this._links.set(link.id,link)};PortModel.prototype.setPosition=function(x,y){var _this=this;this._x=x;this._y=y;this._links.forEach(function(link){var point=link.getPointForPort(_this);if(point){point.setPosition(x,y)}})};PortModel.prototype.canLinkToPort=function(_port){return true};Object.defineProperty(PortModel.prototype,"maximumLinks",{get:function(){return this._maximumLinks},enumerable:true,configurable:true});Object.defineProperty(PortModel.prototype,"links",{get:function(){return this._links},enumerable:true,configurable:true});Object.defineProperty(PortModel.prototype,"connected",{get:function(){return this._links.size>0},enumerable:true,configurable:true});Object.defineProperty(PortModel.prototype,"x",{get:function(){return this._x},enumerable:true,configurable:true});Object.defineProperty(PortModel.prototype,"y",{get:function(){return this._y},enumerable:true,configurable:true});Object.defineProperty(PortModel.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(PortModel.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});__decorate([mobx_1.observable],PortModel.prototype,"_maximumLinks",void 0);__decorate([mobx_1.observable],PortModel.prototype,"_links",void 0);__decorate([mobx_1.observable],PortModel.prototype,"_x",void 0);__decorate([mobx_1.observable],PortModel.prototype,"_y",void 0);__decorate([mobx_1.observable],PortModel.prototype,"_width",void 0);__decorate([mobx_1.observable],PortModel.prototype,"_height",void 0);__decorate([mobx_1.computed],PortModel.prototype,"selectedEntities",null);__decorate([mobx_1.action],PortModel.prototype,"removeLink",null);__decorate([mobx_1.action],PortModel.prototype,"delete",null);__decorate([mobx_1.action],PortModel.prototype,"addLink",null);__decorate([mobx_1.action],PortModel.prototype,"setPosition",null);__decorate([mobx_1.computed],PortModel.prototype,"maximumLinks",null);__decorate([mobx_1.computed],PortModel.prototype,"links",null);__decorate([mobx_1.computed],PortModel.prototype,"connected",null);__decorate([mobx_1.computed],PortModel.prototype,"x",null);__decorate([mobx_1.computed],PortModel.prototype,"y",null);__decorate([mobx_1.computed],PortModel.prototype,"width",null);__decorate([mobx_1.computed],PortModel.prototype,"height",null);return PortModel}(BaseModel_1.BaseModel);exports.PortModel=PortModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var _=__webpack_require__(4);var PortModel_1=__webpack_require__(19);var mobx_1=__webpack_require__(0);var DefaultLinkModel_1=__webpack_require__(23);var DefaultPointFactory_1=__webpack_require__(21);var DefaultPortModel=function(_super){__extends(DefaultPortModel,_super);function DefaultPortModel(isInput,name,label){if(label===void 0){label=null}var _this=_super.call(this,name,"srd-default-port",-1)||this;_this._in=isInput;_this._label=label||name;return _this}DefaultPortModel.prototype.fromJSON=function(object,engine){_super.prototype.fromJSON.call(this,object,engine);this._in=object.in;this._label=object.label};DefaultPortModel.prototype.toJSON=function(){return _.merge(_super.prototype.toJSON.call(this),{in:this._in,label:this._label})};DefaultPortModel.prototype.link=function(port){var link=new DefaultLinkModel_1.DefaultLinkModel(new DefaultPointFactory_1.DefaultPointFactory);link.connect(this,port);return link};DefaultPortModel.prototype.canLinkToPort=function(port){if(this.id!==port.id){if(port instanceof DefaultPortModel){if(this._in!==port._in){var duplicate=Array.from(this.links.values()).find(function(link){if(link.sourcePort&&link.sourcePort.id===port.id){return true}if(link.targetPort&&link.targetPort.id===port.id){return true}return false});return duplicate===undefined}return false}}return false};Object.defineProperty(DefaultPortModel.prototype,"in",{get:function(){return this._in},enumerable:true,configurable:true});Object.defineProperty(DefaultPortModel.prototype,"label",{get:function(){return this._label},enumerable:true,configurable:true});__decorate([mobx_1.observable],DefaultPortModel.prototype,"_in",void 0);__decorate([mobx_1.observable],DefaultPortModel.prototype,"_label",void 0);__decorate([mobx_1.action],DefaultPortModel.prototype,"link",null);__decorate([mobx_1.computed],DefaultPortModel.prototype,"in",null);__decorate([mobx_1.computed],DefaultPortModel.prototype,"label",null);return DefaultPortModel}(PortModel_1.PortModel);exports.DefaultPortModel=DefaultPortModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var AbstractPointFactory_1=__webpack_require__(48);var DefaultPointModel_1=__webpack_require__(47);var DefaultPointWidget_1=__webpack_require__(46);var DefaultPointFactory=function(_super){__extends(DefaultPointFactory,_super);function DefaultPointFactory(){return _super.call(this,"srd-default-point")||this}DefaultPointFactory.prototype.generateReactWidget=function(_engine,point){return React.createElement(DefaultPointWidget_1.DefaultPointWidget,{point:point})};DefaultPointFactory.prototype.getNewInstance=function(init){if(init===void 0){init={x:0,y:0}}return new DefaultPointModel_1.DefaultPointModel(init.x,init.y)};return DefaultPointFactory}(AbstractPointFactory_1.AbstractPointFactory);exports.DefaultPointFactory=DefaultPointFactory},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"PENDING",function(){return PENDING});__webpack_require__.d(__webpack_exports__,"FULFILLED",function(){return FULFILLED});__webpack_require__.d(__webpack_exports__,"REJECTED",function(){return REJECTED});__webpack_require__.d(__webpack_exports__,"fromPromise",function(){return fromPromise});__webpack_require__.d(__webpack_exports__,"isPromiseBasedObservable",function(){return isPromiseBasedObservable});__webpack_require__.d(__webpack_exports__,"lazyObservable",function(){return lazyObservable});__webpack_require__.d(__webpack_exports__,"fromResource",function(){return fromResource});__webpack_require__.d(__webpack_exports__,"toStream",function(){return toStream});__webpack_require__.d(__webpack_exports__,"fromStream",function(){return fromStream});__webpack_require__.d(__webpack_exports__,"createViewModel",function(){return createViewModel});__webpack_require__.d(__webpack_exports__,"whenWithTimeout",function(){return whenWithTimeout});__webpack_require__.d(__webpack_exports__,"keepAlive",function(){return keepAlive});__webpack_require__.d(__webpack_exports__,"queueProcessor",function(){return queueProcessor});__webpack_require__.d(__webpack_exports__,"chunkProcessor",function(){return chunkProcessor});__webpack_require__.d(__webpack_exports__,"now",function(){return now});__webpack_require__.d(__webpack_exports__,"NOOP",function(){return NOOP});__webpack_require__.d(__webpack_exports__,"IDENTITY",function(){return IDENTITY});__webpack_require__.d(__webpack_exports__,"invariant",function(){return invariant});__webpack_require__.d(__webpack_exports__,"deprecated",function(){return deprecated});__webpack_require__.d(__webpack_exports__,"addHiddenProp",function(){return addHiddenProp});__webpack_require__.d(__webpack_exports__,"asyncAction",function(){return asyncAction});__webpack_require__.d(__webpack_exports__,"whenAsync",function(){return whenAsync});__webpack_require__.d(__webpack_exports__,"expr",function(){return expr});__webpack_require__.d(__webpack_exports__,"createTransformer",function(){return createTransformer});var mobx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var NOOP=function(){};var IDENTITY=function(_){return _};function invariant(cond,message){if(message===void 0){message="Illegal state"}if(!cond)throw new Error("[mobx-utils] "+message)}var deprecatedMessages=[];function deprecated(msg){if(deprecatedMessages.indexOf(msg)!==-1)return;deprecatedMessages.push(msg);console.error("[mobx-utils] Deprecated: "+msg)}function addHiddenProp(object,propName,value){Object.defineProperty(object,propName,{enumerable:false,writable:true,configurable:true,value:value})}var PENDING="pending";var FULFILLED="fulfilled";var REJECTED="rejected";function caseImpl(handlers){switch(this.state){case PENDING:return handlers.pending&&handlers.pending();case REJECTED:return handlers.rejected&&handlers.rejected(this.value);case FULFILLED:return handlers.fulfilled&&handlers.fulfilled(this.value)}}function createObservablePromise(origPromise){invariant(arguments.length===1,"fromPromise expects exactly one argument");invariant(typeof origPromise==="function"||typeof origPromise==="object"&&origPromise&&typeof origPromise.then==="function","Please pass a promise or function to fromPromise");if(typeof origPromise==="function"){origPromise=new Promise(origPromise)}var promise=origPromise;origPromise.then(Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("observableFromPromise-resolve",function(value){promise.value=value;promise.state=FULFILLED}),Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("observableFromPromise-reject",function(reason){promise.value=reason;promise.state=REJECTED}));promise.isPromiseBasedObservable=true;promise.case=caseImpl;Object(mobx__WEBPACK_IMPORTED_MODULE_0__["extendObservable"])(promise,{value:undefined,state:PENDING},{},{deep:false});return promise}var fromPromise=createObservablePromise;fromPromise.reject=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("fromPromise.reject",function(reason){var p=fromPromise(Promise.reject(reason));p.state=REJECTED;p.value=reason;return p});fromPromise.resolve=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("fromPromise.resolve",function(value){if(value===void 0){value=undefined}var p=fromPromise(Promise.resolve(value));p.state=FULFILLED;p.value=value;return p});function isPromiseBasedObservable(value){return value&&value.isPromiseBasedObservable===true}function lazyObservable(fetch,initialValue){if(initialValue===void 0){initialValue=undefined}var started=false;var value=mobx__WEBPACK_IMPORTED_MODULE_0__["observable"].box(initialValue,{deep:false});var currentFnc=function(){if(!started){started=true;fetch(function(newValue){Object(mobx__WEBPACK_IMPORTED_MODULE_0__["_allowStateChanges"])(true,function(){value.set(newValue)})})}return value.get()};var resetFnc=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("lazyObservable-reset",function(){value.set(initialValue);return value.get()});return{current:currentFnc,refresh:function(){if(started){started=false;return currentFnc()}else{return value.get()}},reset:function(){return resetFnc()}}}function fromResource(subscriber,unsubscriber,initialValue){if(unsubscriber===void 0){unsubscriber=NOOP}if(initialValue===void 0){initialValue=undefined}var isActive=false;var isDisposed=false;var value=initialValue;var suspender=function(){if(isActive){isActive=false;unsubscriber()}};var atom=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["createAtom"])("ResourceBasedObservable",function(){invariant(!isActive&&!isDisposed);isActive=true;subscriber(function(newValue){Object(mobx__WEBPACK_IMPORTED_MODULE_0__["_allowStateChanges"])(true,function(){value=newValue;atom.reportChanged()})})},suspender);return{current:function(){invariant(!isDisposed,"subscribingObservable has already been disposed");var isBeingTracked=atom.reportObserved();if(!isBeingTracked&&!isActive)console.warn("Called `get` of an subscribingObservable outside a reaction. Current value will be returned but no new subscription has started");return value},dispose:function(){isDisposed=true;suspender()},isAlive:function(){return isActive}}}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};function observableSymbol(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}function self(){return this}function toStream(expression,fireImmediately){if(fireImmediately===void 0){fireImmediately=false}var computedValue=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["computed"])(expression);return _a={subscribe:function(observer){return{unsubscribe:computedValue.observe(typeof observer==="function"?function(_a){var newValue=_a.newValue;return observer(newValue)}:function(_a){var newValue=_a.newValue;return observer.next(newValue)},fireImmediately)}}},_a[observableSymbol()]=self,_a;var _a}var StreamListener=function(){function StreamListener(observable$$1,initialValue){var _this=this;this.current=undefined;Object(mobx__WEBPACK_IMPORTED_MODULE_0__["runInAction"])(function(){_this.current=initialValue;_this.subscription=observable$$1.subscribe(_this)})}StreamListener.prototype.dispose=function(){if(this.subscription){this.subscription.unsubscribe()}};StreamListener.prototype.next=function(value){this.current=value};StreamListener.prototype.complete=function(){this.dispose()};StreamListener.prototype.error=function(value){this.current=value;this.dispose()};__decorate([mobx__WEBPACK_IMPORTED_MODULE_0__["observable"].ref],StreamListener.prototype,"current",void 0);__decorate([mobx__WEBPACK_IMPORTED_MODULE_0__["action"].bound],StreamListener.prototype,"next",null);__decorate([mobx__WEBPACK_IMPORTED_MODULE_0__["action"].bound],StreamListener.prototype,"complete",null);__decorate([mobx__WEBPACK_IMPORTED_MODULE_0__["action"].bound],StreamListener.prototype,"error",null);return StreamListener}();function fromStream(observable$$1,initialValue){if(initialValue===void 0){initialValue=undefined}return new StreamListener(observable$$1,initialValue)}var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};var RESERVED_NAMES=["model","reset","submit","isDirty","isPropertyDirty"];var ViewModel=function(){function ViewModel(model){var _this=this;this.model=model;this.localValues=mobx__WEBPACK_IMPORTED_MODULE_0__["observable"].map({});this.isPropertyDirty=function(key){return _this.localValues.has(key)};invariant(Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableObject"])(model),"createViewModel expects an observable object");Object.keys(model).forEach(function(key){invariant(RESERVED_NAMES.indexOf(key)===-1,"The propertyname "+key+" is reserved and cannot be used with viewModels");Object.defineProperty(_this,key,{enumerable:true,configurable:true,get:function(){if(_this.isPropertyDirty(key))return _this.localValues.get(key);else return _this.model[key]},set:Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])(function(value){if(_this.isPropertyDirty(key)||value!==_this.model[key]){_this.localValues.set(key,value)}})})})}Object.defineProperty(ViewModel.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:true,configurable:true});ViewModel.prototype.submit=function(){var _this=this;Object(mobx__WEBPACK_IMPORTED_MODULE_0__["keys"])(this.localValues).forEach(function(key){var source=_this.localValues.get(key);var destination=_this.model[key];if(Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableArray"])(destination)){destination.replace(source)}else if(Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableMap"])(destination)){destination.clear();destination.merge(source)}else{_this.model[key]=source}});this.localValues.clear()};ViewModel.prototype.reset=function(){this.localValues.clear()};ViewModel.prototype.resetProperty=function(key){this.localValues.delete(key)};__decorate$1([mobx__WEBPACK_IMPORTED_MODULE_0__["computed"]],ViewModel.prototype,"isDirty",null);__decorate$1([mobx__WEBPACK_IMPORTED_MODULE_0__["action"].bound],ViewModel.prototype,"submit",null);__decorate$1([mobx__WEBPACK_IMPORTED_MODULE_0__["action"].bound],ViewModel.prototype,"reset",null);__decorate$1([mobx__WEBPACK_IMPORTED_MODULE_0__["action"].bound],ViewModel.prototype,"resetProperty",null);return ViewModel}();function createViewModel(model){return new ViewModel(model)}function whenWithTimeout(expr,action$$1,timeout,onTimeout){if(timeout===void 0){timeout=1e4}if(onTimeout===void 0){onTimeout=function(){}}deprecated("whenWithTimeout is deprecated, use mobx.when with timeout option instead");return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["when"])(expr,action$$1,{timeout:timeout,onError:onTimeout})}function keepAlive(_1,_2){var computed$$1=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["getAtom"])(_1,_2);if(!computed$$1)throw new Error("No computed provided, please provide an object created with `computed(() => expr)` or an object + property name");return computed$$1.observe(function(){})}function queueProcessor(observableArray,processor,debounce){if(debounce===void 0){debounce=0}if(!Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableArray"])(observableArray))throw new Error("Expected observable array as first argument");if(!Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isAction"])(processor))processor=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("queueProcessor",processor);var runner=function(){var items=observableArray.slice(0);Object(mobx__WEBPACK_IMPORTED_MODULE_0__["runInAction"])(function(){return observableArray.splice(0)});items.forEach(processor)};if(debounce>0)return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["autorun"])(runner,{delay:debounce});else return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["autorun"])(runner)}function chunkProcessor(observableArray,processor,debounce,maxChunkSize){if(debounce===void 0){debounce=0}if(maxChunkSize===void 0){maxChunkSize=0}if(!Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isObservableArray"])(observableArray))throw new Error("Expected observable array as first argument");if(!Object(mobx__WEBPACK_IMPORTED_MODULE_0__["isAction"])(processor))processor=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["action"])("chunkProcessor",processor);var runner=function(){var _loop_1=function(){var chunkSize=maxChunkSize===0?observableArray.length:Math.min(observableArray.length,maxChunkSize);var items=observableArray.slice(0,chunkSize);Object(mobx__WEBPACK_IMPORTED_MODULE_0__["runInAction"])(function(){return observableArray.splice(0,chunkSize)});processor(items)};while(observableArray.length>0){_loop_1()}};if(debounce>0)return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["autorun"])(runner,{delay:debounce});else return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["autorun"])(runner)}var tickers={};function now(interval){if(interval===void 0){interval=1e3}if(!Object(mobx__WEBPACK_IMPORTED_MODULE_0__["_isComputingDerivation"])()){return Date.now()}if(!tickers[interval]){if(typeof interval==="number")tickers[interval]=createIntervalTicker(interval);else tickers[interval]=createAnimationFrameTicker()}return tickers[interval].current()}function createIntervalTicker(interval){var subscriptionHandle;return fromResource(function(sink){subscriptionHandle=setInterval(function(){return sink(Date.now())},interval)},function(){clearInterval(subscriptionHandle)},Date.now())}function createAnimationFrameTicker(){var frameBasedTicker=fromResource(function(sink){function scheduleTick(){window.requestAnimationFrame(function(){sink(Date.now());if(frameBasedTicker.isAlive())scheduleTick()})}scheduleTick()},function(){},Date.now());return frameBasedTicker}var __assign=undefined&&undefined.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};function asyncAction(arg1,arg2){if(typeof arguments[1]==="string"){var name_1=arguments[1];var descriptor_1=arguments[2];if(descriptor_1&&descriptor_1.value){return Object.assign({},descriptor_1,{value:Object(mobx__WEBPACK_IMPORTED_MODULE_0__["flow"])(descriptor_1.value)})}else{return Object.assign({},descriptor_1,{set:function(v){Object.defineProperty(this,name_1,__assign({},descriptor_1,{value:Object(mobx__WEBPACK_IMPORTED_MODULE_0__["flow"])(v)}))}})}}var generator=typeof arg1==="string"?arg2:arg1;deprecated("asyncAction is deprecated. use mobx.flow instead");return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["flow"])(generator)}function whenAsync(fn,timeout){if(timeout===void 0){timeout=0}deprecated("whenAsync is deprecated, use mobx.when without effect instead");return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["when"])(fn,{timeout:timeout})}function expr(expr){if(!Object(mobx__WEBPACK_IMPORTED_MODULE_0__["_isComputingDerivation"])())console.warn("'expr' should only be used inside other reactive functions.");return Object(mobx__WEBPACK_IMPORTED_MODULE_0__["computed"])(expr).get()}var memoizationId=0;function createTransformer(transformer,onCleanup){invariant(typeof transformer==="function"&&transformer.length<2,"createTransformer expects a function that accepts one argument");var views={};function createView(sourceIdentifier,sourceObject){var latestValue;var expr=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["computed"])(function(){return latestValue=transformer(sourceObject)},{name:"Transformer-"+transformer.name+"-"+sourceIdentifier});var disposer=Object(mobx__WEBPACK_IMPORTED_MODULE_0__["onBecomeUnobserved"])(expr,function(){delete views[sourceIdentifier];disposer();if(onCleanup)onCleanup(latestValue,sourceObject)});return expr}return function(object){var identifier=getMemoizationId(object);var reactiveView=views[identifier];if(reactiveView)return reactiveView.get();reactiveView=views[identifier]=createView(identifier,object);return reactiveView.get()}}function getMemoizationId(object){if(typeof object==="string"||typeof object==="number")return object;if(object===null||typeof object!=="object")throw new Error("[mobx-utils] transform expected an object, string or number, got: "+object);var tid=object.$transformId;if(tid===undefined){tid=++memoizationId;addHiddenProp(object,"$transformId",tid)}return tid}},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var LinkModel_1=__webpack_require__(15);var _=__webpack_require__(4);var DefaultLabelModel_1=__webpack_require__(26);var LabelModel_1=__webpack_require__(25);var mobx_1=__webpack_require__(0);var DefaultLinkModel=function(_super){__extends(DefaultLinkModel,_super);function DefaultLinkModel(ptFactory,color,width,curvyness){if(color===void 0){color="rgb(255, 255, 255, 0.6)"}if(width===void 0){width=3}if(curvyness===void 0){curvyness=50}var _this=_super.call(this,ptFactory,"srd-default-link")||this;_this._width=-1;_this._curvyness=-1;_this._color=color;_this._width=width;_this._curvyness=curvyness;return _this}DefaultLinkModel.prototype.toJSON=function(){return _.merge(_super.prototype.toJSON.call(this),{width:this.width,color:this.color,curvyness:this.curvyness})};DefaultLinkModel.prototype.fromJSON=function(ob,engine){_super.prototype.fromJSON.call(this,ob,engine);this.color=ob.color;this.width=ob.width;this.curvyness=ob.curvyness};DefaultLinkModel.prototype.addLabel=function(label){if(label instanceof LabelModel_1.LabelModel){return _super.prototype.addLabel.call(this,label)}var labelOb=new DefaultLabelModel_1.DefaultLabelModel;labelOb.title=label;return _super.prototype.addLabel.call(this,labelOb)};Object.defineProperty(DefaultLinkModel.prototype,"width",{get:function(){return this._width},set:function(width){this._width=width},enumerable:true,configurable:true});Object.defineProperty(DefaultLinkModel.prototype,"color",{get:function(){return this._color},set:function(color){this._color=color},enumerable:true,configurable:true});Object.defineProperty(DefaultLinkModel.prototype,"curvyness",{get:function(){return this._curvyness},set:function(curvyness){this._curvyness=curvyness},enumerable:true,configurable:true});__decorate([mobx_1.observable],DefaultLinkModel.prototype,"_color",void 0);__decorate([mobx_1.observable],DefaultLinkModel.prototype,"_width",void 0);__decorate([mobx_1.observable],DefaultLinkModel.prototype,"_curvyness",void 0);__decorate([mobx_1.action],DefaultLinkModel.prototype,"addLabel",null);__decorate([mobx_1.computed],DefaultLinkModel.prototype,"width",null);__decorate([mobx_1.computed],DefaultLinkModel.prototype,"color",null);__decorate([mobx_1.computed],DefaultLinkModel.prototype,"curvyness",null);return DefaultLinkModel}(LinkModel_1.LinkModel);exports.DefaultLinkModel=DefaultLinkModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var DefaultLinkWidget_1=__webpack_require__(50);var AbstractLinkFactory_1=__webpack_require__(49);var DefaultLinkModel_1=__webpack_require__(23);var DefaultPointFactory_1=__webpack_require__(21);var DefaultLinkFactory=function(_super){__extends(DefaultLinkFactory,_super);function DefaultLinkFactory(type){if(type===void 0){type="srd-default-link"}return _super.call(this,type)||this}DefaultLinkFactory.prototype.generateReactWidget=function(engine,link){return React.createElement(DefaultLinkWidget_1.DefaultLinkWidget,{engine:engine,link:link})};DefaultLinkFactory.prototype.generateSegment=function(_engine,link,key,svgPath){return React.createElement("g",{key:"segment-"+key,"srd-index":key,className:"srd-segment"},React.createElement("path",{className:"halo",strokeWidth:20,stroke:link.color,d:svgPath}),React.createElement("path",{className:"path",strokeWidth:link.width,stroke:link.color,d:svgPath}))};DefaultLinkFactory.prototype.getNewInstance=function(_initialConfig){return new DefaultLinkModel_1.DefaultLinkModel(this.getPointFactory())};DefaultLinkFactory.prototype.getPointFactory=function(){return new DefaultPointFactory_1.DefaultPointFactory};return DefaultLinkFactory}(AbstractLinkFactory_1.AbstractLinkFactory);exports.DefaultLinkFactory=DefaultLinkFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var mobx_1=__webpack_require__(0);var BaseModel_1=__webpack_require__(6);var LabelModel=function(_super){__extends(LabelModel,_super);function LabelModel(type,id){if(type===void 0){type="srd-label"}var _this=_super.call(this,type,id)||this;_this._offsetX=0;_this._offsetY=0;return _this}Object.defineProperty(LabelModel.prototype,"offsetX",{get:function(){return this._offsetX},set:function(offsetX){this._offsetX=offsetX},enumerable:true,configurable:true});Object.defineProperty(LabelModel.prototype,"offsetY",{get:function(){return this._offsetY},set:function(offsetY){this._offsetY=offsetY},enumerable:true,configurable:true});LabelModel.prototype.delete=function(){if(this.parent){this.parent.removeLabel(this)}};__decorate([mobx_1.observable],LabelModel.prototype,"_offsetX",void 0);__decorate([mobx_1.observable],LabelModel.prototype,"_offsetY",void 0);__decorate([mobx_1.computed],LabelModel.prototype,"offsetX",null);__decorate([mobx_1.computed],LabelModel.prototype,"offsetY",null);__decorate([mobx_1.action],LabelModel.prototype,"delete",null);return LabelModel}(BaseModel_1.BaseModel);exports.LabelModel=LabelModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var mobx_1=__webpack_require__(0);var LabelModel_1=__webpack_require__(25);var DefaultLabelModel=function(_super){__extends(DefaultLabelModel,_super);function DefaultLabelModel(){var _this=_super.call(this,"srd-default-label")||this;_this._title=null;_this.offsetY=-23;return _this}Object.defineProperty(DefaultLabelModel.prototype,"title",{get:function(){return this._title},set:function(title){this._title=title},enumerable:true,configurable:true});__decorate([mobx_1.observable],DefaultLabelModel.prototype,"_title",void 0);__decorate([mobx_1.computed],DefaultLabelModel.prototype,"title",null);return DefaultLabelModel}(LabelModel_1.LabelModel);exports.DefaultLabelModel=DefaultLabelModel},function(module,exports,__webpack_require__){var Heap=__webpack_require__(17);var Util=__webpack_require__(7);var Heuristic=__webpack_require__(12);var DiagonalMovement=__webpack_require__(2);function BiAStarFinder(opt){opt=opt||{};this.allowDiagonal=opt.allowDiagonal;this.dontCrossCorners=opt.dontCrossCorners;this.diagonalMovement=opt.diagonalMovement;this.heuristic=opt.heuristic||Heuristic.manhattan;this.weight=opt.weight||1;if(!this.diagonalMovement){if(!this.allowDiagonal){this.diagonalMovement=DiagonalMovement.Never}else{if(this.dontCrossCorners){this.diagonalMovement=DiagonalMovement.OnlyWhenNoObstacles}else{this.diagonalMovement=DiagonalMovement.IfAtMostOneObstacle}}}if(this.diagonalMovement===DiagonalMovement.Never){this.heuristic=opt.heuristic||Heuristic.manhattan}else{this.heuristic=opt.heuristic||Heuristic.octile}}BiAStarFinder.prototype.findPath=function(startX,startY,endX,endY,grid){var cmp=function(nodeA,nodeB){return nodeA.f-nodeB.f},startOpenList=new Heap(cmp),endOpenList=new Heap(cmp),startNode=grid.getNodeAt(startX,startY),endNode=grid.getNodeAt(endX,endY),heuristic=this.heuristic,diagonalMovement=this.diagonalMovement,weight=this.weight,abs=Math.abs,SQRT2=Math.SQRT2,node,neighbors,neighbor,i,l,x,y,ng,BY_START=1,BY_END=2;startNode.g=0;startNode.f=0;startOpenList.push(startNode);startNode.opened=BY_START;endNode.g=0;endNode.f=0;endOpenList.push(endNode);endNode.opened=BY_END;while(!startOpenList.empty()&&!endOpenList.empty()){node=startOpenList.pop();node.closed=true;neighbors=grid.getNeighbors(node,diagonalMovement);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];if(neighbor.closed){continue}if(neighbor.opened===BY_END){return Util.biBacktrace(node,neighbor)}x=neighbor.x;y=neighbor.y;ng=node.g+(x-node.x===0||y-node.y===0?1:SQRT2);if(!neighbor.opened||ng<neighbor.g){neighbor.g=ng;neighbor.h=neighbor.h||weight*heuristic(abs(x-endX),abs(y-endY));neighbor.f=neighbor.g+neighbor.h;neighbor.parent=node;if(!neighbor.opened){startOpenList.push(neighbor);neighbor.opened=BY_START}else{startOpenList.updateItem(neighbor)}}}node=endOpenList.pop();node.closed=true;neighbors=grid.getNeighbors(node,diagonalMovement);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];if(neighbor.closed){continue}if(neighbor.opened===BY_START){return Util.biBacktrace(neighbor,node)}x=neighbor.x;y=neighbor.y;ng=node.g+(x-node.x===0||y-node.y===0?1:SQRT2);if(!neighbor.opened||ng<neighbor.g){neighbor.g=ng;neighbor.h=neighbor.h||weight*heuristic(abs(x-startX),abs(y-startY));neighbor.f=neighbor.g+neighbor.h;neighbor.parent=node;if(!neighbor.opened){endOpenList.push(neighbor);neighbor.opened=BY_END}else{endOpenList.updateItem(neighbor)}}}}return[]};module.exports=BiAStarFinder},function(module,exports,__webpack_require__){var Heap=__webpack_require__(17);var Util=__webpack_require__(7);var Heuristic=__webpack_require__(12);var DiagonalMovement=__webpack_require__(2);function AStarFinder(opt){opt=opt||{};this.allowDiagonal=opt.allowDiagonal;this.dontCrossCorners=opt.dontCrossCorners;this.heuristic=opt.heuristic||Heuristic.manhattan;this.weight=opt.weight||1;this.diagonalMovement=opt.diagonalMovement;if(!this.diagonalMovement){if(!this.allowDiagonal){this.diagonalMovement=DiagonalMovement.Never}else{if(this.dontCrossCorners){this.diagonalMovement=DiagonalMovement.OnlyWhenNoObstacles}else{this.diagonalMovement=DiagonalMovement.IfAtMostOneObstacle}}}if(this.diagonalMovement===DiagonalMovement.Never){this.heuristic=opt.heuristic||Heuristic.manhattan}else{this.heuristic=opt.heuristic||Heuristic.octile}}AStarFinder.prototype.findPath=function(startX,startY,endX,endY,grid){var openList=new Heap(function(nodeA,nodeB){return nodeA.f-nodeB.f}),startNode=grid.getNodeAt(startX,startY),endNode=grid.getNodeAt(endX,endY),heuristic=this.heuristic,diagonalMovement=this.diagonalMovement,weight=this.weight,abs=Math.abs,SQRT2=Math.SQRT2,node,neighbors,neighbor,i,l,x,y,ng;startNode.g=0;startNode.f=0;openList.push(startNode);startNode.opened=true;while(!openList.empty()){node=openList.pop();node.closed=true;if(node===endNode){return Util.backtrace(endNode)}neighbors=grid.getNeighbors(node,diagonalMovement);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];if(neighbor.closed){continue}x=neighbor.x;y=neighbor.y;ng=node.g+(x-node.x===0||y-node.y===0?1:SQRT2);if(!neighbor.opened||ng<neighbor.g){neighbor.g=ng;neighbor.h=neighbor.h||weight*heuristic(abs(x-endX),abs(y-endY));neighbor.f=neighbor.g+neighbor.h;neighbor.parent=node;if(!neighbor.opened){openList.push(neighbor);neighbor.opened=true}else{openList.updateItem(neighbor)}}}}return[]};module.exports=AStarFinder},function(module,exports){function Node(x,y,walkable){this.x=x;this.y=y;this.walkable=walkable===undefined?true:walkable}module.exports=Node},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_react_1=__webpack_require__(3);var NodeWidgetContainer=function(_super){__extends(NodeWidgetContainer,_super);function NodeWidgetContainer(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._elem=null;return _this}NodeWidgetContainer.prototype.componentDidMount=function(){if(this._elem){this.props.node.width=this._elem.offsetWidth;this.props.node.height=this._elem.offsetHeight;console.log("update node",this.props.node.id,"width="+this.props.node.width,"height="+this.props.node.height)}};NodeWidgetContainer.prototype.render=function(){var _this=this;var _a=this.props.node,id=_a.id,x=_a.x,y=_a.y,selected=_a.selected;return React.createElement("div",{ref:function(elem){return _this._elem=elem},"srd-id":id,className:cx("srd-node",{selected:selected}),style:{transform:"translate("+x+"px, "+y+"px)"}},this.props.children)};NodeWidgetContainer=__decorate([mobx_react_1.observer],NodeWidgetContainer);return NodeWidgetContainer}(React.Component);exports.NodeWidgetContainer=NodeWidgetContainer},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var mobx_react_1=__webpack_require__(3);var NodeWidgetContainer_1=__webpack_require__(30);var NodesLayer=mobx_react_1.observer(function(_a){var engine=_a.engine;return React.createElement(React.Fragment,null,Array.from(engine.model.nodes.values()).map(function(node){return React.createElement(NodeWidgetContainer_1.NodeWidgetContainer,{key:node.id,node:node},engine.generateWidgetForNode(node))}))});var NodeLayerWidget=function(_super){__extends(NodeLayerWidget,_super);function NodeLayerWidget(){return _super!==null&&_super.apply(this,arguments)||this}NodeLayerWidget.prototype.componentDidUpdate=function(){var _this=this;Array.from(this.props.engine.model.nodes.values()).map(function(node){node.updateDimensions(_this.props.engine.getNodeDimensions(node))})};NodeLayerWidget.prototype.render=function(){var _a=this.props.engine.model,offsetX=_a.offsetX,offsetY=_a.offsetY,zoom=_a.zoom;return React.createElement("div",{className:"srd-node-layer",style:{transform:"translate("+offsetX+"px, "+offsetY+"px) scale("+zoom/100+")"}},React.createElement(NodesLayer,{engine:this.props.engine}))};NodeLayerWidget=__decorate([mobx_react_1.observer],NodeLayerWidget);return NodeLayerWidget}(React.Component);exports.NodeLayerWidget=NodeLayerWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_react_1=__webpack_require__(3);var LinkWidgetContainer=function(_super){__extends(LinkWidgetContainer,_super);function LinkWidgetContainer(){return _super!==null&&_super.apply(this,arguments)||this}LinkWidgetContainer.prototype.render=function(){var _a=this.props.link,id=_a.id,selected=_a.selected;return React.createElement("g",{"srd-id":id,className:cx("srd-link",{selected:selected})},this.props.children)};LinkWidgetContainer=__decorate([mobx_react_1.observer],LinkWidgetContainer);return LinkWidgetContainer}(React.Component);exports.LinkWidgetContainer=LinkWidgetContainer},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var mobx_react_1=__webpack_require__(3);var LinkWidgetContainer_1=__webpack_require__(32);var LinksLayer=mobx_react_1.observer(function(_a){var engine=_a.engine;return React.createElement(React.Fragment,null,Array.from(engine.model.links.values()).map(function(link){return React.createElement(LinkWidgetContainer_1.LinkWidgetContainer,{key:link.id,link:link},engine.generateWidgetForLink(link))}))});var LinkLayerWidget=function(_super){__extends(LinkLayerWidget,_super);function LinkLayerWidget(){return _super!==null&&_super.apply(this,arguments)||this}LinkLayerWidget.prototype.render=function(){var canvas=this.props.engine.canvas;var _a=this.props.engine.model,offsetX=_a.offsetX,offsetY=_a.offsetY,zoom=_a.zoom;return React.createElement("svg",{className:"srd-link-layer",style:{transform:"translate("+offsetX+"px, "+offsetY+"px) scale("+zoom/100+")"}},canvas&&React.createElement(LinksLayer,{engine:this.props.engine}))};LinkLayerWidget=__decorate([mobx_react_1.observer],LinkLayerWidget);return LinkLayerWidget}(React.Component);exports.LinkLayerWidget=LinkLayerWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var mobx_1=__webpack_require__(0);var mobx_utils_1=__webpack_require__(22);var BaseAction_1=__webpack_require__(10);var SelectingAction=function(_super){__extends(SelectingAction,_super);function SelectingAction(mouseX,mouseY){var _this=_super.call(this,mouseX,mouseY)||this;_this.containsElement=mobx_utils_1.createTransformer(function(_a){var x=_a.x,y=_a.y,model=_a.model;var z=model.zoom/100;return x*z+model.offsetX>_this.dimensions.left&&x*z+model.offsetX<_this.dimensions.right&&y*z+model.offsetY>_this.dimensions.top&&y*z+model.offsetY<_this.dimensions.bottom});_this.mouseX=mouseX;_this.mouseY=mouseY;_this.mouseX2=mouseX;_this.mouseY2=mouseY;return _this}Object.defineProperty(SelectingAction.prototype,"dimensions",{get:function(){return{left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY),right:this.mouseX2<this.mouseX?this.mouseX:this.mouseX2,bottom:this.mouseY2<this.mouseY?this.mouseY:this.mouseY2}},enumerable:true,configurable:true});Object.defineProperty(SelectingAction.prototype,"styles",{get:function(){return{left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY)}},enumerable:true,configurable:true});__decorate([mobx_1.observable],SelectingAction.prototype,"mouseX2",void 0);__decorate([mobx_1.observable],SelectingAction.prototype,"mouseY2",void 0);__decorate([mobx_1.computed],SelectingAction.prototype,"dimensions",null);__decorate([mobx_1.computed],SelectingAction.prototype,"styles",null);return SelectingAction}(BaseAction_1.BaseAction);exports.SelectingAction=SelectingAction},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var BaseAction_1=__webpack_require__(10);var PointModel_1=__webpack_require__(14);var NodeModel_1=__webpack_require__(11);var MoveItemsAction=function(_super){__extends(MoveItemsAction,_super);function MoveItemsAction(mouseX,mouseY,engine){var _this=_super.call(this,mouseX,mouseY)||this;_this.moved=false;if(engine.model.locked){_this.selectionModels=[]}else{_this.selectionModels=engine.model.selectedEntities.filter(function(item){return!item.locked}).filter(function ensureTyping(item){return item instanceof PointModel_1.PointModel||item instanceof NodeModel_1.NodeModel}).map(function(model){return{model:model,initialX:model.x,initialY:model.y}})}return _this}return MoveItemsAction}(BaseAction_1.BaseAction);exports.MoveItemsAction=MoveItemsAction},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var BaseAction_1=__webpack_require__(10);var MoveCanvasAction=function(_super){__extends(MoveCanvasAction,_super);function MoveCanvasAction(mouseX,mouseY,model){var _this=_super.call(this,mouseX,mouseY)||this;_this.initialOffsetX=model.offsetX;_this.initialOffsetY=model.offsetY;return _this}return MoveCanvasAction}(BaseAction_1.BaseAction);exports.MoveCanvasAction=MoveCanvasAction},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var _=__webpack_require__(4);var mobx_1=__webpack_require__(0);var LinkModel_1=__webpack_require__(15);var NodeModel_1=__webpack_require__(11);var BaseModel_1=__webpack_require__(6);var mobx_utils_1=__webpack_require__(22);var DiagramModel=function(_super){__extends(DiagramModel,_super);function DiagramModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.getNode=mobx_utils_1.createTransformer(function(id){return _this._nodes.get(id)});_this.getLink=mobx_utils_1.createTransformer(function(id){return _this._links.get(id)});_this._links=new Map;_this._nodes=new Map;_this._offsetX=0;_this._offsetY=0;_this._zoom=100;_this._gridSize=0;_this._allowLooseLinks=false;_this._allowCanvasTranslation=true;_this._allowCanvasZoom=true;_this._inverseZoom=false;_this._smartRouting=false;_this._deleteKeys=[46,8];_this._maxNumberPointsPerLink=Infinity;return _this}DiagramModel.prototype.fromJSON=function(object,engine){var _this=this;_super.prototype.fromJSON.call(this,object,engine);this.offsetX=object.offsetX;this.offsetY=object.offsetY;this.zoom=object.zoom;this.gridSize=object.gridSize;object.nodes=object.nodes||[];object.nodes.forEach(function(node){var nodeOb=engine.getNodeFactory(node.type).getNewInstance(node);nodeOb.parent=_this;nodeOb.fromJSON(node,engine);_this.addNode(nodeOb)});object.links=object.links||[];object.links.forEach(function(link){var linkOb=engine.getLinkFactory(link.type).getNewInstance();linkOb.parent=_this;linkOb.fromJSON(link,engine);_this.addLink(linkOb)})};DiagramModel.prototype.toJSON=function(){return __assign({},_super.prototype.toJSON.call(this),{offsetX:this.offsetX,offsetY:this.offsetY,zoom:this.zoom,gridSize:this.gridSize,links:Array.from(this._links.values()).map(function(link){return link.toJSON()}),nodes:Array.from(this._nodes.values()).map(function(node){return node.toJSON()})})};DiagramModel.prototype.delete=function(){this._nodes.clear();this._links.clear()};DiagramModel.prototype.clearSelection=function(ignore){if(ignore===void 0){ignore=null}console.log("[clearSelection]",this.selectedEntities);this.selectedEntities.forEach(function(item){if(ignore&&ignore.id===item.id){return}item.selected=false})};DiagramModel.prototype.addAll=function(){var _this=this;var models=[];for(var _i=0;_i<arguments.length;_i++){models[_i]=arguments[_i]}models.forEach(function(model){if(model instanceof LinkModel_1.LinkModel){_this.addLink(model)}else if(model instanceof NodeModel_1.NodeModel){_this.addNode(model)}});return models};DiagramModel.prototype.addLink=function(link){link.parent=this;this._links.set(link.id,link);return link};DiagramModel.prototype.addNode=function(node){node.parent=this;this._nodes.set(node.id,node);return node};DiagramModel.prototype.removeLink=function(link){var l=this._links.get(link instanceof LinkModel_1.LinkModel?link.id:link);if(l){this._links.delete(l.id);console.log("[diagramModel] remove link",l.id)}};DiagramModel.prototype.removeNode=function(node){var n=this._nodes.get(node instanceof NodeModel_1.NodeModel?node.id:node);if(n){this._nodes.delete(n.id)}};Object.defineProperty(DiagramModel.prototype,"selectedEntities",{get:function(){return _.uniqBy(_.flatten(Array.from(this._nodes.values()).map(function(node){return node.selectedEntities})).concat(_.flatten(Array.from(this._links.values()).map(function(link){return link.selectedEntities}))),function(item){return item.type+":"+item.id})},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"links",{get:function(){return this._links},set:function(value){this._links=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"nodes",{get:function(){return this._nodes},set:function(value){this._nodes=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"offsetX",{get:function(){return this._offsetX},set:function(value){this._offsetX=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"offsetY",{get:function(){return this._offsetY},set:function(value){this._offsetY=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"zoom",{get:function(){return this._zoom},set:function(zoom){this._zoom=zoom},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"gridSize",{get:function(){return this._gridSize},set:function(value){this._gridSize=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"allowLooseLinks",{get:function(){return this._allowLooseLinks},set:function(value){this._allowLooseLinks=value;if(!this._allowLooseLinks){Array.from(this._links.values()).forEach(function(link){if(!link.sourcePort||!link.targetPort){link.delete()}})}},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"allowCanvasTranslation",{get:function(){return this._allowCanvasTranslation},set:function(value){this._allowCanvasTranslation=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"allowCanvasZoom",{get:function(){return this._allowCanvasZoom},set:function(value){this._allowCanvasZoom=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"inverseZoom",{get:function(){return this._inverseZoom},set:function(value){this._inverseZoom=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"maxNumberPointsPerLink",{get:function(){return this._maxNumberPointsPerLink},set:function(value){this._maxNumberPointsPerLink=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"smartRouting",{get:function(){return this._smartRouting},set:function(value){this._smartRouting=value},enumerable:true,configurable:true});Object.defineProperty(DiagramModel.prototype,"deleteKeys",{get:function(){return this._deleteKeys},set:function(keys){this._deleteKeys=keys},enumerable:true,configurable:true});__decorate([mobx_1.observable],DiagramModel.prototype,"_links",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_nodes",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_offsetX",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_offsetY",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_zoom",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_gridSize",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_allowLooseLinks",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_allowCanvasTranslation",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_allowCanvasZoom",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_inverseZoom",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_smartRouting",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_deleteKeys",void 0);__decorate([mobx_1.observable],DiagramModel.prototype,"_maxNumberPointsPerLink",void 0);__decorate([mobx_1.action],DiagramModel.prototype,"delete",null);__decorate([mobx_1.action],DiagramModel.prototype,"clearSelection",null);__decorate([mobx_1.action],DiagramModel.prototype,"addAll",null);__decorate([mobx_1.action],DiagramModel.prototype,"addLink",null);__decorate([mobx_1.action],DiagramModel.prototype,"addNode",null);__decorate([mobx_1.action],DiagramModel.prototype,"removeLink",null);__decorate([mobx_1.action],DiagramModel.prototype,"removeNode",null);__decorate([mobx_1.computed],DiagramModel.prototype,"selectedEntities",null);__decorate([mobx_1.computed],DiagramModel.prototype,"links",null);__decorate([mobx_1.computed],DiagramModel.prototype,"nodes",null);__decorate([mobx_1.computed],DiagramModel.prototype,"offsetX",null);__decorate([mobx_1.computed],DiagramModel.prototype,"offsetY",null);__decorate([mobx_1.computed],DiagramModel.prototype,"zoom",null);__decorate([mobx_1.computed],DiagramModel.prototype,"gridSize",null);__decorate([mobx_1.computed],DiagramModel.prototype,"allowLooseLinks",null);__decorate([mobx_1.computed],DiagramModel.prototype,"allowCanvasTranslation",null);__decorate([mobx_1.computed],DiagramModel.prototype,"allowCanvasZoom",null);__decorate([mobx_1.computed],DiagramModel.prototype,"inverseZoom",null);__decorate([mobx_1.computed],DiagramModel.prototype,"maxNumberPointsPerLink",null);__decorate([mobx_1.computed],DiagramModel.prototype,"smartRouting",null);__decorate([mobx_1.computed],DiagramModel.prototype,"deleteKeys",null);return DiagramModel}(BaseModel_1.BaseModel);exports.DiagramModel=DiagramModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_react_1=__webpack_require__(3);var PortWidgetContainer=function(_super){__extends(PortWidgetContainer,_super);function PortWidgetContainer(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._elem=null;return _this}PortWidgetContainer.prototype.componentDidMount=function(){if(this._elem){this.props.engine.registerPortRef(this.props.port,this._elem)}};PortWidgetContainer.prototype.componentWillUnmount=function(){this.props.engine.unregisterPortRef(this.props.port)};PortWidgetContainer.prototype.render=function(){var _this=this;var _a=this.props.port,id=_a.id,selected=_a.selected,connected=_a.connected;return React.createElement("div",{ref:function(elem){return _this._elem=elem},"srd-id":id,className:cx("srd-port",{selected:selected,connected:connected})},this.props.children)};PortWidgetContainer=__decorate([mobx_react_1.observer],PortWidgetContainer);return PortWidgetContainer}(React.Component);exports.PortWidgetContainer=PortWidgetContainer},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_react_1=__webpack_require__(3);var PortWidgetContainer_1=__webpack_require__(38);var DefaultPortWidget=function(_super){__extends(DefaultPortWidget,_super);function DefaultPortWidget(){return _super!==null&&_super.apply(this,arguments)||this}DefaultPortWidget.prototype.render=function(){var port=React.createElement(PortWidgetContainer_1.PortWidgetContainer,{port:this.props.port,engine:this.props.engine});var label=React.createElement("div",{className:"name"},this.props.port.label);return React.createElement("div",{className:cx("srd-default-port")},this.props.port.in?port:label,this.props.port.in?label:port)};DefaultPortWidget=__decorate([mobx_react_1.observer],DefaultPortWidget);return DefaultPortWidget}(React.Component);exports.DefaultPortWidget=DefaultPortWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var AbstractFactory_1=__webpack_require__(8);var AbstractPortFactory=function(_super){__extends(AbstractPortFactory,_super);function AbstractPortFactory(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractPortFactory}(AbstractFactory_1.AbstractFactory);exports.AbstractPortFactory=AbstractPortFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var DefaultPortModel_1=__webpack_require__(20);var AbstractPortFactory_1=__webpack_require__(40);var DefaultLinkFactory_1=__webpack_require__(24);var DefaultPortWidget_1=__webpack_require__(39);var DefaultPortFactory=function(_super){__extends(DefaultPortFactory,_super);function DefaultPortFactory(){return _super.call(this,"srd-default-port")||this}DefaultPortFactory.prototype.generateReactWidget=function(engine,port){return React.createElement(DefaultPortWidget_1.DefaultPortWidget,{engine:engine,port:port})};DefaultPortFactory.prototype.getNewInstance=function(_initialConfig){return new DefaultPortModel_1.DefaultPortModel(true,"unknown")};DefaultPortFactory.prototype.getLinkFactory=function(){return new DefaultLinkFactory_1.DefaultLinkFactory};return DefaultPortFactory}(AbstractPortFactory_1.AbstractPortFactory);exports.DefaultPortFactory=DefaultPortFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var AbstractFactory_1=__webpack_require__(8);var AbstractNodeFactory=function(_super){__extends(AbstractNodeFactory,_super);function AbstractNodeFactory(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractNodeFactory}(AbstractFactory_1.AbstractFactory);exports.AbstractNodeFactory=AbstractNodeFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var mobx_react_1=__webpack_require__(3);var Ports=mobx_react_1.observer(function(_a){var className=_a.className,ports=_a.ports,engine=_a.engine;return React.createElement("div",{className:className},ports.map(function(port){return React.cloneElement(engine.generateWidgetForPort(port),{key:port.id})}))});var DefaultNodeWidget=function(_super){__extends(DefaultNodeWidget,_super);function DefaultNodeWidget(){return _super!==null&&_super.apply(this,arguments)||this}DefaultNodeWidget.prototype.render=function(){return React.createElement("div",{className:"srd-default-node",style:{background:this.props.node.color}},React.createElement("div",{className:"title"},React.createElement("div",{className:"name"},this.props.node.name)),React.createElement("div",{className:"ports"},React.createElement(Ports,{className:"in",engine:this.props.engine,ports:this.props.node.inputs}),React.createElement(Ports,{className:"out",engine:this.props.engine,ports:this.props.node.outputs})))};DefaultNodeWidget=__decorate([mobx_react_1.observer],DefaultNodeWidget);return DefaultNodeWidget}(React.Component);exports.DefaultNodeWidget=DefaultNodeWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var DefaultPortModel_1=__webpack_require__(20);var _=__webpack_require__(4);var NodeModel_1=__webpack_require__(11);var Toolkit_1=__webpack_require__(9);var mobx_1=__webpack_require__(0);var DefaultNodeModel=function(_super){__extends(DefaultNodeModel,_super);function DefaultNodeModel(name,color){if(name===void 0){name="Untitled"}if(color===void 0){color="rgb(0,192,255)"}var _this=_super.call(this,"srd-default-node")||this;_this._name=name;_this._color=color;return _this}Object.defineProperty(DefaultNodeModel.prototype,"name",{get:function(){return this._name},set:function(value){this._name=value},enumerable:true,configurable:true});Object.defineProperty(DefaultNodeModel.prototype,"color",{get:function(){return this._color},set:function(value){this._color=value},enumerable:true,configurable:true});DefaultNodeModel.prototype.addInPort=function(label){return this.addPort(new DefaultPortModel_1.DefaultPortModel(true,Toolkit_1.Toolkit.UID(),label))};DefaultNodeModel.prototype.addOutPort=function(label){return this.addPort(new DefaultPortModel_1.DefaultPortModel(false,Toolkit_1.Toolkit.UID(),label))};DefaultNodeModel.prototype.fromJSON=function(object,engine){_super.prototype.fromJSON.call(this,object,engine);this.name=object.name;this.color=object.color};DefaultNodeModel.prototype.toJSON=function(){return _.merge(_super.prototype.toJSON.call(this),{name:this.name,color:this.color})};Object.defineProperty(DefaultNodeModel.prototype,"inputs",{get:function(){return Array.from(this.ports.values()).filter(function(p){return p.in})},enumerable:true,configurable:true});Object.defineProperty(DefaultNodeModel.prototype,"outputs",{get:function(){return Array.from(this.ports.values()).filter(function(p){return!p.in})},enumerable:true,configurable:true});__decorate([mobx_1.observable],DefaultNodeModel.prototype,"_name",void 0);__decorate([mobx_1.observable],DefaultNodeModel.prototype,"_color",void 0);__decorate([mobx_1.computed],DefaultNodeModel.prototype,"name",null);__decorate([mobx_1.computed],DefaultNodeModel.prototype,"color",null);__decorate([mobx_1.action],DefaultNodeModel.prototype,"addInPort",null);__decorate([mobx_1.action],DefaultNodeModel.prototype,"addOutPort",null);__decorate([mobx_1.computed],DefaultNodeModel.prototype,"inputs",null);__decorate([mobx_1.computed],DefaultNodeModel.prototype,"outputs",null);return DefaultNodeModel}(NodeModel_1.NodeModel);exports.DefaultNodeModel=DefaultNodeModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var DefaultNodeModel_1=__webpack_require__(44);var DefaultNodeWidget_1=__webpack_require__(43);var AbstractNodeFactory_1=__webpack_require__(42);var DefaultNodeFactory=function(_super){__extends(DefaultNodeFactory,_super);function DefaultNodeFactory(){return _super.call(this,"srd-default-node")||this}DefaultNodeFactory.prototype.generateReactWidget=function(engine,node){return React.createElement(DefaultNodeWidget_1.DefaultNodeWidget,{node:node,engine:engine})};DefaultNodeFactory.prototype.getNewInstance=function(_initialConfig){return new DefaultNodeModel_1.DefaultNodeModel};return DefaultNodeFactory}(AbstractNodeFactory_1.AbstractNodeFactory);exports.DefaultNodeFactory=DefaultNodeFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_react_1=__webpack_require__(3);var DefaultPointWidget=function(_super){__extends(DefaultPointWidget,_super);function DefaultPointWidget(){return _super!==null&&_super.apply(this,arguments)||this}DefaultPointWidget.prototype.render=function(){var _a=this.props.point,id=_a.id,selected=_a.selected,x=_a.x,y=_a.y,parent=_a.parent;return React.createElement("g",{key:id,"srd-id":id,"srd-link-id":parent.id,className:cx("srd-point",{selected:selected})},React.createElement("circle",{cx:x,cy:y,r:5,className:"point"}))};DefaultPointWidget=__decorate([mobx_react_1.observer],DefaultPointWidget);return DefaultPointWidget}(React.Component);exports.DefaultPointWidget=DefaultPointWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var PointModel_1=__webpack_require__(14);var DefaultPointModel=function(_super){__extends(DefaultPointModel,_super);function DefaultPointModel(x,y){return _super.call(this,"srd-default-point",x,y)||this}return DefaultPointModel}(PointModel_1.PointModel);exports.DefaultPointModel=DefaultPointModel},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var AbstractFactory_1=__webpack_require__(8);var AbstractPointFactory=function(_super){__extends(AbstractPointFactory,_super);function AbstractPointFactory(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractPointFactory}(AbstractFactory_1.AbstractFactory);exports.AbstractPointFactory=AbstractPointFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var AbstractFactory_1=__webpack_require__(8);var AbstractLinkFactory=function(_super){__extends(AbstractLinkFactory,_super);function AbstractLinkFactory(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractLinkFactory}(AbstractFactory_1.AbstractFactory);exports.AbstractLinkFactory=AbstractLinkFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_react_1=__webpack_require__(3);var Toolkit_1=__webpack_require__(9);var PathFinding_1=__webpack_require__(18);var _=__webpack_require__(4);var DefaultLinkWidget=function(_super){__extends(DefaultLinkWidget,_super);function DefaultLinkWidget(props){var _this=_super.call(this,props)||this;_this._elem=null;_this._labelElems={};_this._pathFinding=null;if(props.engine.model.smartRouting){_this._pathFinding=new PathFinding_1.PathFinding(_this.props.engine)}_this.calculateLabelPosition=_this.calculateLabelPosition.bind(_this);_this.calculateAllLabelPosition=_this.calculateAllLabelPosition.bind(_this);_this.findPathAndRelativePositionToRenderLabel=_this.findPathAndRelativePositionToRenderLabel.bind(_this);return _this}DefaultLinkWidget.prototype.calculateAllLabelPosition=function(){var _this=this;_.forEach(this.props.link.labels,function(label,index){_this.calculateLabelPosition(label,index+1)})};DefaultLinkWidget.prototype.componentDidUpdate=function(){if(this.props.link.labels.length>0){window.requestAnimationFrame(this.calculateAllLabelPosition)}};DefaultLinkWidget.prototype.componentDidMount=function(){if(this.props.link.labels.length>0){window.requestAnimationFrame(this.calculateAllLabelPosition)}};DefaultLinkWidget.prototype.generateLabel=function(label){var _this=this;var canvas=this.props.engine.canvas;var factory=this.props.engine.getFactoryForLabel(label);return React.createElement("foreignObject",{key:label.id,className:"label",width:canvas.offsetWidth,height:canvas.offsetHeight},React.createElement("div",{ref:function(ref){return _this._labelElems[label.id]=ref}},factory.generateReactWidget(this.props.engine,label)))};DefaultLinkWidget.prototype.generateSegment=function(engine,link,key,svgPath){return engine.getFactoryForLink(link).generateSegment(this.props.engine,link,key,svgPath)};DefaultLinkWidget.prototype.generatePoint=function(engine,point){return React.cloneElement(engine.getFactoryForPoint(point).generateReactWidget(engine,point),{key:"point-"+point.id})};DefaultLinkWidget.prototype.findPathAndRelativePositionToRenderLabel=function(index){if(this._elem){var lengths=Array.from(this._elem.querySelectorAll(".srd-segment .path")).map(function(path){return path.getTotalLength()});var labelPosition=lengths.reduce(function(previousValue,currentValue){return previousValue+currentValue},0)*(index/(this.props.link.labels.length+1));var pathIndex=0;while(pathIndex<this.props.link.points.length-1){if(labelPosition-lengths[pathIndex]<0){return{path:this._elem.querySelector('.srd-segment[srd-index="'+pathIndex+'"] path.path'),position:labelPosition}}labelPosition-=lengths[pathIndex];pathIndex++}}return null};DefaultLinkWidget.prototype.calculateLabelPosition=function(label,index){var labelElem=this._labelElems[label.id];if(!labelElem){return}var labelData=this.findPathAndRelativePositionToRenderLabel(index);if(labelData){var labelDimensions={width:labelElem.offsetWidth,height:labelElem.offsetHeight};var pathCentre=labelData.path.getPointAtLength(labelData.position);var labelCoordinates={x:pathCentre.x-labelDimensions.width/2+label.offsetX,y:pathCentre.y-labelDimensions.height/2+label.offsetY};labelElem.setAttribute("style","transform: translate("+labelCoordinates.x+"px, "+labelCoordinates.y+"px);")}};DefaultLinkWidget.prototype.isSmartRoutingApplicable=function(){var _a=this.props,engine=_a.engine,link=_a.link;if(!engine.model.smartRouting){return false}if(link.points.length>2){return false}if(link.sourcePort===null||link.targetPort===null){return false}return true};DefaultLinkWidget.prototype.render=function(){var _this=this;var _a=this.props,link=_a.link,engine=_a.engine;var paths=[];if(this.isSmartRoutingApplicable()){if(this._pathFinding){var directPathCoords=this._pathFinding.calculateDirectPath(link.firstPoint,link.lastPoint);if(engine.routingMatrix.length===0){engine.calculateRoutingMatrix()}var smartLink=this._pathFinding.calculateLinkStartEndCoords(engine.routingMatrix,directPathCoords);if(smartLink){var start=smartLink.start,end=smartLink.end,pathToStart=smartLink.pathToStart,pathToEnd=smartLink.pathToEnd;var simplifiedPath=this._pathFinding.calculateDynamicPath(engine.routingMatrix,start,end,pathToStart,pathToEnd);paths.push(this.generateSegment(engine,link,0,Toolkit_1.Toolkit.generateDynamicPath(simplifiedPath)))}}}if(paths.length===0){if(link.points.length===2){paths.push(this.generateSegment(engine,link,0,Toolkit_1.Toolkit.generateCurvePath(link.firstPoint,link.lastPoint,link.curvyness)));if(link.targetPort===null){paths.push(this.generatePoint(engine,link.lastPoint))}}else{for(var j=0;j<link.points.length-1;j++){paths.push(this.generateSegment(engine,link,j,Toolkit_1.Toolkit.generateLinePath(link.points[j],link.points[j+1])))}for(var i=1;i<link.points.length-1;i++){paths.push(this.generatePoint(engine,link.points[i]))}if(link.targetPort===null){paths.push(this.generatePoint(engine,link.lastPoint))}}}var reverse=link.sourcePort&&link.sourcePort.in;return React.createElement("g",{ref:function(elem){return _this._elem=elem},className:cx("srd-default-link",{reverse:reverse})},paths,link.labels.map(function(labelModel){return _this.generateLabel(labelModel)}))};DefaultLinkWidget.defaultProps={color:"black",width:3,smooth:false};DefaultLinkWidget=__decorate([mobx_react_1.observer],DefaultLinkWidget);return DefaultLinkWidget}(React.Component);exports.DefaultLinkWidget=DefaultLinkWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var mobx_react_1=__webpack_require__(3);var DefaultLabelWidget=function(_super){__extends(DefaultLabelWidget,_super);function DefaultLabelWidget(){return _super!==null&&_super.apply(this,arguments)||this}DefaultLabelWidget.prototype.render=function(){var _a=this.props.label,id=_a.id,title=_a.title,parent=_a.parent;return React.createElement("div",{className:"srd-label srd-default-label","srd-id":id,"srd-link-id":parent.id},title)};DefaultLabelWidget=__decorate([mobx_react_1.observer],DefaultLabelWidget);return DefaultLabelWidget}(React.Component);exports.DefaultLabelWidget=DefaultLabelWidget},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var AbstractFactory_1=__webpack_require__(8);var AbstractLabelFactory=function(_super){__extends(AbstractLabelFactory,_super);function AbstractLabelFactory(){return _super!==null&&_super.apply(this,arguments)||this}return AbstractLabelFactory}(AbstractFactory_1.AbstractFactory);exports.AbstractLabelFactory=AbstractLabelFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var AbstractLabelFactory_1=__webpack_require__(52);var DefaultLabelModel_1=__webpack_require__(26);var DefaultLabelWidget_1=__webpack_require__(51);var DefaultLabelFactory=function(_super){__extends(DefaultLabelFactory,_super);function DefaultLabelFactory(){return _super.call(this,"srd-default-label")||this}DefaultLabelFactory.prototype.generateReactWidget=function(_diagramEngine,label){return React.createElement(DefaultLabelWidget_1.DefaultLabelWidget,{label:label})};DefaultLabelFactory.prototype.getNewInstance=function(_initialConfig){return new DefaultLabelModel_1.DefaultLabelModel};return DefaultLabelFactory}(AbstractLabelFactory_1.AbstractLabelFactory);exports.DefaultLabelFactory=DefaultLabelFactory},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var BaseAction_1=__webpack_require__(10);var CreateLinkAction=function(_super){__extends(CreateLinkAction,_super);function CreateLinkAction(mouseX,mouseY,link){var _this=_super.call(this,mouseX,mouseY)||this;_this.link=link;return _this}return CreateLinkAction}(BaseAction_1.BaseAction);exports.CreateLinkAction=CreateLinkAction},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var cx=__webpack_require__(5);var mobx_1=__webpack_require__(0);var mobx_react_1=__webpack_require__(3);var LinkLayerWidget_1=__webpack_require__(33);var NodeLayerWidget_1=__webpack_require__(31);var Toolkit_1=__webpack_require__(9);var MoveCanvasAction_1=__webpack_require__(36);var MoveItemsAction_1=__webpack_require__(35);var SelectingAction_1=__webpack_require__(34);var NodeModel_1=__webpack_require__(11);var PointModel_1=__webpack_require__(14);var PortModel_1=__webpack_require__(19);var LinkModel_1=__webpack_require__(15);var CreateLinkAction_1=__webpack_require__(54);var DiagramWidget=function(_super){__extends(DiagramWidget,_super);function DiagramWidget(){return _super!==null&&_super.apply(this,arguments)||this}DiagramWidget.prototype.componentDidMount=function(){window.addEventListener("keyup",this.onKeyUp);if(true){window.focus()}};DiagramWidget.prototype.componentWillUnmount=function(){this.props.engine.canvas=null;window.removeEventListener("mouseup",this.onMouseUp);window.removeEventListener("mousemove",this.onMouseMove);window.removeEventListener("keyup",this.onKeyUp)};DiagramWidget.prototype.getModelAtPosition=function(event){var target=event.target;var model=this.props.engine.model;var element=Toolkit_1.Toolkit.closest(target,".srd-port[srd-id]");if(element){var nodeElement=Toolkit_1.Toolkit.closest(target,".srd-node[srd-id]");var nodeId=nodeElement.getAttribute("srd-id");var portId=element.getAttribute("srd-id");if(nodeId&&portId){var node=model.getNode(nodeId);if(node){var port=node.getPortFromID(portId);if(port){return{el:target,model:port}}}}}element=Toolkit_1.Toolkit.closest(target,".srd-point[srd-id]");if(element){var pointId=element.getAttribute("srd-id");var linkId=element.getAttribute("srd-link-id");if(pointId&&linkId){var link=model.getLink(linkId);if(link){var point=link.getPointModel(pointId);if(point){return{el:target,model:point}}}}}element=Toolkit_1.Toolkit.closest(target,".srd-link[srd-id]");if(element){var linkId=element.getAttribute("srd-id");if(linkId){var link=model.getLink(linkId);if(link){return{el:target,model:link}}}}element=Toolkit_1.Toolkit.closest(target,".srd-node[srd-id]");if(element){var nodeId=element.getAttribute("srd-id");if(nodeId){var node=model.getNode(nodeId);if(node){return{el:target,model:node}}}}return{el:target,model:undefined}};DiagramWidget.prototype.fireAction=function(){if(this.props.engine.action&&this.props.actionStillFiring){this.props.actionStillFiring(this.props.engine.action)}};DiagramWidget.prototype.stopFiringAction=function(shouldSkipEvent){if(this.props.actionStoppedFiring&&!shouldSkipEvent){if(this.props.engine.action){this.props.engine.action.end=Date.now();this.props.actionStoppedFiring(this.props.engine.action)}}this.props.engine.action=null};DiagramWidget.prototype.startFiringAction=function(a){var allowedAction=true;if(this.props.actionStartedFiring){allowedAction=this.props.actionStartedFiring(a)}if(allowedAction){this.props.engine.action=a}};DiagramWidget.prototype.onMouseDown=function(event){event.preventDefault();var _a=this.getModelAtPosition(event.nativeEvent),el=_a.el,model=_a.model;console.log("[mousedown] model at position",model);if(model){if(model instanceof PortModel_1.PortModel){if(!this.props.engine.model.locked&&!model.locked){var link=this.props.engine.getPortFactory(model.type).getLinkFactory().getNewInstance();link.sourcePort=model;link.firstPoint.setPosition(model.x,model.y);link.lastPoint.setPosition(model.x,model.y);this.props.engine.model.clearSelection();link.selected=true;link.lastPoint.selected=true;this.props.engine.model.addLink(link);this.startFiringAction(new CreateLinkAction_1.CreateLinkAction(event.clientX,event.clientY,link))}}else if(model instanceof LinkModel_1.LinkModel){if(!this.props.engine.model.locked&&!model.locked){if(event.shiftKey){model.selected=true}else{if(this.props.engine.model.maxNumberPointsPerLink>model.points.length-2){var _b=this.props.engine.getRelativeMousePoint(event),x=_b.x,y=_b.y;var point=this.props.engine.getLinkFactory(model.type).getPointFactory().getNewInstance({x:x,y:y});this.props.engine.model.clearSelection();point.selected=true;var segmentIndex=0;var segEl=Toolkit_1.Toolkit.closest(el,".srd-segment");if(segEl){var indexAttr=segEl.getAttribute("srd-index");if(indexAttr){segmentIndex=parseInt(indexAttr,10)}}model.addPoint(point,segmentIndex+1);var a=new MoveItemsAction_1.MoveItemsAction(event.clientX,event.clientY,this.props.engine);this.startFiringAction(a)}else{model.selected=true}}}}else{if(!event.shiftKey&&!model.selected){this.props.engine.model.clearSelection()}if(!model.selected){model.selected=true}var a=new MoveItemsAction_1.MoveItemsAction(event.clientX,event.clientY,this.props.engine);this.startFiringAction(a)}}else{if(event.shiftKey){var _c=this.props.engine.getPointRelativeToCanvas(event.clientX,event.clientY),x=_c.x,y=_c.y;this.startFiringAction(new SelectingAction_1.SelectingAction(x,y))}else{this.startFiringAction(new MoveCanvasAction_1.MoveCanvasAction(event.clientX,event.clientY,this.props.engine.model))}}document.addEventListener("mousemove",this.onMouseMove);document.addEventListener("mouseup",this.onMouseUp)};DiagramWidget.prototype.onMouseMove=function(event){var _this=this;event.preventDefault();var model=this.props.engine.model;if(this.props.engine.action instanceof SelectingAction_1.SelectingAction){var selectionAction_1=this.props.engine.action;model.nodes.forEach(function(node){node.selected=selectionAction_1.containsElement({x:node.x,y:node.y,model:model})});model.links.forEach(function(link){var atLeastOneSelected=false;link.points.forEach(function(point){point.selected=selectionAction_1.containsElement({x:point.x,y:point.y,model:model});if(point.selected){atLeastOneSelected=true}});link.selected=atLeastOneSelected});var relative=this.props.engine.getPointRelativeToCanvas(event.clientX,event.clientY);this.props.engine.action.mouseX2=relative.x;this.props.engine.action.mouseY2=relative.y;this.fireAction()}else if(this.props.engine.action instanceof CreateLinkAction_1.CreateLinkAction){var _a=this.props.engine.getRelativeMousePoint(event),x=_a.x,y=_a.y;this.props.engine.action.link.lastPoint.setPosition(x,y);this.fireAction()}else if(this.props.engine.action instanceof MoveItemsAction_1.MoveItemsAction){var xOffset_1=event.clientX-this.props.engine.action.mouseX;var yOffset_1=event.clientY-this.props.engine.action.mouseY;var zoomRatio_1=model.zoom/100;this.props.engine.action.selectionModels.forEach(function(selection){if(selection.model instanceof NodeModel_1.NodeModel||selection.model instanceof PointModel_1.PointModel&&!selection.model.isConnectedToPort()){selection.model.setPosition(selection.initialX+xOffset_1/zoomRatio_1,selection.initialY+yOffset_1/zoomRatio_1);if(_this.props.engine.model.smartRouting){_this.props.engine.calculateRoutingMatrix()}}else if(selection.model instanceof PointModel_1.PointModel){selection.model.x=selection.initialX+xOffset_1/zoomRatio_1;selection.model.y=selection.initialY+yOffset_1/zoomRatio_1}});if(this.props.engine.model.smartRouting){this.props.engine.calculateCanvasMatrix()}this.fireAction()}else if(this.props.engine.action instanceof MoveCanvasAction_1.MoveCanvasAction){if(this.props.engine.model.allowCanvasTranslation){model.offsetX=this.props.engine.action.initialOffsetX+(event.clientX-this.props.engine.action.mouseX);model.offsetY=this.props.engine.action.initialOffsetY+(event.clientY-this.props.engine.action.mouseY);this.fireAction()}}};DiagramWidget.prototype.onMouseUp=function(event){event.preventDefault();if(this.props.engine.action instanceof CreateLinkAction_1.CreateLinkAction){var link=this.props.engine.action.link;var model=this.getModelAtPosition(event).model;if(model){if(!model.locked&&!this.props.engine.model.locked){if(model instanceof PortModel_1.PortModel){if(link.sourcePort!==model){if(link.sourcePort.canLinkToPort(model)){link.targetPort=model;this.props.engine.model.clearSelection()}else{link.delete();this.props.engine.model.clearSelection()}}else{link.delete();this.props.engine.model.clearSelection()}}else{if(!this.props.engine.model.allowLooseLinks){link.delete();this.props.engine.model.clearSelection()}}}else{link.delete();this.props.engine.model.clearSelection()}}else{if(!this.props.engine.model.allowLooseLinks){link.delete();this.props.engine.model.clearSelection()}}}else if(this.props.engine.action instanceof MoveCanvasAction_1.MoveCanvasAction){var _a=this.props.engine.action,mouseX=_a.mouseX,mouseY=_a.mouseY;if(mouseX===event.clientX&&mouseY===event.clientY){this.props.engine.model.clearSelection()}}this.stopFiringAction();document.removeEventListener("mousemove",this.onMouseMove);document.removeEventListener("mouseup",this.onMouseUp)};DiagramWidget.prototype.onKeyUp=function(event){event.preventDefault();if(this.props.engine.model.deleteKeys.indexOf(event.keyCode)!==-1){if(!this.props.engine.model.locked){console.log("[keyup] delete",this.props.engine.model.selectedEntities);this.props.engine.model.selectedEntities.forEach(function(element){if(!element.locked){element.delete()}})}}};DiagramWidget.prototype.onWheel=function(event){var model=this.props.engine.model;if(model.allowCanvasZoom){event.preventDefault();event.stopPropagation();var oldZoomFactor=model.zoom/100;var scrollDelta=model.inverseZoom?event.deltaY:-event.deltaY;if(event.ctrlKey&&scrollDelta%1!==0){scrollDelta/=3}else{scrollDelta/=60}if(model.zoom+scrollDelta>10){model.zoom=model.zoom+scrollDelta}var zoomFactor=model.zoom/100;var boundingRect=event.currentTarget.getBoundingClientRect();var clientWidth=boundingRect.width;var clientHeight=boundingRect.height;var widthDiff=clientWidth*zoomFactor-clientWidth*oldZoomFactor;var heightDiff=clientHeight*zoomFactor-clientHeight*oldZoomFactor;var clientX=event.clientX-boundingRect.left;var clientY=event.clientY-boundingRect.top;var xFactor=(clientX-model.offsetX)/oldZoomFactor/clientWidth;var yFactor=(clientY-model.offsetY)/oldZoomFactor/clientHeight;model.offsetX=model.offsetX-widthDiff*xFactor;model.offsetY=model.offsetY-heightDiff*yFactor}};DiagramWidget.prototype.render=function(){var _this=this;return React.createElement("div",{className:cx("srd-diagram",this.props.className),style:this.props.style,ref:function(ref){return _this.props.engine.canvas=ref},onWheel:this.onWheel,onMouseDown:this.onMouseDown},React.createElement(NodeLayerWidget_1.NodeLayerWidget,{engine:this.props.engine}),React.createElement(LinkLayerWidget_1.LinkLayerWidget,{engine:this.props.engine}),this.props.engine.action instanceof SelectingAction_1.SelectingAction&&React.createElement("div",{className:"selection-box",style:this.props.engine.action.styles}))};__decorate([mobx_1.action.bound],DiagramWidget.prototype,"onMouseDown",null);__decorate([mobx_1.action.bound],DiagramWidget.prototype,"onMouseMove",null);__decorate([mobx_1.action.bound],DiagramWidget.prototype,"onMouseUp",null);__decorate([mobx_1.action.bound],DiagramWidget.prototype,"onKeyUp",null);__decorate([mobx_1.action.bound],DiagramWidget.prototype,"onWheel",null);DiagramWidget=__decorate([mobx_react_1.observer],DiagramWidget);return DiagramWidget}(React.Component);exports.DiagramWidget=DiagramWidget},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:true});var _=__webpack_require__(4);var mobx_1=__webpack_require__(0);var DefaultLabelFactory_1=__webpack_require__(53);var DefaultLinkFactory_1=__webpack_require__(24);var DefaultNodeFactory_1=__webpack_require__(45);var DefaultPortFactory_1=__webpack_require__(41);var DiagramModel_1=__webpack_require__(37);var PathFinding_1=__webpack_require__(18);var Toolkit_1=__webpack_require__(9);var DiagramEngine=function(){function DiagramEngine(){var _this=this;this._nodeFactories=new Map;this._linkFactories=new Map;this._portFactories=new Map;this._labelFactories=new Map;this._model=new DiagramModel_1.DiagramModel;this._canvas=null;this._portRefs=new Map;this._canvasMatrix=[];this._routingMatrix=[];this._hAdjustmentFactor=0;this._vAdjustmentFactor=0;this._action=null;this.markNodes=function(matrix){_this._model.nodes.forEach(function(node){var startX=Math.floor(node.x/PathFinding_1.ROUTING_SCALING_FACTOR);var endX=Math.ceil((node.x+node.width)/PathFinding_1.ROUTING_SCALING_FACTOR);var startY=Math.floor(node.y/PathFinding_1.ROUTING_SCALING_FACTOR);var endY=Math.ceil((node.y+node.height)/PathFinding_1.ROUTING_SCALING_FACTOR);for(var x=startX-1;x<=endX+1;x++){for(var y=startY-1;y<endY+1;y++){_this.markMatrixPoint(matrix,_this.translateRoutingX(x),_this.translateRoutingY(y))}}})};this.markPorts=function(matrix){var allElements=_.flatMap(Array.from(_this._model.links.values()).map(function(link){return[link.sourcePort,link.targetPort]}));allElements.filter(function filter(port){return port!==null}).forEach(function(port){var startX=Math.floor(port.x/PathFinding_1.ROUTING_SCALING_FACTOR);var endX=Math.ceil((port.x+port.width)/PathFinding_1.ROUTING_SCALING_FACTOR);var startY=Math.floor(port.y/PathFinding_1.ROUTING_SCALING_FACTOR);var endY=Math.ceil((port.y+port.height)/PathFinding_1.ROUTING_SCALING_FACTOR);for(var x=startX-1;x<=endX+1;x++){for(var y=startY-1;y<endY+1;y++){_this.markMatrixPoint(matrix,_this.translateRoutingX(x),_this.translateRoutingY(y))}}})};this.markMatrixPoint=function(matrix,x,y){if(matrix[y]!==undefined&&matrix[y][x]!==undefined){matrix[y][x]=1}};if(Toolkit_1.Toolkit.TESTING){Toolkit_1.Toolkit.TESTING_UID=0;if(window){window["diagram_instance"]=this}}}DiagramEngine.prototype.installDefaultFactories=function(){this.registerNodeFactory(new DefaultNodeFactory_1.DefaultNodeFactory);this.registerLinkFactory(new DefaultLinkFactory_1.DefaultLinkFactory);this.registerPortFactory(new DefaultPortFactory_1.DefaultPortFactory);this.registerLabelFactory(new DefaultLabelFactory_1.DefaultLabelFactory)};Object.defineProperty(DiagramEngine.prototype,"canvas",{get:function(){return this._canvas},set:function(canvas){this._canvas=canvas;if(this._canvas){this.updatePortRefPositions()}},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"action",{get:function(){return this._action},set:function(a){this._action=a},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"model",{get:function(){return this._model},set:function(model){this._model=model},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"nodeFactories",{get:function(){return this._nodeFactories},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"linkFactories",{get:function(){return this._linkFactories},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"labelFactories",{get:function(){return this._labelFactories},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"canvasLeft",{get:function(){if(this._canvas){return this._canvas.getBoundingClientRect().left}return 0},enumerable:true,configurable:true});Object.defineProperty(DiagramEngine.prototype,"canvasTop",{get:function(){if(this._canvas){return this._canvas.getBoundingClientRect().top}return 0},enumerable:true,configurable:true});DiagramEngine.prototype.registerLabelFactory=function(factory){this._labelFactories.set(factory.type,factory)};DiagramEngine.prototype.registerPortFactory=function(factory){this._portFactories.set(factory.type,factory)};DiagramEngine.prototype.registerNodeFactory=function(factory){this._nodeFactories.set(factory.type,factory)};DiagramEngine.prototype.registerLinkFactory=function(factory){this._linkFactories.set(factory.type,factory)};DiagramEngine.prototype.getPortFactory=function(type){var factory=this._portFactories.get(type);if(factory){return factory}throw new Error("Cannot find factory for port of type: ["+type+"]")};DiagramEngine.prototype.getNodeFactory=function(type){var factory=this._nodeFactories.get(type);if(factory){return factory}throw new Error("Cannot find factory for node of type: ["+type+"]")};DiagramEngine.prototype.getLinkFactory=function(type){var factory=this._linkFactories.get(type);if(factory){return factory}throw new Error("Cannot find factory for link of type: ["+type+"]")};DiagramEngine.prototype.getLabelFactory=function(type){var factory=this._labelFactories.get(type);if(factory){return factory}throw new Error("Cannot find factory for label of type: ["+type+"]")};DiagramEngine.prototype.getFactoryForPort=function(node){return this.getPortFactory(node.type)};DiagramEngine.prototype.getFactoryForNode=function(node){return this.getNodeFactory(node.type)};DiagramEngine.prototype.getFactoryForLink=function(link){return this.getLinkFactory(link.type)};DiagramEngine.prototype.getFactoryForLabel=function(label){return this.getLabelFactory(label.type)};DiagramEngine.prototype.getFactoryForPoint=function(point){if(point.parent){return this.getLinkFactory(point.parent.type).getPointFactory()}throw new Error("PointModel has no parent. Unable to find associated LinkFactory")};DiagramEngine.prototype.generateWidgetForLink=function(link){return this.getFactoryForLink(link).generateReactWidget(this,link)};DiagramEngine.prototype.generateWidgetForNode=function(node){return this.getFactoryForNode(node).generateReactWidget(this,node)};DiagramEngine.prototype.generateWidgetForPort=function(port){return this.getFactoryForPort(port).generateReactWidget(this,port)};DiagramEngine.prototype.generateWidgetForPoint=function(link,point){return this.getFactoryForLink(link).getPointFactory().generateReactWidget(this,point)};DiagramEngine.prototype.registerPortRef=function(port,ref){this._portRefs.set(port.id,{port:port,ref:ref})};DiagramEngine.prototype.unregisterPortRef=function(port){this._portRefs.delete(port.id)};DiagramEngine.prototype.updatePortRefPositions=function(){var _this=this;this._portRefs.forEach(function(_a){var port=_a.port,ref=_a.ref;var rect=ref.getBoundingClientRect();var point=_this.getRelativePoint(rect.left,rect.top);var x=ref.offsetWidth/2+point.x;var y=ref.offsetHeight/2+point.y;if(port.x!==x||port.y!==y){port.setPosition(x,y)}})};DiagramEngine.prototype.getRelativePoint=function(x,y){var pt=this.getPointRelativeToCanvas(x,y);var point={x:(pt.x-this._model.offsetX)/(this._model.zoom/100),y:(pt.y-this._model.offsetY)/(this._model.zoom/100)};return point};DiagramEngine.prototype.getRelativeMousePoint=function(event){return this.getRelativePoint(event.clientX,event.clientY)};DiagramEngine.prototype.getPointRelativeToCanvas=function(x,y){if(this._canvas){var rect=this._canvas.getBoundingClientRect();return{x:x-rect.left,y:y-rect.top}}return{x:x,y:y}};DiagramEngine.prototype.getNodeElement=function(node){var selector=this._canvas.querySelector('.srd-node[srd-id="'+node.id+'"]');if(selector===null){throw new Error("Cannot find Node element with nodeID: ["+node.id+"]")}return selector};DiagramEngine.prototype.getNodePortElement=function(port){if(port.parent){var selector=this._canvas.querySelector('.srd-node[srd-id="'+port.parent.id+'"] .srd-port[srd-id="'+port.id+'"]');if(selector===null){throw new Error("Cannot find Node Port element with nodeID: ["+port.parent.id+"] and name: ["+port.id+"]")}return selector}return null};DiagramEngine.prototype.getPortCoords=function(port){var sourceElement=this.getNodePortElement(port);if(sourceElement){var sourceRect=sourceElement.getBoundingClientRect();var canvasRect=this._canvas.getBoundingClientRect();return{x:(sourceRect.x-this._model.offsetX)/(this._model.zoom/100)-canvasRect.left,y:(sourceRect.y-this._model.offsetY)/(this._model.zoom/100)-canvasRect.top,width:sourceRect.width,height:sourceRect.height}}return null};DiagramEngine.prototype.getNodeDimensions=function(node){if(!this._canvas){return{width:0,height:0}}var nodeElement=this.getNodeElement(node);var nodeRect=nodeElement.getBoundingClientRect();return{width:nodeRect.width,height:nodeRect.height}};Object.defineProperty(DiagramEngine.prototype,"canvasMatrix",{get:function(){return this._canvasMatrix},enumerable:true,configurable:true});DiagramEngine.prototype.calculateCanvasMatrix=function(){var _a=this.matrixDimensions,canvasWidth=_a.width,hAdjustmentFactor=_a.hAdjustmentFactor,canvasHeight=_a.height,vAdjustmentFactor=_a.vAdjustmentFactor;this._hAdjustmentFactor=hAdjustmentFactor;this._vAdjustmentFactor=vAdjustmentFactor;var matrixWidth=Math.ceil(canvasWidth/PathFinding_1.ROUTING_SCALING_FACTOR);var matrixHeight=Math.ceil(canvasHeight/PathFinding_1.ROUTING_SCALING_FACTOR);this._canvasMatrix=_.range(0,matrixHeight).map(function(){return new Array(matrixWidth).fill(0)})};Object.defineProperty(DiagramEngine.prototype,"routingMatrix",{get:function(){return this._routingMatrix},enumerable:true,configurable:true});DiagramEngine.prototype.calculateRoutingMatrix=function(){if(this._canvasMatrix.length===0){this.calculateCanvasMatrix()}var matrix=_.cloneDeep(this.canvasMatrix);this.markNodes(matrix);this.markPorts(matrix);this._routingMatrix=matrix};DiagramEngine.prototype.translateRoutingX=function(x,reverse){if(reverse===void 0){reverse=false}return x+this._hAdjustmentFactor*(reverse?-1:1)};DiagramEngine.prototype.translateRoutingY=function(y,reverse){if(reverse===void 0){reverse=false}return y+this._vAdjustmentFactor*(reverse?-1:1)};Object.defineProperty(DiagramEngine.prototype,"matrixDimensions",{get:function(){var allNodesCoords=Array.from(this._model.nodes.values()).map(function(item){return{x:item.x,width:item.width,y:item.y,height:item.height}});var allLinks=Array.from(this._model.links.values());var allPortsCoords=_.flatMap(allLinks.map(function(link){return[link.sourcePort,link.targetPort]})).filter(function filter(item){return item!==null}).map(function(item){return{x:item.x,width:item.width,y:item.y,height:item.height}});var allPointsCoords=_.flatMap(allLinks.map(function(link){return link.points})).map(function(item){return{x:item.x,width:0,y:item.y,height:0}});var minX=Math.floor(Math.min(_.minBy(_.concat(allNodesCoords,allPortsCoords,allPointsCoords),function(item){return item.x}).x,0)/PathFinding_1.ROUTING_SCALING_FACTOR)*PathFinding_1.ROUTING_SCALING_FACTOR;var maxXElement=_.maxBy(_.concat(allNodesCoords,allPortsCoords,allPointsCoords),function(item){return item.x+item.width});var maxX=Math.max(maxXElement.x+maxXElement.width,this._canvas.offsetWidth);var minY=Math.floor(Math.min(_.minBy(_.concat(allNodesCoords,allPortsCoords,allPointsCoords),function(item){return item.y}).y,0)/PathFinding_1.ROUTING_SCALING_FACTOR)*PathFinding_1.ROUTING_SCALING_FACTOR;var maxYElement=_.maxBy(_.concat(allNodesCoords,allPortsCoords,allPointsCoords),function(item){return item.y+item.height});var maxY=Math.max(maxYElement.y+maxYElement.height,this._canvas.offsetHeight);return{width:Math.ceil(Math.abs(minX)+maxX),hAdjustmentFactor:Math.abs(minX)/PathFinding_1.ROUTING_SCALING_FACTOR+1,height:Math.ceil(Math.abs(minY)+maxY),vAdjustmentFactor:Math.abs(minY)/PathFinding_1.ROUTING_SCALING_FACTOR+1}},enumerable:true,configurable:true});DiagramEngine.prototype.fitContent=function(){if(this._canvas){var xFactor=this._canvas.clientWidth/this._canvas.scrollWidth;var yFactor=this._canvas.clientHeight/this._canvas.scrollHeight;var zoomFactor=xFactor<yFactor?xFactor:yFactor;this._model.zoom=this._model.zoom*zoomFactor;this._model.offsetX=0;this._model.offsetY=0}};__decorate([mobx_1.observable],DiagramEngine.prototype,"_nodeFactories",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_linkFactories",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_portFactories",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_labelFactories",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_model",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_canvas",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_portRefs",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_canvasMatrix",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_routingMatrix",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_hAdjustmentFactor",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_vAdjustmentFactor",void 0);__decorate([mobx_1.observable],DiagramEngine.prototype,"_action",void 0);__decorate([mobx_1.action],DiagramEngine.prototype,"installDefaultFactories",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"canvas",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"action",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"model",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"nodeFactories",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"linkFactories",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"labelFactories",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"canvasLeft",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"canvasTop",null);__decorate([mobx_1.action],DiagramEngine.prototype,"registerLabelFactory",null);__decorate([mobx_1.action],DiagramEngine.prototype,"registerPortFactory",null);__decorate([mobx_1.action],DiagramEngine.prototype,"registerNodeFactory",null);__decorate([mobx_1.action],DiagramEngine.prototype,"registerLinkFactory",null);__decorate([mobx_1.action],DiagramEngine.prototype,"registerPortRef",null);__decorate([mobx_1.action],DiagramEngine.prototype,"unregisterPortRef",null);__decorate([mobx_1.action],DiagramEngine.prototype,"updatePortRefPositions",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"canvasMatrix",null);__decorate([mobx_1.action],DiagramEngine.prototype,"calculateCanvasMatrix",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"routingMatrix",null);__decorate([mobx_1.action],DiagramEngine.prototype,"calculateRoutingMatrix",null);__decorate([mobx_1.computed],DiagramEngine.prototype,"matrixDimensions",null);__decorate([mobx_1.action],DiagramEngine.prototype,"fitContent",null);return DiagramEngine}();exports.DiagramEngine=DiagramEngine},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var sq=function sq(x){return x*x};var distPointToPoint=function distPointToPoint(_ref,_ref3){var _ref2=_slicedToArray(_ref,2);var ax=_ref2[0];var ay=_ref2[1];var _ref32=_slicedToArray(_ref3,2);var bx=_ref32[0];var by=_ref32[1];return Math.sqrt(sq(ax-bx)+sq(ay-by))};var distPointToParabol=function distPointToParabol(a,f){var p=distPointToPoint(a,f);return p==0?Infinity:sq(p)/(2*Math.abs(a[1]-f[1]))};var circumCenter=function circumCenter(a,b,c){var d=(a[0]-c[0])*(b[1]-c[1])-(b[0]-c[0])*(a[1]-c[1]);if(d==0)return[Infinity,Infinity];var xc=(((a[0]-c[0])*(a[0]+c[0])+(a[1]-c[1])*(a[1]+c[1]))/2*(b[1]-c[1])-((b[0]-c[0])*(b[0]+c[0])+(b[1]-c[1])*(b[1]+c[1]))/2*(a[1]-c[1]))/d;var yc=(((b[0]-c[0])*(b[0]+c[0])+(b[1]-c[1])*(b[1]+c[1]))/2*(a[0]-c[0])-((a[0]-c[0])*(a[0]+c[0])+(a[1]-c[1])*(a[1]+c[1]))/2*(b[0]-c[0]))/d;return[xc,yc]};var parabolsCrossX=function parabolsCrossX(fa,fb,q){if(fa[1]===fb[1])return[(fa[0]+fb[0])/2,(fa[0]+fb[0])/2];var s1=(fa[1]*fb[0]-fa[0]*fb[1]+fa[0]*q-fb[0]*q+Math.sqrt((fa[0]*fa[0]+fa[1]*fa[1]-2*fa[0]*fb[0]+fb[0]*fb[0]-2*fa[1]*fb[1]+fb[1]*fb[1])*(fa[1]*fb[1]-fa[1]*q-fb[1]*q+q*q)))/(fa[1]-fb[1]);var s2=(fa[1]*fb[0]-fa[0]*fb[1]+fa[0]*q-fb[0]*q-Math.sqrt((fa[0]*fa[0]+fa[1]*fa[1]-2*fa[0]*fb[0]+fb[0]*fb[0]-2*fa[1]*fb[1]+fb[1]*fb[1])*(fa[1]*fb[1]-fa[1]*q-fb[1]*q+q*q)))/(fa[1]-fb[1]);return s1<s2?[s1,s2]:[s2,s1]};var doHalflinesCross=function doHalflinesCross(sa,sb){var approx=arguments.length<=2||arguments[2]===undefined?1e-10:arguments[2];var dx=sb.ps[0]-sa.ps[0];var dy=sb.ps[1]-sa.ps[1];if(sa.m==Infinity)return sa.hp*(sb.m*dx-dy)<=approx&&sb.vec[0]*dx<=approx;if(sb.m==Infinity)return sb.hp*(sa.m*dx-dy)>=-approx&&sa.vec[0]*dx>=-approx;var det=sb.vec[0]*sa.vec[1]-sb.vec[1]*sa.vec[0];if(det===0)return false;var u=(dy*sb.vec[0]-dx*sb.vec[1])/det;var v=(dy*sa.vec[0]-dx*sa.vec[1])/det;return u>=-approx&&v>=approx||u>=approx&&v>=-approx};var matrixTransform=function matrixTransform(points,matrix){return points.map(function(point){return{x:point.x*matrix[0]+point.y*matrix[2]+matrix[4],y:point.x*matrix[1]+point.y*matrix[3]+matrix[5]}})};var transformEllipse=function transformEllipse(rx,ry,ax,m){var torad=Math.PI/180;var epsilon=1e-10;var c=Math.cos(ax*torad),s=Math.sin(ax*torad);var ma=[rx*(m[0]*c+m[2]*s),rx*(m[1]*c+m[3]*s),ry*(-m[0]*s+m[2]*c),ry*(-m[1]*s+m[3]*c)];var J=ma[0]*ma[0]+ma[2]*ma[2],K=ma[1]*ma[1]+ma[3]*ma[3];var D=((ma[0]-ma[3])*(ma[0]-ma[3])+(ma[2]+ma[1])*(ma[2]+ma[1]))*((ma[0]+ma[3])*(ma[0]+ma[3])+(ma[2]-ma[1])*(ma[2]-ma[1]));var JK=(J+K)/2;if(D<epsilon*JK){return{rx:Math.sqrt(JK),ry:Math.sqrt(JK),ax:0,isDegenerate:false}}var L=ma[0]*ma[1]+ma[2]*ma[3];D=Math.sqrt(D);var l1=JK+D/2,l2=JK-D/2;var newAx=undefined,newRx=undefined,newRy=undefined;newAx=Math.abs(L)<epsilon&&Math.abs(l1-K)<epsilon?90:Math.atan(Math.abs(L)>Math.abs(l1-K)?(l1-J)/L:L/(l1-K))*180/Math.PI;if(newAx>=0){newRx=Math.sqrt(l1);newRy=Math.sqrt(l2)}else{newAx+=90;newRx=Math.sqrt(l2);newRy=Math.sqrt(l1)}return{rx:newRx,ry:newRy,ax:newAx,isDegenerate:newRx<epsilon*newRy||newRy<epsilon*newRx}};exports["default"]={distPointToPoint:distPointToPoint,distPointToParabol:distPointToParabol,circumCenter:circumCenter,parabolsCrossX:parabolsCrossX,doHalflinesCross:doHalflinesCross,matrixTransform:matrixTransform,transformEllipse:transformEllipse};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _geom=__webpack_require__(59);var Path=function Path(init){var _instructions=init||[];var push=function push(arr,el){var copy=arr.slice(0,arr.length);copy.push(el);return copy};var areEqualPoints=function areEqualPoints(_ref,_ref3){var _ref2=_slicedToArray(_ref,2);var a1=_ref2[0];var b1=_ref2[1];var _ref32=_slicedToArray(_ref3,2);var a2=_ref32[0];var b2=_ref32[1];return a1===a2&&b1===b2};var trimZeros=function trimZeros(string,char){var l=string.length;while(string.charAt(l-1)==="0"){l=l-1}if(string.charAt(l-1)==="."){l=l-1}return string.substr(0,l)};var round=function round(number,digits){var str=number.toFixed(digits);return trimZeros(str)};var printInstrunction=function printInstrunction(_ref4){var command=_ref4.command;var params=_ref4.params;var numbers=params.map(function(param){return round(param,6)});return command+" "+numbers.join(" ")};var point=function point(_ref5,prev){var command=_ref5.command;var params=_ref5.params;switch(command){case"M":return[params[0],params[1]];case"L":return[params[0],params[1]];case"H":return[params[0],prev[1]];case"V":return[prev[0],params[0]];case"Z":return null;case"C":return[params[4],params[5]];case"S":return[params[2],params[3]];case"Q":return[params[2],params[3]];case"T":return[params[0],params[1]];case"A":return[params[5],params[6]]}};var transformParams=function transformParams(instruction,matrix,prev){var p=instruction.params;var transformer={V:function V(instruction,matrix,prev){var pts=[{x:prev[0],y:p[1]}];var newPts=(0,_geom.matrixTransform)(pts,matrix);if(newPts[0].x===(0,_geom.matrixTransform)([{x:prev[0],y:prev[1]}])[0].x){return{command:"V",params:[newPts[0].y]}}else{return{command:"L",params:[newPts[0].x,newPts[0].y]}}},H:function H(instruction,matrix,prev){var pts=[{x:p[0],y:prev[1]}];var newPts=(0,_geom.matrixTransform)(pts,matrix);if(newPts[0].y===(0,_geom.matrixTransform)([{x:prev[0],y:prev[1]}])[0].y){return{command:"H",params:[newPts[0].x]}}else{return{command:"L",params:[newPts[0].x,newPts[0].y]}}},A:function A(instruction,matrix,prev){var r=(0,_geom.transformEllipse)(p[0],p[1],p[2],matrix);var sweepFlag=p[4];if(matrix[0]*matrix[3]-matrix[1]*matrix[2]<0){sweepFlag=sweepFlag?"0":"1"}var pts=[{x:p[5],y:p[6]}];var newPts=(0,_geom.matrixTransform)(pts,matrix);if(r.isDegenerate){return{command:"L",params:[newPts[0].x,newPts[0].y]}}else{return{command:"A",params:[r.rx,r.ry,r.ax,p[3],sweepFlag,newPts[0].x,newPts[0].y]}}},C:function C(instruction,matrix,prev){var pts=[{x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]}];var newPts=(0,_geom.matrixTransform)(pts,matrix);return{command:"C",params:[newPts[0].x,newPts[0].y,newPts[1].x,newPts[1].y,newPts[2].x,newPts[2].y]}},Z:function Z(instruction,matrix,prev){return{command:"Z",params:[]}},default:function _default(instruction,matrix,prev){var pts=[{x:p[0],y:p[1]}];var newPts=(0,_geom.matrixTransform)(pts,matrix);var newParams=instruction.params.slice(0,instruction.params.length);newParams.splice(0,2,newPts[0].x,newPts[0].y);return{command:instruction.command,params:newParams}}};if(transformer[instruction.command]){return transformer[instruction.command](instruction,matrix,prev)}else{return transformer["default"](instruction,matrix,prev)}};var verbosify=function verbosify(keys,f){return function(a){var args=typeof a==="object"?keys.map(function(k){return a[k]}):arguments;return f.apply(null,args)}};var plus=function plus(instruction){return Path(push(_instructions,instruction))};return{moveto:verbosify(["x","y"],function(x,y){return plus({command:"M",params:[x,y]})}),lineto:verbosify(["x","y"],function(x,y){return plus({command:"L",params:[x,y]})}),hlineto:verbosify(["x"],function(x){return plus({command:"H",params:[x]})}),vlineto:verbosify(["y"],function(y){return plus({command:"V",params:[y]})}),closepath:function closepath(){return plus({command:"Z",params:[]})},curveto:verbosify(["x1","y1","x2","y2","x","y"],function(x1,y1,x2,y2,x,y){return plus({command:"C",params:[x1,y1,x2,y2,x,y]})}),smoothcurveto:verbosify(["x2","y2","x","y"],function(x2,y2,x,y){return plus({command:"S",params:[x2,y2,x,y]})}),qcurveto:verbosify(["x1","y1","x","y"],function(x1,y1,x,y){return plus({command:"Q",params:[x1,y1,x,y]})}),smoothqcurveto:verbosify(["x","y"],function(x,y){return plus({command:"T",params:[x,y]})}),arc:verbosify(["rx","ry","xrot","largeArcFlag","sweepFlag","x","y"],function(rx,ry,xrot,largeArcFlag,sweepFlag,x,y){return plus({command:"A",params:[rx,ry,xrot,largeArcFlag,sweepFlag,x,y]})}),translate:verbosify(["dx","dy"],function(){var dx=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var dy=arguments.length<=1||arguments[1]===undefined?0:arguments[1];if(dx!==0||dx!==0){var _ret=function(){var prev=[0,0];var matrix=[1,0,0,1,dx,dy];var newInstructions=_instructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p});return{v:Path(newInstructions)}}();if(typeof _ret==="object")return _ret.v}else{return Path(_instructions)}}),rotate:verbosify(["angle","rx","ry"],function(angle){var rx=arguments.length<=1||arguments[1]===undefined?0:arguments[1];var ry=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(angle!==0){var _ret2=function(){var prev=undefined;var matrix=undefined;var newInstructions=_instructions;if(rx!==0&&ry!==0){prev=[0,0];matrix=[1,0,0,1,-rx,-ry];newInstructions=newInstructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p})}var rad=angle*Math.PI/180;var cos=Math.cos(rad);var sin=Math.sin(rad);prev=[0,0];matrix=[cos,sin,-sin,cos,0,0];newInstructions=newInstructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p});if(rx!==0&&ry!==0){prev=[0,0];matrix=[1,0,0,1,rx,ry];newInstructions=newInstructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p})}return{v:Path(newInstructions)}}();if(typeof _ret2==="object")return _ret2.v}else{return Path(_instructions)}}),scale:verbosify(["sx","sy"],function(){var sx=arguments.length<=0||arguments[0]===undefined?1:arguments[0];var sy=arguments.length<=1||arguments[1]===undefined?sx:arguments[1];return function(){if(sx!==1||sy!==1){var _ret3=function(){var prev=[0,0];var matrix=[sx,0,0,sy,0,0];var newInstructions=_instructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p});return{v:Path(newInstructions)}}();if(typeof _ret3==="object")return _ret3.v}else{return Path(_instructions)}}()}),shearX:verbosify(["angle"],function(){var angle=arguments.length<=0||arguments[0]===undefined?0:arguments[0];if(angle!==0){var _ret4=function(){var prev=[0,0];var matrix=[1,0,Math.tan(angle*Math.PI/180),1,0,0];var newInstructions=_instructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p});return{v:Path(newInstructions)}}();if(typeof _ret4==="object")return _ret4.v}else{return Path(_instructions)}}),shearY:verbosify(["angle"],function(){var angle=arguments.length<=0||arguments[0]===undefined?0:arguments[0];if(angle!==0){var _ret5=function(){var prev=[0,0];var matrix=[1,Math.tan(angle*Math.PI/180),0,1,0,0];var newInstructions=_instructions.map(function(instruction){var p=transformParams(instruction,matrix,prev);prev=point(instruction,prev);return p});return{v:Path(newInstructions)}}();if(typeof _ret5==="object")return _ret5.v}else{return Path(_instructions)}}),print:function print(){return _instructions.map(printInstrunction).join(" ")},toString:function toString(){return undefined.print()},points:function points(){var ps=[];var prev=[0,0];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_instructions[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var instruction=_step.value;var p=point(instruction,prev);prev=p;if(p){ps.push(p)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return ps},instructions:function instructions(){return _instructions.slice(0,_instructions.length)},connect:function connect(path){var ps=this.points();var last=ps[ps.length-1];var first=path.points()[0];var newInstructions=undefined;if(_instructions[_instructions.length-1].command!=="Z"){newInstructions=path.instructions().slice(1);if(!areEqualPoints(last,first)){newInstructions.unshift({command:"L",params:first})}}else{newInstructions=path.instructions()}return Path(this.instructions().concat(newInstructions))}}};exports["default"]=function(){return Path()};module.exports=exports["default"]},function(module,exports,__webpack_require__){var JumpPointFinderBase=__webpack_require__(16);var DiagonalMovement=__webpack_require__(2);function JPFMoveDiagonallyIfAtMostOneObstacle(opt){JumpPointFinderBase.call(this,opt)}JPFMoveDiagonallyIfAtMostOneObstacle.prototype=new JumpPointFinderBase;JPFMoveDiagonallyIfAtMostOneObstacle.prototype.constructor=JPFMoveDiagonallyIfAtMostOneObstacle;JPFMoveDiagonallyIfAtMostOneObstacle.prototype._jump=function(x,y,px,py){var grid=this.grid,dx=x-px,dy=y-py;if(!grid.isWalkableAt(x,y)){return null}if(this.trackJumpRecursion===true){grid.getNodeAt(x,y).tested=true}if(grid.getNodeAt(x,y)===this.endNode){return[x,y]}if(dx!==0&&dy!==0){if(grid.isWalkableAt(x-dx,y+dy)&&!grid.isWalkableAt(x-dx,y)||grid.isWalkableAt(x+dx,y-dy)&&!grid.isWalkableAt(x,y-dy)){return[x,y]}if(this._jump(x+dx,y,x,y)||this._jump(x,y+dy,x,y)){return[x,y]}}else{if(dx!==0){if(grid.isWalkableAt(x+dx,y+1)&&!grid.isWalkableAt(x,y+1)||grid.isWalkableAt(x+dx,y-1)&&!grid.isWalkableAt(x,y-1)){return[x,y]}}else{if(grid.isWalkableAt(x+1,y+dy)&&!grid.isWalkableAt(x+1,y)||grid.isWalkableAt(x-1,y+dy)&&!grid.isWalkableAt(x-1,y)){return[x,y]}}}if(grid.isWalkableAt(x+dx,y)||grid.isWalkableAt(x,y+dy)){return this._jump(x+dx,y+dy,x,y)}else{return null}};JPFMoveDiagonallyIfAtMostOneObstacle.prototype._findNeighbors=function(node){var parent=node.parent,x=node.x,y=node.y,grid=this.grid,px,py,nx,ny,dx,dy,neighbors=[],neighborNodes,neighborNode,i,l;if(parent){px=parent.x;py=parent.y;dx=(x-px)/Math.max(Math.abs(x-px),1);dy=(y-py)/Math.max(Math.abs(y-py),1);if(dx!==0&&dy!==0){if(grid.isWalkableAt(x,y+dy)){neighbors.push([x,y+dy])}if(grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y])}if(grid.isWalkableAt(x,y+dy)||grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y+dy])}if(!grid.isWalkableAt(x-dx,y)&&grid.isWalkableAt(x,y+dy)){neighbors.push([x-dx,y+dy])}if(!grid.isWalkableAt(x,y-dy)&&grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y-dy])}}else{if(dx===0){if(grid.isWalkableAt(x,y+dy)){neighbors.push([x,y+dy]);if(!grid.isWalkableAt(x+1,y)){neighbors.push([x+1,y+dy])}if(!grid.isWalkableAt(x-1,y)){neighbors.push([x-1,y+dy])}}}else{if(grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y]);if(!grid.isWalkableAt(x,y+1)){neighbors.push([x+dx,y+1])}if(!grid.isWalkableAt(x,y-1)){neighbors.push([x+dx,y-1])}}}}}else{neighborNodes=grid.getNeighbors(node,DiagonalMovement.IfAtMostOneObstacle);for(i=0,l=neighborNodes.length;i<l;++i){neighborNode=neighborNodes[i];neighbors.push([neighborNode.x,neighborNode.y])}}return neighbors};module.exports=JPFMoveDiagonallyIfAtMostOneObstacle},function(module,exports,__webpack_require__){var JumpPointFinderBase=__webpack_require__(16);var DiagonalMovement=__webpack_require__(2);function JPFMoveDiagonallyIfNoObstacles(opt){JumpPointFinderBase.call(this,opt)}JPFMoveDiagonallyIfNoObstacles.prototype=new JumpPointFinderBase;JPFMoveDiagonallyIfNoObstacles.prototype.constructor=JPFMoveDiagonallyIfNoObstacles;JPFMoveDiagonallyIfNoObstacles.prototype._jump=function(x,y,px,py){var grid=this.grid,dx=x-px,dy=y-py;if(!grid.isWalkableAt(x,y)){return null}if(this.trackJumpRecursion===true){grid.getNodeAt(x,y).tested=true}if(grid.getNodeAt(x,y)===this.endNode){return[x,y]}if(dx!==0&&dy!==0){if(this._jump(x+dx,y,x,y)||this._jump(x,y+dy,x,y)){return[x,y]}}else{if(dx!==0){if(grid.isWalkableAt(x,y-1)&&!grid.isWalkableAt(x-dx,y-1)||grid.isWalkableAt(x,y+1)&&!grid.isWalkableAt(x-dx,y+1)){return[x,y]}}else if(dy!==0){if(grid.isWalkableAt(x-1,y)&&!grid.isWalkableAt(x-1,y-dy)||grid.isWalkableAt(x+1,y)&&!grid.isWalkableAt(x+1,y-dy)){return[x,y]}}}if(grid.isWalkableAt(x+dx,y)&&grid.isWalkableAt(x,y+dy)){return this._jump(x+dx,y+dy,x,y)}else{return null}};JPFMoveDiagonallyIfNoObstacles.prototype._findNeighbors=function(node){var parent=node.parent,x=node.x,y=node.y,grid=this.grid,px,py,nx,ny,dx,dy,neighbors=[],neighborNodes,neighborNode,i,l;if(parent){px=parent.x;py=parent.y;dx=(x-px)/Math.max(Math.abs(x-px),1);dy=(y-py)/Math.max(Math.abs(y-py),1);if(dx!==0&&dy!==0){if(grid.isWalkableAt(x,y+dy)){neighbors.push([x,y+dy])}if(grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y])}if(grid.isWalkableAt(x,y+dy)&&grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y+dy])}}else{var isNextWalkable;if(dx!==0){isNextWalkable=grid.isWalkableAt(x+dx,y);var isTopWalkable=grid.isWalkableAt(x,y+1);var isBottomWalkable=grid.isWalkableAt(x,y-1);if(isNextWalkable){neighbors.push([x+dx,y]);if(isTopWalkable){neighbors.push([x+dx,y+1])}if(isBottomWalkable){neighbors.push([x+dx,y-1])}}if(isTopWalkable){neighbors.push([x,y+1])}if(isBottomWalkable){neighbors.push([x,y-1])}}else if(dy!==0){isNextWalkable=grid.isWalkableAt(x,y+dy);var isRightWalkable=grid.isWalkableAt(x+1,y);var isLeftWalkable=grid.isWalkableAt(x-1,y);if(isNextWalkable){neighbors.push([x,y+dy]);if(isRightWalkable){neighbors.push([x+1,y+dy])}if(isLeftWalkable){neighbors.push([x-1,y+dy])}}if(isRightWalkable){neighbors.push([x+1,y])}if(isLeftWalkable){neighbors.push([x-1,y])}}}}else{neighborNodes=grid.getNeighbors(node,DiagonalMovement.OnlyWhenNoObstacles);for(i=0,l=neighborNodes.length;i<l;++i){neighborNode=neighborNodes[i];neighbors.push([neighborNode.x,neighborNode.y])}}return neighbors};module.exports=JPFMoveDiagonallyIfNoObstacles},function(module,exports,__webpack_require__){var JumpPointFinderBase=__webpack_require__(16);var DiagonalMovement=__webpack_require__(2);function JPFAlwaysMoveDiagonally(opt){JumpPointFinderBase.call(this,opt)}JPFAlwaysMoveDiagonally.prototype=new JumpPointFinderBase;JPFAlwaysMoveDiagonally.prototype.constructor=JPFAlwaysMoveDiagonally;JPFAlwaysMoveDiagonally.prototype._jump=function(x,y,px,py){var grid=this.grid,dx=x-px,dy=y-py;if(!grid.isWalkableAt(x,y)){return null}if(this.trackJumpRecursion===true){grid.getNodeAt(x,y).tested=true}if(grid.getNodeAt(x,y)===this.endNode){return[x,y]}if(dx!==0&&dy!==0){if(grid.isWalkableAt(x-dx,y+dy)&&!grid.isWalkableAt(x-dx,y)||grid.isWalkableAt(x+dx,y-dy)&&!grid.isWalkableAt(x,y-dy)){return[x,y]}if(this._jump(x+dx,y,x,y)||this._jump(x,y+dy,x,y)){return[x,y]}}else{if(dx!==0){if(grid.isWalkableAt(x+dx,y+1)&&!grid.isWalkableAt(x,y+1)||grid.isWalkableAt(x+dx,y-1)&&!grid.isWalkableAt(x,y-1)){return[x,y]}}else{if(grid.isWalkableAt(x+1,y+dy)&&!grid.isWalkableAt(x+1,y)||grid.isWalkableAt(x-1,y+dy)&&!grid.isWalkableAt(x-1,y)){return[x,y]}}}return this._jump(x+dx,y+dy,x,y)};JPFAlwaysMoveDiagonally.prototype._findNeighbors=function(node){var parent=node.parent,x=node.x,y=node.y,grid=this.grid,px,py,nx,ny,dx,dy,neighbors=[],neighborNodes,neighborNode,i,l;if(parent){px=parent.x;py=parent.y;dx=(x-px)/Math.max(Math.abs(x-px),1);dy=(y-py)/Math.max(Math.abs(y-py),1);if(dx!==0&&dy!==0){if(grid.isWalkableAt(x,y+dy)){neighbors.push([x,y+dy])}if(grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y])}if(grid.isWalkableAt(x+dx,y+dy)){neighbors.push([x+dx,y+dy])}if(!grid.isWalkableAt(x-dx,y)){neighbors.push([x-dx,y+dy])}if(!grid.isWalkableAt(x,y-dy)){neighbors.push([x+dx,y-dy])}}else{if(dx===0){if(grid.isWalkableAt(x,y+dy)){neighbors.push([x,y+dy])}if(!grid.isWalkableAt(x+1,y)){neighbors.push([x+1,y+dy])}if(!grid.isWalkableAt(x-1,y)){neighbors.push([x-1,y+dy])}}else{if(grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y])}if(!grid.isWalkableAt(x,y+1)){neighbors.push([x+dx,y+1])}if(!grid.isWalkableAt(x,y-1)){neighbors.push([x+dx,y-1])}}}}else{neighborNodes=grid.getNeighbors(node,DiagonalMovement.Always);for(i=0,l=neighborNodes.length;i<l;++i){neighborNode=neighborNodes[i];neighbors.push([neighborNode.x,neighborNode.y])}}return neighbors};module.exports=JPFAlwaysMoveDiagonally},function(module,exports,__webpack_require__){var JumpPointFinderBase=__webpack_require__(16);var DiagonalMovement=__webpack_require__(2);function JPFNeverMoveDiagonally(opt){JumpPointFinderBase.call(this,opt)}JPFNeverMoveDiagonally.prototype=new JumpPointFinderBase;JPFNeverMoveDiagonally.prototype.constructor=JPFNeverMoveDiagonally;JPFNeverMoveDiagonally.prototype._jump=function(x,y,px,py){var grid=this.grid,dx=x-px,dy=y-py;if(!grid.isWalkableAt(x,y)){return null}if(this.trackJumpRecursion===true){grid.getNodeAt(x,y).tested=true}if(grid.getNodeAt(x,y)===this.endNode){return[x,y]}if(dx!==0){if(grid.isWalkableAt(x,y-1)&&!grid.isWalkableAt(x-dx,y-1)||grid.isWalkableAt(x,y+1)&&!grid.isWalkableAt(x-dx,y+1)){return[x,y]}}else if(dy!==0){if(grid.isWalkableAt(x-1,y)&&!grid.isWalkableAt(x-1,y-dy)||grid.isWalkableAt(x+1,y)&&!grid.isWalkableAt(x+1,y-dy)){return[x,y]}if(this._jump(x+1,y,x,y)||this._jump(x-1,y,x,y)){return[x,y]}}else{throw new Error("Only horizontal and vertical movements are allowed")}return this._jump(x+dx,y+dy,x,y)};JPFNeverMoveDiagonally.prototype._findNeighbors=function(node){var parent=node.parent,x=node.x,y=node.y,grid=this.grid,px,py,nx,ny,dx,dy,neighbors=[],neighborNodes,neighborNode,i,l;if(parent){px=parent.x;py=parent.y;dx=(x-px)/Math.max(Math.abs(x-px),1);dy=(y-py)/Math.max(Math.abs(y-py),1);if(dx!==0){if(grid.isWalkableAt(x,y-1)){neighbors.push([x,y-1])}if(grid.isWalkableAt(x,y+1)){neighbors.push([x,y+1])}if(grid.isWalkableAt(x+dx,y)){neighbors.push([x+dx,y])}}else if(dy!==0){if(grid.isWalkableAt(x-1,y)){neighbors.push([x-1,y])}if(grid.isWalkableAt(x+1,y)){neighbors.push([x+1,y])}if(grid.isWalkableAt(x,y+dy)){neighbors.push([x,y+dy])}}}else{neighborNodes=grid.getNeighbors(node,DiagonalMovement.Never);for(i=0,l=neighborNodes.length;i<l;++i){neighborNode=neighborNodes[i];neighbors.push([neighborNode.x,neighborNode.y])}}return neighbors};module.exports=JPFNeverMoveDiagonally},function(module,exports,__webpack_require__){var DiagonalMovement=__webpack_require__(2);var JPFNeverMoveDiagonally=__webpack_require__(64);var JPFAlwaysMoveDiagonally=__webpack_require__(63);var JPFMoveDiagonallyIfNoObstacles=__webpack_require__(62);var JPFMoveDiagonallyIfAtMostOneObstacle=__webpack_require__(61);function JumpPointFinder(opt){opt=opt||{};if(opt.diagonalMovement===DiagonalMovement.Never){return new JPFNeverMoveDiagonally(opt)}else if(opt.diagonalMovement===DiagonalMovement.Always){return new JPFAlwaysMoveDiagonally(opt)}else if(opt.diagonalMovement===DiagonalMovement.OnlyWhenNoObstacles){return new JPFMoveDiagonallyIfNoObstacles(opt)}else{return new JPFMoveDiagonallyIfAtMostOneObstacle(opt)}}module.exports=JumpPointFinder},function(module,exports,__webpack_require__){var Util=__webpack_require__(7);var Heuristic=__webpack_require__(12);var Node=__webpack_require__(29);var DiagonalMovement=__webpack_require__(2);function IDAStarFinder(opt){opt=opt||{};this.allowDiagonal=opt.allowDiagonal;this.dontCrossCorners=opt.dontCrossCorners;this.diagonalMovement=opt.diagonalMovement;this.heuristic=opt.heuristic||Heuristic.manhattan;this.weight=opt.weight||1;this.trackRecursion=opt.trackRecursion||false;this.timeLimit=opt.timeLimit||Infinity;if(!this.diagonalMovement){if(!this.allowDiagonal){this.diagonalMovement=DiagonalMovement.Never}else{if(this.dontCrossCorners){this.diagonalMovement=DiagonalMovement.OnlyWhenNoObstacles}else{this.diagonalMovement=DiagonalMovement.IfAtMostOneObstacle}}}if(this.diagonalMovement===DiagonalMovement.Never){this.heuristic=opt.heuristic||Heuristic.manhattan}else{this.heuristic=opt.heuristic||Heuristic.octile}}IDAStarFinder.prototype.findPath=function(startX,startY,endX,endY,grid){var nodesVisited=0;var startTime=(new Date).getTime();var h=function(a,b){return this.heuristic(Math.abs(b.x-a.x),Math.abs(b.y-a.y))}.bind(this);var cost=function(a,b){return a.x===b.x||a.y===b.y?1:Math.SQRT2};var search=function(node,g,cutoff,route,depth){nodesVisited++;if(this.timeLimit>0&&(new Date).getTime()-startTime>this.timeLimit*1e3){return Infinity}var f=g+h(node,end)*this.weight;if(f>cutoff){return f}if(node==end){route[depth]=[node.x,node.y];return node}var min,t,k,neighbour;var neighbours=grid.getNeighbors(node,this.diagonalMovement);for(k=0,min=Infinity;neighbour=neighbours[k];++k){if(this.trackRecursion){neighbour.retainCount=neighbour.retainCount+1||1;if(neighbour.tested!==true){neighbour.tested=true}}t=search(neighbour,g+cost(node,neighbour),cutoff,route,depth+1);if(t instanceof Node){route[depth]=[node.x,node.y];return t}if(this.trackRecursion&&--neighbour.retainCount===0){neighbour.tested=false}if(t<min){min=t}}return min}.bind(this);var start=grid.getNodeAt(startX,startY);var end=grid.getNodeAt(endX,endY);var cutOff=h(start,end);var j,route,t;for(j=0;true;++j){route=[];t=search(start,0,cutOff,route,0);if(t===Infinity){return[]}if(t instanceof Node){return route}cutOff=t}return[]};module.exports=IDAStarFinder},function(module,exports,__webpack_require__){var BiAStarFinder=__webpack_require__(27);function BiDijkstraFinder(opt){BiAStarFinder.call(this,opt);this.heuristic=function(dx,dy){return 0}}BiDijkstraFinder.prototype=new BiAStarFinder;BiDijkstraFinder.prototype.constructor=BiDijkstraFinder;module.exports=BiDijkstraFinder},function(module,exports,__webpack_require__){var Util=__webpack_require__(7);var DiagonalMovement=__webpack_require__(2);function BiBreadthFirstFinder(opt){opt=opt||{};this.allowDiagonal=opt.allowDiagonal;this.dontCrossCorners=opt.dontCrossCorners;this.diagonalMovement=opt.diagonalMovement;if(!this.diagonalMovement){if(!this.allowDiagonal){this.diagonalMovement=DiagonalMovement.Never}else{if(this.dontCrossCorners){this.diagonalMovement=DiagonalMovement.OnlyWhenNoObstacles}else{this.diagonalMovement=DiagonalMovement.IfAtMostOneObstacle}}}}BiBreadthFirstFinder.prototype.findPath=function(startX,startY,endX,endY,grid){var startNode=grid.getNodeAt(startX,startY),endNode=grid.getNodeAt(endX,endY),startOpenList=[],endOpenList=[],neighbors,neighbor,node,diagonalMovement=this.diagonalMovement,BY_START=0,BY_END=1,i,l;startOpenList.push(startNode);startNode.opened=true;startNode.by=BY_START;endOpenList.push(endNode);endNode.opened=true;endNode.by=BY_END;while(startOpenList.length&&endOpenList.length){node=startOpenList.shift();node.closed=true;neighbors=grid.getNeighbors(node,diagonalMovement);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];if(neighbor.closed){continue}if(neighbor.opened){if(neighbor.by===BY_END){return Util.biBacktrace(node,neighbor)}continue}startOpenList.push(neighbor);neighbor.parent=node;neighbor.opened=true;neighbor.by=BY_START}node=endOpenList.shift();node.closed=true;neighbors=grid.getNeighbors(node,diagonalMovement);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];if(neighbor.closed){continue}if(neighbor.opened){if(neighbor.by===BY_START){return Util.biBacktrace(neighbor,node)}continue}endOpenList.push(neighbor);neighbor.parent=node;neighbor.opened=true;neighbor.by=BY_END}}return[]};module.exports=BiBreadthFirstFinder},function(module,exports,__webpack_require__){var BiAStarFinder=__webpack_require__(27);function BiBestFirstFinder(opt){BiAStarFinder.call(this,opt);var orig=this.heuristic;this.heuristic=function(dx,dy){return orig(dx,dy)*1e6}}BiBestFirstFinder.prototype=new BiAStarFinder;BiBestFirstFinder.prototype.constructor=BiBestFirstFinder;module.exports=BiBestFirstFinder},function(module,exports,__webpack_require__){var AStarFinder=__webpack_require__(28);function DijkstraFinder(opt){AStarFinder.call(this,opt);this.heuristic=function(dx,dy){return 0}}DijkstraFinder.prototype=new AStarFinder;DijkstraFinder.prototype.constructor=DijkstraFinder;module.exports=DijkstraFinder},function(module,exports,__webpack_require__){var Util=__webpack_require__(7);var DiagonalMovement=__webpack_require__(2);function BreadthFirstFinder(opt){opt=opt||{};this.allowDiagonal=opt.allowDiagonal;this.dontCrossCorners=opt.dontCrossCorners;this.diagonalMovement=opt.diagonalMovement;if(!this.diagonalMovement){if(!this.allowDiagonal){this.diagonalMovement=DiagonalMovement.Never}else{if(this.dontCrossCorners){this.diagonalMovement=DiagonalMovement.OnlyWhenNoObstacles}else{this.diagonalMovement=DiagonalMovement.IfAtMostOneObstacle}}}}BreadthFirstFinder.prototype.findPath=function(startX,startY,endX,endY,grid){var openList=[],diagonalMovement=this.diagonalMovement,startNode=grid.getNodeAt(startX,startY),endNode=grid.getNodeAt(endX,endY),neighbors,neighbor,node,i,l;openList.push(startNode);startNode.opened=true;while(openList.length){node=openList.shift();node.closed=true;if(node===endNode){return Util.backtrace(endNode)}neighbors=grid.getNeighbors(node,diagonalMovement);for(i=0,l=neighbors.length;i<l;++i){neighbor=neighbors[i];if(neighbor.closed||neighbor.opened){continue}openList.push(neighbor);neighbor.opened=true;neighbor.parent=node}}return[]};module.exports=BreadthFirstFinder},function(module,exports,__webpack_require__){var AStarFinder=__webpack_require__(28);function BestFirstFinder(opt){AStarFinder.call(this,opt);var orig=this.heuristic;this.heuristic=function(dx,dy){return orig(dx,dy)*1e6}}BestFirstFinder.prototype=new AStarFinder;BestFirstFinder.prototype.constructor=BestFirstFinder;module.exports=BestFirstFinder},function(module,exports,__webpack_require__){var Node=__webpack_require__(29);var DiagonalMovement=__webpack_require__(2);function Grid(width_or_matrix,height,matrix){var width;if(typeof width_or_matrix!=="object"){width=width_or_matrix}else{height=width_or_matrix.length;width=width_or_matrix[0].length;matrix=width_or_matrix}this.width=width;this.height=height;this.nodes=this._buildNodes(width,height,matrix)}Grid.prototype._buildNodes=function(width,height,matrix){var i,j,nodes=new Array(height);for(i=0;i<height;++i){nodes[i]=new Array(width);for(j=0;j<width;++j){nodes[i][j]=new Node(j,i)}}if(matrix===undefined){return nodes}if(matrix.length!==height||matrix[0].length!==width){throw new Error("Matrix size does not fit")}for(i=0;i<height;++i){for(j=0;j<width;++j){if(matrix[i][j]){nodes[i][j].walkable=false}}}return nodes};Grid.prototype.getNodeAt=function(x,y){return this.nodes[y][x]};Grid.prototype.isWalkableAt=function(x,y){return this.isInside(x,y)&&this.nodes[y][x].walkable};Grid.prototype.isInside=function(x,y){return x>=0&&x<this.width&&(y>=0&&y<this.height)};Grid.prototype.setWalkableAt=function(x,y,walkable){this.nodes[y][x].walkable=walkable};Grid.prototype.getNeighbors=function(node,diagonalMovement){var x=node.x,y=node.y,neighbors=[],s0=false,d0=false,s1=false,d1=false,s2=false,d2=false,s3=false,d3=false,nodes=this.nodes;if(this.isWalkableAt(x,y-1)){neighbors.push(nodes[y-1][x]);s0=true}if(this.isWalkableAt(x+1,y)){neighbors.push(nodes[y][x+1]);s1=true}if(this.isWalkableAt(x,y+1)){neighbors.push(nodes[y+1][x]);s2=true}if(this.isWalkableAt(x-1,y)){neighbors.push(nodes[y][x-1]);s3=true}if(diagonalMovement===DiagonalMovement.Never){return neighbors}if(diagonalMovement===DiagonalMovement.OnlyWhenNoObstacles){d0=s3&&s0;d1=s0&&s1;d2=s1&&s2;d3=s2&&s3}else if(diagonalMovement===DiagonalMovement.IfAtMostOneObstacle){d0=s3||s0;d1=s0||s1;d2=s1||s2;d3=s2||s3}else if(diagonalMovement===DiagonalMovement.Always){d0=true;d1=true;d2=true;d3=true}else{throw new Error("Incorrect value of diagonalMovement")}if(d0&&this.isWalkableAt(x-1,y-1)){neighbors.push(nodes[y-1][x-1])}if(d1&&this.isWalkableAt(x+1,y-1)){neighbors.push(nodes[y-1][x+1])}if(d2&&this.isWalkableAt(x+1,y+1)){neighbors.push(nodes[y+1][x+1])}if(d3&&this.isWalkableAt(x-1,y+1)){neighbors.push(nodes[y+1][x-1])}return neighbors};Grid.prototype.clone=function(){var i,j,width=this.width,height=this.height,thisNodes=this.nodes,newGrid=new Grid(width,height),newNodes=new Array(height);for(i=0;i<height;++i){newNodes[i]=new Array(width);for(j=0;j<width;++j){newNodes[i][j]=new Node(j,i,thisNodes[i][j].walkable)}}newGrid.nodes=newNodes;return newGrid};module.exports=Grid},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){(function(module){(function(){var Heap,defaultCmp,floor,heapify,heappop,heappush,heappushpop,heapreplace,insort,min,nlargest,nsmallest,updateItem,_siftdown,_siftup;floor=Math.floor,min=Math.min;defaultCmp=function(x,y){if(x<y){return-1}if(x>y){return 1}return 0};insort=function(a,x,lo,hi,cmp){var mid;if(lo==null){lo=0}if(cmp==null){cmp=defaultCmp}if(lo<0){throw new Error("lo must be non-negative")}if(hi==null){hi=a.length}while(lo<hi){mid=floor((lo+hi)/2);if(cmp(x,a[mid])<0){hi=mid}else{lo=mid+1}}return[].splice.apply(a,[lo,lo-lo].concat(x)),x};heappush=function(array,item,cmp){if(cmp==null){cmp=defaultCmp}array.push(item);return _siftdown(array,0,array.length-1,cmp)};heappop=function(array,cmp){var lastelt,returnitem;if(cmp==null){cmp=defaultCmp}lastelt=array.pop();if(array.length){returnitem=array[0];array[0]=lastelt;_siftup(array,0,cmp)}else{returnitem=lastelt}return returnitem};heapreplace=function(array,item,cmp){var returnitem;if(cmp==null){cmp=defaultCmp}returnitem=array[0];array[0]=item;_siftup(array,0,cmp);return returnitem};heappushpop=function(array,item,cmp){var _ref;if(cmp==null){cmp=defaultCmp}if(array.length&&cmp(array[0],item)<0){_ref=[array[0],item],item=_ref[0],array[0]=_ref[1];_siftup(array,0,cmp)}return item};heapify=function(array,cmp){var i,_i,_j,_len,_ref,_ref1,_results,_results1;if(cmp==null){cmp=defaultCmp}_ref1=function(){_results1=[];for(var _j=0,_ref=floor(array.length/2);0<=_ref?_j<_ref:_j>_ref;0<=_ref?_j++:_j--){_results1.push(_j)}return _results1}.apply(this).reverse();_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){i=_ref1[_i];_results.push(_siftup(array,i,cmp))}return _results};updateItem=function(array,item,cmp){var pos;if(cmp==null){cmp=defaultCmp}pos=array.indexOf(item);if(pos===-1){return}_siftdown(array,0,pos,cmp);return _siftup(array,pos,cmp)};nlargest=function(array,n,cmp){var elem,result,_i,_len,_ref;if(cmp==null){cmp=defaultCmp}result=array.slice(0,n);if(!result.length){return result}heapify(result,cmp);_ref=array.slice(n);for(_i=0,_len=_ref.length;_i<_len;_i++){elem=_ref[_i];heappushpop(result,elem,cmp)}return result.sort(cmp).reverse()};nsmallest=function(array,n,cmp){var elem,i,los,result,_i,_j,_len,_ref,_ref1,_results;if(cmp==null){cmp=defaultCmp}if(n*10<=array.length){result=array.slice(0,n).sort(cmp);if(!result.length){return result}los=result[result.length-1];_ref=array.slice(n);for(_i=0,_len=_ref.length;_i<_len;_i++){elem=_ref[_i];if(cmp(elem,los)<0){insort(result,elem,0,null,cmp);result.pop();los=result[result.length-1]}}return result}heapify(array,cmp);_results=[];for(i=_j=0,_ref1=min(n,array.length);0<=_ref1?_j<_ref1:_j>_ref1;i=0<=_ref1?++_j:--_j){_results.push(heappop(array,cmp))}return _results};_siftdown=function(array,startpos,pos,cmp){var newitem,parent,parentpos;if(cmp==null){cmp=defaultCmp}newitem=array[pos];while(pos>startpos){parentpos=pos-1>>1;parent=array[parentpos];if(cmp(newitem,parent)<0){array[pos]=parent;pos=parentpos;continue}break}return array[pos]=newitem};_siftup=function(array,pos,cmp){var childpos,endpos,newitem,rightpos,startpos;if(cmp==null){cmp=defaultCmp}endpos=array.length;startpos=pos;newitem=array[pos];childpos=2*pos+1;while(childpos<endpos){rightpos=childpos+1;if(rightpos<endpos&&!(cmp(array[childpos],array[rightpos])<0)){childpos=rightpos}array[pos]=array[childpos];pos=childpos;childpos=2*pos+1}array[pos]=newitem;return _siftdown(array,startpos,pos,cmp)};Heap=function(){Heap.push=heappush;Heap.pop=heappop;Heap.replace=heapreplace;Heap.pushpop=heappushpop;Heap.heapify=heapify;Heap.updateItem=updateItem;Heap.nlargest=nlargest;Heap.nsmallest=nsmallest;function Heap(cmp){this.cmp=cmp!=null?cmp:defaultCmp;this.nodes=[]}Heap.prototype.push=function(x){return heappush(this.nodes,x,this.cmp)};Heap.prototype.pop=function(){return heappop(this.nodes,this.cmp)};Heap.prototype.peek=function(){return this.nodes[0]};Heap.prototype.contains=function(x){return this.nodes.indexOf(x)!==-1};Heap.prototype.replace=function(x){return heapreplace(this.nodes,x,this.cmp)};Heap.prototype.pushpop=function(x){return heappushpop(this.nodes,x,this.cmp)};Heap.prototype.heapify=function(){return heapify(this.nodes,this.cmp)};Heap.prototype.updateItem=function(x){return updateItem(this.nodes,x,this.cmp)};Heap.prototype.clear=function(){return this.nodes=[]};Heap.prototype.empty=function(){return this.nodes.length===0};Heap.prototype.size=function(){return this.nodes.length};Heap.prototype.clone=function(){var heap;heap=new Heap;heap.nodes=this.nodes.slice(0);return heap};Heap.prototype.toArray=function(){return this.nodes.slice(0)};Heap.prototype.insert=Heap.prototype.push;Heap.prototype.top=Heap.prototype.peek;Heap.prototype.front=Heap.prototype.peek;Heap.prototype.has=Heap.prototype.contains;Heap.prototype.copy=Heap.prototype.clone;return Heap}();if(typeof module!=="undefined"&&module!==null?module.exports:void 0){module.exports=Heap}else{window.Heap=Heap}}).call(this)}).call(this,__webpack_require__(74)(module))},function(module,exports,__webpack_require__){module.exports={Heap:__webpack_require__(17),Node:__webpack_require__(29),Grid:__webpack_require__(73),Util:__webpack_require__(7),DiagonalMovement:__webpack_require__(2),Heuristic:__webpack_require__(12),AStarFinder:__webpack_require__(28),BestFirstFinder:__webpack_require__(72),BreadthFirstFinder:__webpack_require__(71),DijkstraFinder:__webpack_require__(70),BiAStarFinder:__webpack_require__(27),BiBestFirstFinder:__webpack_require__(69),BiBreadthFirstFinder:__webpack_require__(68),BiDijkstraFinder:__webpack_require__(67),IDAStarFinder:__webpack_require__(66),JumpPointFinder:__webpack_require__(65)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(76)},function(module,exports){var proto=Element.prototype;var vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(vendor)return vendor.call(el,selector);var nodes=el.parentNode.querySelectorAll(selector);for(var i=0;i<nodes.length;++i){if(nodes[i]==el)return true}return false}},function(module,exports,__webpack_require__){var matches=__webpack_require__(78);module.exports=function(element,selector,checkYoSelf){var parent=checkYoSelf?element:element.parentNode;while(parent&&parent!==document){if(matches(parent,selector))return parent;parent=parent.parentNode}}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(9));__export(__webpack_require__(58));__export(__webpack_require__(44));__export(__webpack_require__(20));__export(__webpack_require__(23));__export(__webpack_require__(26));__export(__webpack_require__(47));__export(__webpack_require__(24));__export(__webpack_require__(45));__export(__webpack_require__(41));__export(__webpack_require__(53));__export(__webpack_require__(21));__export(__webpack_require__(50));__export(__webpack_require__(51));__export(__webpack_require__(43));__export(__webpack_require__(39));__export(__webpack_require__(46));__export(__webpack_require__(8));__export(__webpack_require__(52));__export(__webpack_require__(49));__export(__webpack_require__(42));__export(__webpack_require__(40));__export(__webpack_require__(48));__export(__webpack_require__(18));__export(__webpack_require__(10));__export(__webpack_require__(36));__export(__webpack_require__(35));__export(__webpack_require__(34));__export(__webpack_require__(6));__export(__webpack_require__(37));__export(__webpack_require__(15));__export(__webpack_require__(11));__export(__webpack_require__(14));__export(__webpack_require__(19));__export(__webpack_require__(25));__export(__webpack_require__(55));__export(__webpack_require__(32));__export(__webpack_require__(30));__export(__webpack_require__(38));__export(__webpack_require__(33));__export(__webpack_require__(31))}])});
//# sourceMappingURL=index.js.map